(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){},{}],2:[function(require,module,exports){(function(global){var base64=require("base64-js");var ieee754=require("ieee754");var isArray=require("isarray");exports.Buffer=Buffer;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;Buffer.poolSize=8192;var rootParent={};Buffer.TYPED_ARRAY_SUPPORT=global.TYPED_ARRAY_SUPPORT!==undefined?global.TYPED_ARRAY_SUPPORT:typedArraySupport();function typedArraySupport(){function Bar(){}try{var arr=new Uint8Array(1);arr.foo=function(){return 42};arr.constructor=Bar;return arr.foo()===42&&arr.constructor===Bar&&typeof arr.subarray==="function"&&arr.subarray(1,1).byteLength===0}catch(e){return false}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Buffer(arg){if(!(this instanceof Buffer)){if(arguments.length>1)return new Buffer(arg,arguments[1]);return new Buffer(arg)}this.length=0;this.parent=undefined;if(typeof arg==="number"){return fromNumber(this,arg)}if(typeof arg==="string"){return fromString(this,arg,arguments.length>1?arguments[1]:"utf8")}return fromObject(this,arg)}function fromNumber(that,length){that=allocate(that,length<0?0:checked(length)|0);if(!Buffer.TYPED_ARRAY_SUPPORT){for(var i=0;i<length;i++){that[i]=0}}return that}function fromString(that,string,encoding){if(typeof encoding!=="string"||encoding==="")encoding="utf8";var length=byteLength(string,encoding)|0;that=allocate(that,length);that.write(string,encoding);return that}function fromObject(that,object){if(Buffer.isBuffer(object))return fromBuffer(that,object);if(isArray(object))return fromArray(that,object);if(object==null){throw new TypeError("must start with number, buffer, array or string")}if(typeof ArrayBuffer!=="undefined"){if(object.buffer instanceof ArrayBuffer){return fromTypedArray(that,object)}if(object instanceof ArrayBuffer){return fromArrayBuffer(that,object)}}if(object.length)return fromArrayLike(that,object);return fromJsonObject(that,object)}function fromBuffer(that,buffer){var length=checked(buffer.length)|0;that=allocate(that,length);buffer.copy(that,0,0,length);return that}function fromArray(that,array){var length=checked(array.length)|0;that=allocate(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255}return that}function fromTypedArray(that,array){var length=checked(array.length)|0;that=allocate(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255}return that}function fromArrayBuffer(that,array){if(Buffer.TYPED_ARRAY_SUPPORT){array.byteLength;that=Buffer._augment(new Uint8Array(array))}else{that=fromTypedArray(that,new Uint8Array(array))}return that}function fromArrayLike(that,array){var length=checked(array.length)|0;that=allocate(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255}return that}function fromJsonObject(that,object){var array;var length=0;if(object.type==="Buffer"&&isArray(object.data)){array=object.data;length=checked(array.length)|0}that=allocate(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255}return that}if(Buffer.TYPED_ARRAY_SUPPORT){Buffer.prototype.__proto__=Uint8Array.prototype;Buffer.__proto__=Uint8Array}function allocate(that,length){if(Buffer.TYPED_ARRAY_SUPPORT){that=Buffer._augment(new Uint8Array(length));that.__proto__=Buffer.prototype}else{that.length=length;that._isBuffer=true}var fromPool=length!==0&&length<=Buffer.poolSize>>>1;if(fromPool)that.parent=rootParent;return that}function checked(length){if(length>=kMaxLength()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+kMaxLength().toString(16)+" bytes")}return length|0}function SlowBuffer(subject,encoding){if(!(this instanceof SlowBuffer))return new SlowBuffer(subject,encoding);var buf=new Buffer(subject,encoding);delete buf.parent;return buf}Buffer.isBuffer=function isBuffer(b){return!!(b!=null&&b._isBuffer)};Buffer.compare=function compare(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b)){throw new TypeError("Arguments must be Buffers")}if(a===b)return 0;var x=a.length;var y=b.length;var i=0;var len=Math.min(x,y);while(i<len){if(a[i]!==b[i])break;++i}if(i!==len){x=a[i];y=b[i]}if(x<y)return-1;if(y<x)return 1;return 0};Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Buffer.concat=function concat(list,length){if(!isArray(list))throw new TypeError("list argument must be an Array of Buffers.");if(list.length===0){return new Buffer(0)}var i;if(length===undefined){length=0;for(i=0;i<list.length;i++){length+=list[i].length}}var buf=new Buffer(length);var pos=0;for(i=0;i<list.length;i++){var item=list[i];item.copy(buf,pos);pos+=item.length}return buf};function byteLength(string,encoding){if(typeof string!=="string")string=""+string;var len=string.length;if(len===0)return 0;var loweredCase=false;for(;;){switch(encoding){case"ascii":case"binary":case"raw":case"raws":return len;case"utf8":case"utf-8":return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return len*2;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase();loweredCase=true}}}Buffer.byteLength=byteLength;Buffer.prototype.length=undefined;Buffer.prototype.parent=undefined;function slowToString(encoding,start,end){var loweredCase=false;start=start|0;end=end===undefined||end===Infinity?this.length:end|0;if(!encoding)encoding="utf8";if(start<0)start=0;if(end>this.length)end=this.length;if(end<=start)return"";while(true){switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"binary":return binarySlice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase();loweredCase=true}}}Buffer.prototype.toString=function toString(){var length=this.length|0;if(length===0)return"";if(arguments.length===0)return utf8Slice(this,0,length);return slowToString.apply(this,arguments)};Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return true;return Buffer.compare(this,b)===0};Buffer.prototype.inspect=function inspect(){var str="";var max=exports.INSPECT_MAX_BYTES;if(this.length>0){str=this.toString("hex",0,max).match(/.{2}/g).join(" ");if(this.length>max)str+=" ... "}return"<Buffer "+str+">"};Buffer.prototype.compare=function compare(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return 0;return Buffer.compare(this,b)};Buffer.prototype.indexOf=function indexOf(val,byteOffset){if(byteOffset>2147483647)byteOffset=2147483647;else if(byteOffset<-2147483648)byteOffset=-2147483648;byteOffset>>=0;if(this.length===0)return-1;if(byteOffset>=this.length)return-1;if(byteOffset<0)byteOffset=Math.max(this.length+byteOffset,0);if(typeof val==="string"){if(val.length===0)return-1;return String.prototype.indexOf.call(this,val,byteOffset)}if(Buffer.isBuffer(val)){return arrayIndexOf(this,val,byteOffset)}if(typeof val==="number"){if(Buffer.TYPED_ARRAY_SUPPORT&&Uint8Array.prototype.indexOf==="function"){return Uint8Array.prototype.indexOf.call(this,val,byteOffset)}return arrayIndexOf(this,[val],byteOffset)}function arrayIndexOf(arr,val,byteOffset){var foundIndex=-1;for(var i=0;byteOffset+i<arr.length;i++){if(arr[byteOffset+i]===val[foundIndex===-1?0:i-foundIndex]){if(foundIndex===-1)foundIndex=i;if(i-foundIndex+1===val.length)return byteOffset+foundIndex}else{foundIndex=-1}}return-1}throw new TypeError("val must be string, number or Buffer")};Buffer.prototype.get=function get(offset){console.log(".get() is deprecated. Access using array indexes instead.");return this.readUInt8(offset)};Buffer.prototype.set=function set(v,offset){console.log(".set() is deprecated. Access using array indexes instead.");return this.writeUInt8(v,offset)};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}var strLen=string.length;if(strLen%2!==0)throw new Error("Invalid hex string");if(length>strLen/2){length=strLen/2}for(var i=0;i<length;i++){var parsed=parseInt(string.substr(i*2,2),16);if(isNaN(parsed))throw new Error("Invalid hex string");buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function binaryWrite(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}Buffer.prototype.write=function write(string,offset,length,encoding){if(offset===undefined){encoding="utf8";length=this.length;offset=0}else if(length===undefined&&typeof offset==="string"){encoding=offset;length=this.length;offset=0}else if(isFinite(offset)){offset=offset|0;if(isFinite(length)){length=length|0;if(encoding===undefined)encoding="utf8"}else{encoding=length;length=undefined}}else{var swap=encoding;encoding=offset;offset=length|0;length=swap}var remaining=this.length-offset;if(length===undefined||length>remaining)length=remaining;if(string.length>0&&(length<0||offset<0)||offset>this.length){throw new RangeError("attempt to write outside buffer bounds")}if(!encoding)encoding="utf8";var loweredCase=false;for(;;){switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"binary":return binaryWrite(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase();loweredCase=true}}};Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf)}else{return base64.fromByteArray(buf.slice(start,end))}}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);var res=[];var i=start;while(i<end){var firstByte=buf[i];var codePoint=null;var bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:if(firstByte<128){codePoint=firstByte}break;case 2:secondByte=buf[i+1];if((secondByte&192)===128){tempCodePoint=(firstByte&31)<<6|secondByte&63;if(tempCodePoint>127){codePoint=tempCodePoint}}break;case 3:secondByte=buf[i+1];thirdByte=buf[i+2];if((secondByte&192)===128&&(thirdByte&192)===128){tempCodePoint=(firstByte&15)<<12|(secondByte&63)<<6|thirdByte&63;if(tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)){codePoint=tempCodePoint}}break;case 4:secondByte=buf[i+1];thirdByte=buf[i+2];fourthByte=buf[i+3];if((secondByte&192)===128&&(thirdByte&192)===128&&(fourthByte&192)===128){tempCodePoint=(firstByte&15)<<18|(secondByte&63)<<12|(thirdByte&63)<<6|fourthByte&63;if(tempCodePoint>65535&&tempCodePoint<1114112){codePoint=tempCodePoint}}}}if(codePoint===null){codePoint=65533;bytesPerSequence=1}else if(codePoint>65535){codePoint-=65536;res.push(codePoint>>>10&1023|55296);codePoint=56320|codePoint&1023}res.push(codePoint);i+=bytesPerSequence}return decodeCodePointsArray(res)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH){return String.fromCharCode.apply(String,codePoints)}var res="";var i=0;while(i<len){res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH))}return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;i++){ret+=String.fromCharCode(buf[i]&127)}return ret}function binarySlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;i++){ret+=String.fromCharCode(buf[i])}return ret}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out="";for(var i=start;i<end;i++){out+=toHex(buf[i])}return out}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res="";for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}return res}Buffer.prototype.slice=function slice(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0}else if(start>len){start=len}if(end<0){end+=len;if(end<0)end=0}else if(end>len){end=len}if(end<start)end=start;var newBuf;if(Buffer.TYPED_ARRAY_SUPPORT){newBuf=Buffer._augment(this.subarray(start,end))}else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,undefined);for(var i=0;i<sliceLen;i++){newBuf[i]=this[i+start]}}if(newBuf.length)newBuf.parent=this.parent||this;return newBuf};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}return val};Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert){checkOffset(offset,byteLength,this.length)}var val=this[offset+--byteLength];var mul=1;while(byteLength>0&&(mul*=256)){val+=this[offset+--byteLength]*mul}return val};Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);return this[offset]};Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8};Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1]};Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216};Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])};Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];while(i>0&&(mul*=256)){val+=this[offset+--i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readInt8=function readInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&128))return this[offset];return(255-this[offset]+1)*-1};Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24};Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]};Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4)};Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4)};Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8)};Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8)};function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError("buffer must be a Buffer instance");if(value>max||value<min)throw new RangeError("value is out of bounds");if(offset+ext>buf.length)throw new RangeError("index out of range")}Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength),0);var mul=1;var i=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength),0);var i=byteLength-1;var mul=1;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,1,255,0);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);this[offset]=value&255;return offset+1};function objectWriteUInt16(buf,value,offset,littleEndian){if(value<0)value=65535+value+1;for(var i=0,j=Math.min(buf.length-offset,2);i<j;i++){buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>(littleEndian?i:1-i)*8}}Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8}else{objectWriteUInt16(this,value,offset,true)}return offset+2};Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value&255}else{objectWriteUInt16(this,value,offset,false)}return offset+2};function objectWriteUInt32(buf,value,offset,littleEndian){if(value<0)value=4294967295+value+1;for(var i=0,j=Math.min(buf.length-offset,4);i<j;i++){buf[offset+i]=value>>>(littleEndian?i:3-i)*8&255}}Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value&255}else{objectWriteUInt32(this,value,offset,true)}return offset+4};Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255}else{objectWriteUInt32(this,value,offset,false)}return offset+4};Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0;var mul=1;var sub=value<0?1:0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1;var mul=1;var sub=value<0?1:0;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,1,127,-128);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);if(value<0)value=255+value+1;this[offset]=value&255;return offset+1};Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8}else{objectWriteUInt16(this,value,offset,true)}return offset+2};Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value&255}else{objectWriteUInt16(this,value,offset,false)}return offset+2};Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24}else{objectWriteUInt32(this,value,offset,true)}return offset+4};Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(value<0)value=4294967295+value+1;if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255}else{objectWriteUInt32(this,value,offset,false)}return offset+4};function checkIEEE754(buf,value,offset,ext,max,min){if(value>max||value<min)throw new RangeError("value is out of bounds");if(offset+ext>buf.length)throw new RangeError("index out of range");if(offset<0)throw new RangeError("index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,4,3.4028234663852886e38,-3.4028234663852886e38)}ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4}Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert)};Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert)};function writeDouble(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,8,1.7976931348623157e308,-1.7976931348623157e308)}ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8}Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert)};Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!start)start=0;if(!end&&end!==0)end=this.length;if(targetStart>=target.length)targetStart=target.length;if(!targetStart)targetStart=0;if(end>0&&end<start)end=start;if(end===start)return 0;if(target.length===0||this.length===0)return 0;if(targetStart<0){throw new RangeError("targetStart out of bounds")}if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");if(end>this.length)end=this.length;if(target.length-targetStart<end-start){end=target.length-targetStart+start}var len=end-start;var i;if(this===target&&start<targetStart&&targetStart<end){for(i=len-1;i>=0;i--){target[i+targetStart]=this[i+start]}}else if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT){for(i=0;i<len;i++){target[i+targetStart]=this[i+start]}}else{target._set(this.subarray(start,start+len),targetStart)}return len};Buffer.prototype.fill=function fill(value,start,end){if(!value)value=0;if(!start)start=0;if(!end)end=this.length;if(end<start)throw new RangeError("end < start");if(end===start)return;if(this.length===0)return;if(start<0||start>=this.length)throw new RangeError("start out of bounds");if(end<0||end>this.length)throw new RangeError("end out of bounds");var i;if(typeof value==="number"){for(i=start;i<end;i++){this[i]=value}}else{var bytes=utf8ToBytes(value.toString());var len=bytes.length;for(i=start;i<end;i++){this[i]=bytes[i%len]}}return this};Buffer.prototype.toArrayBuffer=function toArrayBuffer(){if(typeof Uint8Array!=="undefined"){if(Buffer.TYPED_ARRAY_SUPPORT){return new Buffer(this).buffer}else{var buf=new Uint8Array(this.length);for(var i=0,len=buf.length;i<len;i+=1){buf[i]=this[i]}return buf.buffer}}else{throw new TypeError("Buffer.toArrayBuffer not supported in this browser")}};var BP=Buffer.prototype;Buffer._augment=function _augment(arr){arr.constructor=Buffer;arr._isBuffer=true;arr._set=arr.set;arr.get=BP.get;arr.set=BP.set;arr.write=BP.write;arr.toString=BP.toString;arr.toLocaleString=BP.toString;arr.toJSON=BP.toJSON;arr.equals=BP.equals;arr.compare=BP.compare;arr.indexOf=BP.indexOf;arr.copy=BP.copy;arr.slice=BP.slice;arr.readUIntLE=BP.readUIntLE;arr.readUIntBE=BP.readUIntBE;arr.readUInt8=BP.readUInt8;arr.readUInt16LE=BP.readUInt16LE;arr.readUInt16BE=BP.readUInt16BE;arr.readUInt32LE=BP.readUInt32LE;arr.readUInt32BE=BP.readUInt32BE;arr.readIntLE=BP.readIntLE;arr.readIntBE=BP.readIntBE;arr.readInt8=BP.readInt8;arr.readInt16LE=BP.readInt16LE;arr.readInt16BE=BP.readInt16BE;arr.readInt32LE=BP.readInt32LE;arr.readInt32BE=BP.readInt32BE;arr.readFloatLE=BP.readFloatLE;arr.readFloatBE=BP.readFloatBE;arr.readDoubleLE=BP.readDoubleLE;arr.readDoubleBE=BP.readDoubleBE;arr.writeUInt8=BP.writeUInt8;arr.writeUIntLE=BP.writeUIntLE;arr.writeUIntBE=BP.writeUIntBE;arr.writeUInt16LE=BP.writeUInt16LE;arr.writeUInt16BE=BP.writeUInt16BE;arr.writeUInt32LE=BP.writeUInt32LE;arr.writeUInt32BE=BP.writeUInt32BE;arr.writeIntLE=BP.writeIntLE;arr.writeIntBE=BP.writeIntBE;arr.writeInt8=BP.writeInt8;arr.writeInt16LE=BP.writeInt16LE;arr.writeInt16BE=BP.writeInt16BE;arr.writeInt32LE=BP.writeInt32LE;arr.writeInt32BE=BP.writeInt32BE;arr.writeFloatLE=BP.writeFloatLE;arr.writeFloatBE=BP.writeFloatBE;arr.writeDoubleLE=BP.writeDoubleLE;arr.writeDoubleBE=BP.writeDoubleBE;arr.fill=BP.fill;arr.inspect=BP.inspect;arr.toArrayBuffer=BP.toArrayBuffer;return arr};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(str){str=stringtrim(str).replace(INVALID_BASE64_RE,"");if(str.length<2)return"";while(str.length%4!==0){str=str+"="}return str}function stringtrim(str){if(str.trim)return str.trim();return str.replace(/^\s+|\s+$/g,"")}function toHex(n){if(n<16)return"0"+n.toString(16);return n.toString(16)}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];for(var i=0;i<length;i++){codePoint=string.charCodeAt(i);if(codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){if((units-=3)>-1)bytes.push(239,191,189);continue}else if(i+1===length){if((units-=3)>-1)bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else if(leadSurrogate){if((units-=3)>-1)bytes.push(239,191,189)}leadSurrogate=null;if(codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,codePoint&63|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,codePoint&63|128)}else if(codePoint<1114112){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,codePoint&63|128)}else{throw new Error("Invalid code point")}}return bytes}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;i++){byteArray.push(str.charCodeAt(i)&255)}return byteArray}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;i++){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi)}return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;i++){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i]}return i}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"base64-js":3,ieee754:4,isarray:5}],3:[function(require,module,exports){var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";(function(exports){"use strict";var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var PLUS="+".charCodeAt(0);var SLASH="/".charCodeAt(0);var NUMBER="0".charCodeAt(0);var LOWER="a".charCodeAt(0);var UPPER="A".charCodeAt(0);var PLUS_URL_SAFE="-".charCodeAt(0);var SLASH_URL_SAFE="_".charCodeAt(0);function decode(elt){var code=elt.charCodeAt(0);if(code===PLUS||code===PLUS_URL_SAFE)return 62;if(code===SLASH||code===SLASH_URL_SAFE)return 63;if(code<NUMBER)return-1;if(code<NUMBER+10)return code-NUMBER+26+26;if(code<UPPER+26)return code-UPPER;if(code<LOWER+26)return code-LOWER+26}function b64ToByteArray(b64){var i,j,l,tmp,placeHolders,arr;if(b64.length%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var len=b64.length;placeHolders="="===b64.charAt(len-2)?2:"="===b64.charAt(len-1)?1:0;arr=new Arr(b64.length*3/4-placeHolders);l=placeHolders>0?b64.length-4:b64.length;var L=0;function push(v){arr[L++]=v}for(i=0,j=0;i<l;i+=4,j+=3){tmp=decode(b64.charAt(i))<<18|decode(b64.charAt(i+1))<<12|decode(b64.charAt(i+2))<<6|decode(b64.charAt(i+3));push((tmp&16711680)>>16);push((tmp&65280)>>8);push(tmp&255)}if(placeHolders===2){tmp=decode(b64.charAt(i))<<2|decode(b64.charAt(i+1))>>4;push(tmp&255)}else if(placeHolders===1){tmp=decode(b64.charAt(i))<<10|decode(b64.charAt(i+1))<<4|decode(b64.charAt(i+2))>>2;push(tmp>>8&255);push(tmp&255)}return arr}function uint8ToBase64(uint8){var i,extraBytes=uint8.length%3,output="",temp,length;function encode(num){return lookup.charAt(num)}function tripletToBase64(num){return encode(num>>18&63)+encode(num>>12&63)+encode(num>>6&63)+encode(num&63)}for(i=0,length=uint8.length-extraBytes;i<length;i+=3){temp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2];output+=tripletToBase64(temp)}switch(extraBytes){case 1:temp=uint8[uint8.length-1];output+=encode(temp>>2);output+=encode(temp<<4&63);output+="==";break;
case 2:temp=(uint8[uint8.length-2]<<8)+uint8[uint8.length-1];output+=encode(temp>>10);output+=encode(temp>>4&63);output+=encode(temp<<2&63);output+="=";break}return output}exports.toByteArray=b64ToByteArray;exports.fromByteArray=uint8ToBase64})(typeof exports==="undefined"?this.base64js={}:exports)},{}],4:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128}},{}],5:[function(require,module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return toString.call(arr)=="[object Array]"}},{}],6:[function(require,module,exports){"use strict";window.dataForge=require("../data-forge-js/index")},{"../data-forge-js/index":7}],7:[function(require,module,exports){"use strict";var assert=require("chai").assert;var E=require("linq");var dropElement=require("./src/utils").dropElement;var ArrayEnumerator=require("./src/enumerators/array");require("sugar");var DataFrame=require("./src/dataframe");var dataForge={DataFrame:DataFrame,LazyDataFrame:require("./src/lazydataframe"),BaseDataFrame:require("./src/basedataframe"),Column:require("./src/column"),LazyColumn:require("./src/lazycolumn"),BaseColum:require("./src/basecolumn"),Index:require("./src/index"),LazyIndex:require("./src/lazyindex"),BaseIndex:require("./src/baseindex"),use:function(plugin){assert.isFunction(plugin,"Expected 'plugin' parameter to 'use' to be a function.");var self=this;plugin(self)},fromJSON:function(jsonTextString){assert.isString(jsonTextString,"Expected 'jsonTextString' parameter to 'dataForge.fromJSON' to be a string containing data encoded in the JSON format.");return new DataFrame({rows:JSON.parse(jsonTextString)})},fromCSV:function(csvTextString){assert.isString(csvTextString,"Expected 'csvTextString' parameter to 'dataForge.fromCSV' to be a string containing data encoded in the CSV format.");var lines=csvTextString.split("\n");var rows=E.from(lines).where(function(line){return line.trim().length>0}).select(function(line){return E.from(line.split(",")).select(function(col){return col.trim()}).select(function(col){if(col.length===0){return undefined}else{return col}}).toArray()}).toArray();if(rows.length===0){return new dataForge.DataFrame({columnNames:[],rows:[]})}var header=E.from(rows).first();var remaining=E.from(rows).skip(1).toArray();return new dataForge.DataFrame({columnNames:header,rows:remaining})},merge:function(leftDataFrame,rightDataFrame,columnName){var LazyDataFrame=require("./src/lazydataframe");assert.isObject(leftDataFrame,"Expected 'leftDataFrame' parameter to 'merge' to be an object.");assert.isObject(rightDataFrame,"Expected 'rightDataFrame' parameter to 'merge' to be an object.");if(columnName){assert.isString(columnName,"Expected optional 'columnName' parameter to 'merge' to be a string.")}var leftColumnIndex=leftDataFrame.getColumnIndex(columnName);if(leftColumnIndex<0){throw new Error("Column with name '"+columnName+"' doesn't exist in 'leftDataFrame'.")}var rightColumnIndex=rightDataFrame.getColumnIndex(columnName);if(rightColumnIndex<0){throw new Error("Column with name '"+columnName+"' doesn't exist in 'rightColumnIndex'.")}var leftRows=leftDataFrame.toValues();var rightRows=rightDataFrame.toValues();var mergedValues=E.from(leftRows).selectMany(function(leftRow){return E.from(rightRows).where(function(rightRow){return leftRow[leftColumnIndex]===rightRow[rightColumnIndex]}).select(function(rightRow){var left=dropElement(leftRow,leftColumnIndex);var right=dropElement(rightRow,rightColumnIndex);return[leftRow[leftColumnIndex]].concat(left).concat(right)})}).toArray();return new LazyDataFrame(function(){return["key","lval","rval"]},function(){return new ArrayEnumerator(mergedValues)})},concat:function(dataFrames){assert.isArray(dataFrames,"Expected 'dataFrames' parameter to 'dataForge.concat' to be an array of data frames.");var concatenateColumns=function(){return E.from(dataFrames).selectMany(function(dataFrame){return dataFrame.getColumnNames()}).distinct().toArray()};var LazyDataFrame=require("./src/lazydataframe");return new LazyDataFrame(function(){return concatenateColumns()},function(){var concatenatedColumns=concatenateColumns();return new ArrayEnumerator(E.from(dataFrames).selectMany(function(dataFrame){return dataFrame.remapColumns(concatenatedColumns).toValues()}).toArray())},function(){var LazyIndex=require("./src/lazyindex");return new LazyIndex("__concatenated__",function(){return new ArrayEnumerator(E.from(dataFrames).selectMany(function(dataFrame){return dataFrame.getIndex().toValues()}).toArray())})})}};module.exports=dataForge},{"./src/basecolumn":48,"./src/basedataframe":49,"./src/baseindex":50,"./src/column":51,"./src/dataframe":52,"./src/enumerators/array":53,"./src/index":54,"./src/lazycolumn":56,"./src/lazydataframe":57,"./src/lazyindex":58,"./src/utils":59,chai:8,linq:45,sugar:47}],8:[function(require,module,exports){module.exports=require("./lib/chai")},{"./lib/chai":9}],9:[function(require,module,exports){var used=[],exports=module.exports={};exports.version="3.4.0";exports.AssertionError=require("assertion-error");var util=require("./chai/utils");exports.use=function(fn){if(!~used.indexOf(fn)){fn(this,util);used.push(fn)}return this};exports.util=util;var config=require("./chai/config");exports.config=config;var assertion=require("./chai/assertion");exports.use(assertion);var core=require("./chai/core/assertions");exports.use(core);var expect=require("./chai/interface/expect");exports.use(expect);var should=require("./chai/interface/should");exports.use(should);var assert=require("./chai/interface/assert");exports.use(assert)},{"./chai/assertion":10,"./chai/config":11,"./chai/core/assertions":12,"./chai/interface/assert":13,"./chai/interface/expect":14,"./chai/interface/should":15,"./chai/utils":29,"assertion-error":37}],10:[function(require,module,exports){var config=require("./config");module.exports=function(_chai,util){var AssertionError=_chai.AssertionError,flag=util.flag;_chai.Assertion=Assertion;function Assertion(obj,msg,stack){flag(this,"ssfi",stack||arguments.callee);flag(this,"object",obj);flag(this,"message",msg)}Object.defineProperty(Assertion,"includeStack",{get:function(){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead.");return config.includeStack},set:function(value){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead.");config.includeStack=value}});Object.defineProperty(Assertion,"showDiff",{get:function(){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead.");return config.showDiff},set:function(value){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead.");config.showDiff=value}});Assertion.addProperty=function(name,fn){util.addProperty(this.prototype,name,fn)};Assertion.addMethod=function(name,fn){util.addMethod(this.prototype,name,fn)};Assertion.addChainableMethod=function(name,fn,chainingBehavior){util.addChainableMethod(this.prototype,name,fn,chainingBehavior)};Assertion.overwriteProperty=function(name,fn){util.overwriteProperty(this.prototype,name,fn)};Assertion.overwriteMethod=function(name,fn){util.overwriteMethod(this.prototype,name,fn)};Assertion.overwriteChainableMethod=function(name,fn,chainingBehavior){util.overwriteChainableMethod(this.prototype,name,fn,chainingBehavior)};Assertion.prototype.assert=function(expr,msg,negateMsg,expected,_actual,showDiff){var ok=util.test(this,arguments);if(true!==showDiff)showDiff=false;if(true!==config.showDiff)showDiff=false;if(!ok){var msg=util.getMessage(this,arguments),actual=util.getActual(this,arguments);throw new AssertionError(msg,{actual:actual,expected:expected,showDiff:showDiff},config.includeStack?this.assert:flag(this,"ssfi"))}};Object.defineProperty(Assertion.prototype,"_obj",{get:function(){return flag(this,"object")},set:function(val){flag(this,"object",val)}})}},{"./config":11}],11:[function(require,module,exports){module.exports={includeStack:false,showDiff:true,truncateThreshold:40}},{}],12:[function(require,module,exports){module.exports=function(chai,_){var Assertion=chai.Assertion,toString=Object.prototype.toString,flag=_.flag;["to","be","been","is","and","has","have","with","that","which","at","of","same"].forEach(function(chain){Assertion.addProperty(chain,function(){return this})});Assertion.addProperty("not",function(){flag(this,"negate",true)});Assertion.addProperty("deep",function(){flag(this,"deep",true)});Assertion.addProperty("any",function(){flag(this,"any",true);flag(this,"all",false)});Assertion.addProperty("all",function(){flag(this,"all",true);flag(this,"any",false)});function an(type,msg){if(msg)flag(this,"message",msg);type=type.toLowerCase();var obj=flag(this,"object"),article=~["a","e","i","o","u"].indexOf(type.charAt(0))?"an ":"a ";this.assert(type===_.type(obj),"expected #{this} to be "+article+type,"expected #{this} not to be "+article+type)}Assertion.addChainableMethod("an",an);Assertion.addChainableMethod("a",an);function includeChainingBehavior(){flag(this,"contains",true)}function include(val,msg){_.expectTypes(this,["array","object","string"]);if(msg)flag(this,"message",msg);var obj=flag(this,"object");var expected=false;if(_.type(obj)==="array"&&_.type(val)==="object"){for(var i in obj){if(_.eql(obj[i],val)){expected=true;break}}}else if(_.type(val)==="object"){if(!flag(this,"negate")){for(var k in val)new Assertion(obj).property(k,val[k]);return}var subset={};for(var k in val)subset[k]=obj[k];expected=_.eql(subset,val)}else{expected=obj!=undefined&&~obj.indexOf(val)}this.assert(expected,"expected #{this} to include "+_.inspect(val),"expected #{this} to not include "+_.inspect(val))}Assertion.addChainableMethod("include",include,includeChainingBehavior);Assertion.addChainableMethod("contain",include,includeChainingBehavior);Assertion.addChainableMethod("contains",include,includeChainingBehavior);Assertion.addChainableMethod("includes",include,includeChainingBehavior);Assertion.addProperty("ok",function(){this.assert(flag(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});Assertion.addProperty("true",function(){this.assert(true===flag(this,"object"),"expected #{this} to be true","expected #{this} to be false",this.negate?false:true)});Assertion.addProperty("false",function(){this.assert(false===flag(this,"object"),"expected #{this} to be false","expected #{this} to be true",this.negate?true:false)});Assertion.addProperty("null",function(){this.assert(null===flag(this,"object"),"expected #{this} to be null","expected #{this} not to be null")});Assertion.addProperty("undefined",function(){this.assert(undefined===flag(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")});Assertion.addProperty("NaN",function(){this.assert(isNaN(flag(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});Assertion.addProperty("exist",function(){this.assert(null!=flag(this,"object"),"expected #{this} to exist","expected #{this} to not exist")});Assertion.addProperty("empty",function(){var obj=flag(this,"object"),expected=obj;if(Array.isArray(obj)||"string"===typeof object){expected=obj.length}else if(typeof obj==="object"){expected=Object.keys(obj).length}this.assert(!expected,"expected #{this} to be empty","expected #{this} not to be empty")});function checkArguments(){var obj=flag(this,"object"),type=Object.prototype.toString.call(obj);this.assert("[object Arguments]"===type,"expected #{this} to be arguments but got "+type,"expected #{this} to not be arguments")}Assertion.addProperty("arguments",checkArguments);Assertion.addProperty("Arguments",checkArguments);function assertEqual(val,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");if(flag(this,"deep")){return this.eql(val)}else{this.assert(val===obj,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",val,this._obj,true)}}Assertion.addMethod("equal",assertEqual);Assertion.addMethod("equals",assertEqual);Assertion.addMethod("eq",assertEqual);function assertEql(obj,msg){if(msg)flag(this,"message",msg);this.assert(_.eql(obj,flag(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",obj,this._obj,true)}Assertion.addMethod("eql",assertEql);Assertion.addMethod("eqls",assertEql);function assertAbove(n,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");if(flag(this,"doLength")){new Assertion(obj,msg).to.have.property("length");var len=obj.length;this.assert(len>n,"expected #{this} to have a length above #{exp} but got #{act}","expected #{this} to not have a length above #{exp}",n,len)}else{this.assert(obj>n,"expected #{this} to be above "+n,"expected #{this} to be at most "+n)}}Assertion.addMethod("above",assertAbove);Assertion.addMethod("gt",assertAbove);Assertion.addMethod("greaterThan",assertAbove);function assertLeast(n,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");if(flag(this,"doLength")){new Assertion(obj,msg).to.have.property("length");var len=obj.length;this.assert(len>=n,"expected #{this} to have a length at least #{exp} but got #{act}","expected #{this} to have a length below #{exp}",n,len)}else{this.assert(obj>=n,"expected #{this} to be at least "+n,"expected #{this} to be below "+n)}}Assertion.addMethod("least",assertLeast);Assertion.addMethod("gte",assertLeast);function assertBelow(n,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");if(flag(this,"doLength")){new Assertion(obj,msg).to.have.property("length");var len=obj.length;this.assert(len<n,"expected #{this} to have a length below #{exp} but got #{act}","expected #{this} to not have a length below #{exp}",n,len)}else{this.assert(obj<n,"expected #{this} to be below "+n,"expected #{this} to be at least "+n)}}Assertion.addMethod("below",assertBelow);Assertion.addMethod("lt",assertBelow);Assertion.addMethod("lessThan",assertBelow);function assertMost(n,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");if(flag(this,"doLength")){new Assertion(obj,msg).to.have.property("length");var len=obj.length;this.assert(len<=n,"expected #{this} to have a length at most #{exp} but got #{act}","expected #{this} to have a length above #{exp}",n,len)}else{this.assert(obj<=n,"expected #{this} to be at most "+n,"expected #{this} to be above "+n)}}Assertion.addMethod("most",assertMost);Assertion.addMethod("lte",assertMost);Assertion.addMethod("within",function(start,finish,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object"),range=start+".."+finish;if(flag(this,"doLength")){new Assertion(obj,msg).to.have.property("length");var len=obj.length;this.assert(len>=start&&len<=finish,"expected #{this} to have a length within "+range,"expected #{this} to not have a length within "+range)}else{this.assert(obj>=start&&obj<=finish,"expected #{this} to be within "+range,"expected #{this} to not be within "+range)}});function assertInstanceOf(constructor,msg){if(msg)flag(this,"message",msg);var name=_.getName(constructor);this.assert(flag(this,"object")instanceof constructor,"expected #{this} to be an instance of "+name,"expected #{this} to not be an instance of "+name)}Assertion.addMethod("instanceof",assertInstanceOf);Assertion.addMethod("instanceOf",assertInstanceOf);Assertion.addMethod("property",function(name,val,msg){if(msg)flag(this,"message",msg);var isDeep=!!flag(this,"deep"),descriptor=isDeep?"deep property ":"property ",negate=flag(this,"negate"),obj=flag(this,"object"),pathInfo=isDeep?_.getPathInfo(name,obj):null,hasProperty=isDeep?pathInfo.exists:_.hasProperty(name,obj),value=isDeep?pathInfo.value:obj[name];if(negate&&arguments.length>1){if(undefined===value){msg=msg!=null?msg+": ":"";throw new Error(msg+_.inspect(obj)+" has no "+descriptor+_.inspect(name))}}else{this.assert(hasProperty,"expected #{this} to have a "+descriptor+_.inspect(name),"expected #{this} to not have "+descriptor+_.inspect(name))}if(arguments.length>1){this.assert(val===value,"expected #{this} to have a "+descriptor+_.inspect(name)+" of #{exp}, but got #{act}","expected #{this} to not have a "+descriptor+_.inspect(name)+" of #{act}",val,value)}flag(this,"object",value)});function assertOwnProperty(name,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");this.assert(obj.hasOwnProperty(name),"expected #{this} to have own property "+_.inspect(name),"expected #{this} to not have own property "+_.inspect(name))}Assertion.addMethod("ownProperty",assertOwnProperty);Assertion.addMethod("haveOwnProperty",assertOwnProperty);function assertOwnPropertyDescriptor(name,descriptor,msg){if(typeof descriptor==="string"){msg=descriptor;descriptor=null}if(msg)flag(this,"message",msg);var obj=flag(this,"object");var actualDescriptor=Object.getOwnPropertyDescriptor(Object(obj),name);if(actualDescriptor&&descriptor){this.assert(_.eql(descriptor,actualDescriptor),"expected the own property descriptor for "+_.inspect(name)+" on #{this} to match "+_.inspect(descriptor)+", got "+_.inspect(actualDescriptor),"expected the own property descriptor for "+_.inspect(name)+" on #{this} to not match "+_.inspect(descriptor),descriptor,actualDescriptor,true)}else{this.assert(actualDescriptor,"expected #{this} to have an own property descriptor for "+_.inspect(name),"expected #{this} to not have an own property descriptor for "+_.inspect(name))}flag(this,"object",actualDescriptor)}Assertion.addMethod("ownPropertyDescriptor",assertOwnPropertyDescriptor);Assertion.addMethod("haveOwnPropertyDescriptor",assertOwnPropertyDescriptor);function assertLengthChain(){flag(this,"doLength",true)}function assertLength(n,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");new Assertion(obj,msg).to.have.property("length");var len=obj.length;this.assert(len==n,"expected #{this} to have a length of #{exp} but got #{act}","expected #{this} to not have a length of #{act}",n,len)}Assertion.addChainableMethod("length",assertLength,assertLengthChain);Assertion.addMethod("lengthOf",assertLength);function assertMatch(re,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");this.assert(re.exec(obj),"expected #{this} to match "+re,"expected #{this} not to match "+re)}Assertion.addMethod("match",assertMatch);Assertion.addMethod("matches",assertMatch);Assertion.addMethod("string",function(str,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");new Assertion(obj,msg).is.a("string");this.assert(~obj.indexOf(str),"expected #{this} to contain "+_.inspect(str),"expected #{this} to not contain "+_.inspect(str))});function assertKeys(keys){var obj=flag(this,"object"),str,ok=true,mixedArgsMsg="keys must be given single argument of Array|Object|String, or multiple String arguments";switch(_.type(keys)){case"array":if(arguments.length>1)throw new Error(mixedArgsMsg);break;case"object":if(arguments.length>1)throw new Error(mixedArgsMsg);keys=Object.keys(keys);break;default:keys=Array.prototype.slice.call(arguments)}if(!keys.length)throw new Error("keys required");var actual=Object.keys(obj),expected=keys,len=keys.length,any=flag(this,"any"),all=flag(this,"all");if(!any&&!all){all=true}if(any){var intersection=expected.filter(function(key){return~actual.indexOf(key)});ok=intersection.length>0}if(all){ok=keys.every(function(key){return~actual.indexOf(key)});if(!flag(this,"negate")&&!flag(this,"contains")){ok=ok&&keys.length==actual.length}}if(len>1){keys=keys.map(function(key){return _.inspect(key)});var last=keys.pop();if(all){str=keys.join(", ")+", and "+last}if(any){str=keys.join(", ")+", or "+last}}else{str=_.inspect(keys[0])}str=(len>1?"keys ":"key ")+str;str=(flag(this,"contains")?"contain ":"have ")+str;this.assert(ok,"expected #{this} to "+str,"expected #{this} to not "+str,expected.slice(0).sort(),actual.sort(),true)}Assertion.addMethod("keys",assertKeys);Assertion.addMethod("key",assertKeys);function assertThrows(constructor,errMsg,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");new Assertion(obj,msg).is.a("function");var thrown=false,desiredError=null,name=null,thrownError=null;if(arguments.length===0){errMsg=null;constructor=null}else if(constructor&&(constructor instanceof RegExp||"string"===typeof constructor)){errMsg=constructor;constructor=null}else if(constructor&&constructor instanceof Error){desiredError=constructor;constructor=null;errMsg=null}else if(typeof constructor==="function"){name=constructor.prototype.name;if(!name||name==="Error"&&constructor!==Error){name=constructor.name||(new constructor).name}}else{constructor=null}try{obj()}catch(err){if(desiredError){this.assert(err===desiredError,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}",desiredError instanceof Error?desiredError.toString():desiredError,err instanceof Error?err.toString():err);flag(this,"object",err);return this}if(constructor){this.assert(err instanceof constructor,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp} but #{act} was thrown",name,err instanceof Error?err.toString():err);if(!errMsg){flag(this,"object",err);return this}}var message="error"===_.type(err)&&"message"in err?err.message:""+err;if(message!=null&&errMsg&&errMsg instanceof RegExp){this.assert(errMsg.exec(message),"expected #{this} to throw error matching #{exp} but got #{act}","expected #{this} to throw error not matching #{exp}",errMsg,message);flag(this,"object",err);return this}else if(message!=null&&errMsg&&"string"===typeof errMsg){this.assert(~message.indexOf(errMsg),"expected #{this} to throw error including #{exp} but got #{act}","expected #{this} to throw error not including #{act}",errMsg,message);flag(this,"object",err);return this}else{thrown=true;thrownError=err}}var actuallyGot="",expectedThrown=name!==null?name:desiredError?"#{exp}":"an error";if(thrown){actuallyGot=" but #{act} was thrown"}this.assert(thrown===true,"expected #{this} to throw "+expectedThrown+actuallyGot,"expected #{this} to not throw "+expectedThrown+actuallyGot,desiredError instanceof Error?desiredError.toString():desiredError,thrownError instanceof Error?thrownError.toString():thrownError);flag(this,"object",thrownError)}Assertion.addMethod("throw",assertThrows);Assertion.addMethod("throws",assertThrows);Assertion.addMethod("Throw",assertThrows);function respondTo(method,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object"),itself=flag(this,"itself"),context="function"===_.type(obj)&&!itself?obj.prototype[method]:obj[method];this.assert("function"===typeof context,"expected #{this} to respond to "+_.inspect(method),"expected #{this} to not respond to "+_.inspect(method))}Assertion.addMethod("respondTo",respondTo);Assertion.addMethod("respondsTo",respondTo);Assertion.addProperty("itself",function(){flag(this,"itself",true)});function satisfy(matcher,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");var result=matcher(obj);this.assert(result,"expected #{this} to satisfy "+_.objDisplay(matcher),"expected #{this} to not satisfy"+_.objDisplay(matcher),this.negate?false:true,result)}Assertion.addMethod("satisfy",satisfy);Assertion.addMethod("satisfies",satisfy);function closeTo(expected,delta,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");new Assertion(obj,msg).is.a("number");if(_.type(expected)!=="number"||_.type(delta)!=="number"){throw new Error("the arguments to closeTo or approximately must be numbers")}this.assert(Math.abs(obj-expected)<=delta,"expected #{this} to be close to "+expected+" +/- "+delta,"expected #{this} not to be close to "+expected+" +/- "+delta)}Assertion.addMethod("closeTo",closeTo);Assertion.addMethod("approximately",closeTo);function isSubsetOf(subset,superset,cmp){return subset.every(function(elem){if(!cmp)return superset.indexOf(elem)!==-1;return superset.some(function(elem2){return cmp(elem,elem2)})})}Assertion.addMethod("members",function(subset,msg){if(msg)flag(this,"message",msg);var obj=flag(this,"object");new Assertion(obj).to.be.an("array");new Assertion(subset).to.be.an("array");var cmp=flag(this,"deep")?_.eql:undefined;if(flag(this,"contains")){return this.assert(isSubsetOf(subset,obj,cmp),"expected #{this} to be a superset of #{act}","expected #{this} to not be a superset of #{act}",obj,subset)}this.assert(isSubsetOf(obj,subset,cmp)&&isSubsetOf(subset,obj,cmp),"expected #{this} to have the same members as #{act}","expected #{this} to not have the same members as #{act}",obj,subset)});function oneOf(list,msg){if(msg)flag(this,"message",msg);var expected=flag(this,"object");new Assertion(list).to.be.an("array");this.assert(list.indexOf(expected)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",list,expected)}Assertion.addMethod("oneOf",oneOf);function assertChanges(object,prop,msg){if(msg)flag(this,"message",msg);var fn=flag(this,"object");new Assertion(object,msg).to.have.property(prop);new Assertion(fn).is.a("function");var initial=object[prop];fn();this.assert(initial!==object[prop],"expected ."+prop+" to change","expected ."+prop+" to not change")}Assertion.addChainableMethod("change",assertChanges);Assertion.addChainableMethod("changes",assertChanges);function assertIncreases(object,prop,msg){if(msg)flag(this,"message",msg);var fn=flag(this,"object");new Assertion(object,msg).to.have.property(prop);new Assertion(fn).is.a("function");var initial=object[prop];fn();this.assert(object[prop]-initial>0,"expected ."+prop+" to increase","expected ."+prop+" to not increase")}Assertion.addChainableMethod("increase",assertIncreases);Assertion.addChainableMethod("increases",assertIncreases);function assertDecreases(object,prop,msg){if(msg)flag(this,"message",msg);var fn=flag(this,"object");new Assertion(object,msg).to.have.property(prop);new Assertion(fn).is.a("function");var initial=object[prop];fn();this.assert(object[prop]-initial<0,"expected ."+prop+" to decrease","expected ."+prop+" to not decrease")}Assertion.addChainableMethod("decrease",assertDecreases);Assertion.addChainableMethod("decreases",assertDecreases);Assertion.addProperty("extensible",function(){var obj=flag(this,"object");var isExtensible;try{isExtensible=Object.isExtensible(obj)}catch(err){if(err instanceof TypeError)isExtensible=false;else throw err}this.assert(isExtensible,"expected #{this} to be extensible","expected #{this} to not be extensible")});Assertion.addProperty("sealed",function(){var obj=flag(this,"object");var isSealed;try{isSealed=Object.isSealed(obj)}catch(err){if(err instanceof TypeError)isSealed=true;else throw err}this.assert(isSealed,"expected #{this} to be sealed","expected #{this} to not be sealed")});Assertion.addProperty("frozen",function(){var obj=flag(this,"object");var isFrozen;try{isFrozen=Object.isFrozen(obj)}catch(err){if(err instanceof TypeError)isFrozen=true;else throw err}this.assert(isFrozen,"expected #{this} to be frozen","expected #{this} to not be frozen")})}},{}],13:[function(require,module,exports){module.exports=function(chai,util){var Assertion=chai.Assertion,flag=util.flag;var assert=chai.assert=function(express,errmsg){var test=new Assertion(null,null,chai.assert);test.assert(express,errmsg,"[ negation message unavailable ]")};assert.fail=function(actual,expected,message,operator){message=message||"assert.fail()";throw new chai.AssertionError(message,{actual:actual,expected:expected,operator:operator},assert.fail)};assert.isOk=function(val,msg){new Assertion(val,msg).is.ok};assert.isNotOk=function(val,msg){new Assertion(val,msg).is.not.ok};assert.equal=function(act,exp,msg){var test=new Assertion(act,msg,assert.equal);test.assert(exp==flag(test,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",exp,act)};assert.notEqual=function(act,exp,msg){var test=new Assertion(act,msg,assert.notEqual);test.assert(exp!=flag(test,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",exp,act)};assert.strictEqual=function(act,exp,msg){new Assertion(act,msg).to.equal(exp)};assert.notStrictEqual=function(act,exp,msg){new Assertion(act,msg).to.not.equal(exp)};assert.deepEqual=function(act,exp,msg){new Assertion(act,msg).to.eql(exp)};assert.notDeepEqual=function(act,exp,msg){new Assertion(act,msg).to.not.eql(exp)};assert.isAbove=function(val,abv,msg){new Assertion(val,msg).to.be.above(abv)};assert.isAtLeast=function(val,atlst,msg){new Assertion(val,msg).to.be.least(atlst)};assert.isBelow=function(val,blw,msg){new Assertion(val,msg).to.be.below(blw)};assert.isAtMost=function(val,atmst,msg){new Assertion(val,msg).to.be.most(atmst)};assert.isTrue=function(val,msg){new Assertion(val,msg).is["true"]};assert.isNotTrue=function(val,msg){new Assertion(val,msg).to.not.equal(true)};assert.isFalse=function(val,msg){new Assertion(val,msg).is["false"]};assert.isNotFalse=function(val,msg){new Assertion(val,msg).to.not.equal(false)};assert.isNull=function(val,msg){new Assertion(val,msg).to.equal(null)};assert.isNotNull=function(val,msg){new Assertion(val,msg).to.not.equal(null)};assert.isNaN=function(val,msg){new Assertion(val,msg).to.be.NaN};assert.isNotNaN=function(val,msg){new Assertion(val,msg).not.to.be.NaN};assert.isUndefined=function(val,msg){new Assertion(val,msg).to.equal(undefined)};assert.isDefined=function(val,msg){new Assertion(val,msg).to.not.equal(undefined)};assert.isFunction=function(val,msg){new Assertion(val,msg).to.be.a("function")};assert.isNotFunction=function(val,msg){new Assertion(val,msg).to.not.be.a("function")};assert.isObject=function(val,msg){new Assertion(val,msg).to.be.a("object")};assert.isNotObject=function(val,msg){new Assertion(val,msg).to.not.be.a("object")};assert.isArray=function(val,msg){new Assertion(val,msg).to.be.an("array")};assert.isNotArray=function(val,msg){new Assertion(val,msg).to.not.be.an("array")};assert.isString=function(val,msg){new Assertion(val,msg).to.be.a("string")};assert.isNotString=function(val,msg){new Assertion(val,msg).to.not.be.a("string")};assert.isNumber=function(val,msg){new Assertion(val,msg).to.be.a("number")};assert.isNotNumber=function(val,msg){new Assertion(val,msg).to.not.be.a("number")};assert.isBoolean=function(val,msg){new Assertion(val,msg).to.be.a("boolean")};assert.isNotBoolean=function(val,msg){new Assertion(val,msg).to.not.be.a("boolean")};assert.typeOf=function(val,type,msg){new Assertion(val,msg).to.be.a(type)};assert.notTypeOf=function(val,type,msg){new Assertion(val,msg).to.not.be.a(type)};assert.instanceOf=function(val,type,msg){new Assertion(val,msg).to.be.instanceOf(type)};assert.notInstanceOf=function(val,type,msg){new Assertion(val,msg).to.not.be.instanceOf(type)};assert.include=function(exp,inc,msg){new Assertion(exp,msg,assert.include).include(inc);
};assert.notInclude=function(exp,inc,msg){new Assertion(exp,msg,assert.notInclude).not.include(inc)};assert.match=function(exp,re,msg){new Assertion(exp,msg).to.match(re)};assert.notMatch=function(exp,re,msg){new Assertion(exp,msg).to.not.match(re)};assert.property=function(obj,prop,msg){new Assertion(obj,msg).to.have.property(prop)};assert.notProperty=function(obj,prop,msg){new Assertion(obj,msg).to.not.have.property(prop)};assert.deepProperty=function(obj,prop,msg){new Assertion(obj,msg).to.have.deep.property(prop)};assert.notDeepProperty=function(obj,prop,msg){new Assertion(obj,msg).to.not.have.deep.property(prop)};assert.propertyVal=function(obj,prop,val,msg){new Assertion(obj,msg).to.have.property(prop,val)};assert.propertyNotVal=function(obj,prop,val,msg){new Assertion(obj,msg).to.not.have.property(prop,val)};assert.deepPropertyVal=function(obj,prop,val,msg){new Assertion(obj,msg).to.have.deep.property(prop,val)};assert.deepPropertyNotVal=function(obj,prop,val,msg){new Assertion(obj,msg).to.not.have.deep.property(prop,val)};assert.lengthOf=function(exp,len,msg){new Assertion(exp,msg).to.have.length(len)};assert.throws=function(fn,errt,errs,msg){if("string"===typeof errt||errt instanceof RegExp){errs=errt;errt=null}var assertErr=new Assertion(fn,msg).to.throw(errt,errs);return flag(assertErr,"object")};assert.doesNotThrow=function(fn,type,msg){if("string"===typeof type){msg=type;type=null}new Assertion(fn,msg).to.not.Throw(type)};assert.operator=function(val,operator,val2,msg){var ok;switch(operator){case"==":ok=val==val2;break;case"===":ok=val===val2;break;case">":ok=val>val2;break;case">=":ok=val>=val2;break;case"<":ok=val<val2;break;case"<=":ok=val<=val2;break;case"!=":ok=val!=val2;break;case"!==":ok=val!==val2;break;default:throw new Error('Invalid operator "'+operator+'"')}var test=new Assertion(ok,msg);test.assert(true===flag(test,"object"),"expected "+util.inspect(val)+" to be "+operator+" "+util.inspect(val2),"expected "+util.inspect(val)+" to not be "+operator+" "+util.inspect(val2))};assert.closeTo=function(act,exp,delta,msg){new Assertion(act,msg).to.be.closeTo(exp,delta)};assert.approximately=function(act,exp,delta,msg){new Assertion(act,msg).to.be.approximately(exp,delta)};assert.sameMembers=function(set1,set2,msg){new Assertion(set1,msg).to.have.same.members(set2)};assert.sameDeepMembers=function(set1,set2,msg){new Assertion(set1,msg).to.have.same.deep.members(set2)};assert.includeMembers=function(superset,subset,msg){new Assertion(superset,msg).to.include.members(subset)};assert.oneOf=function(inList,list,msg){new Assertion(inList,msg).to.be.oneOf(list)};assert.changes=function(fn,obj,prop){new Assertion(fn).to.change(obj,prop)};assert.doesNotChange=function(fn,obj,prop){new Assertion(fn).to.not.change(obj,prop)};assert.increases=function(fn,obj,prop){new Assertion(fn).to.increase(obj,prop)};assert.doesNotIncrease=function(fn,obj,prop){new Assertion(fn).to.not.increase(obj,prop)};assert.decreases=function(fn,obj,prop){new Assertion(fn).to.decrease(obj,prop)};assert.doesNotDecrease=function(fn,obj,prop){new Assertion(fn).to.not.decrease(obj,prop)};assert.ifError=function(val){if(val){throw val}};assert.isExtensible=function(obj,msg){new Assertion(obj,msg).to.be.extensible};assert.isNotExtensible=function(obj,msg){new Assertion(obj,msg).to.not.be.extensible};assert.isSealed=function(obj,msg){new Assertion(obj,msg).to.be.sealed};assert.isNotSealed=function(obj,msg){new Assertion(obj,msg).to.not.be.sealed};assert.isFrozen=function(obj,msg){new Assertion(obj,msg).to.be.frozen};assert.isNotFrozen=function(obj,msg){new Assertion(obj,msg).to.not.be.frozen};(function alias(name,as){assert[as]=assert[name];return alias})("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")}},{}],14:[function(require,module,exports){module.exports=function(chai,util){chai.expect=function(val,message){return new chai.Assertion(val,message)};chai.expect.fail=function(actual,expected,message,operator){message=message||"expect.fail()";throw new chai.AssertionError(message,{actual:actual,expected:expected,operator:operator},chai.expect.fail)}}},{}],15:[function(require,module,exports){module.exports=function(chai,util){var Assertion=chai.Assertion;function loadShould(){function shouldGetter(){if(this instanceof String||this instanceof Number||this instanceof Boolean){return new Assertion(this.valueOf(),null,shouldGetter)}return new Assertion(this,null,shouldGetter)}function shouldSetter(value){Object.defineProperty(this,"should",{value:value,enumerable:true,configurable:true,writable:true})}Object.defineProperty(Object.prototype,"should",{set:shouldSetter,get:shouldGetter,configurable:true});var should={};should.fail=function(actual,expected,message,operator){message=message||"should.fail()";throw new chai.AssertionError(message,{actual:actual,expected:expected,operator:operator},should.fail)};should.equal=function(val1,val2,msg){new Assertion(val1,msg).to.equal(val2)};should.Throw=function(fn,errt,errs,msg){new Assertion(fn,msg).to.Throw(errt,errs)};should.exist=function(val,msg){new Assertion(val,msg).to.exist};should.not={};should.not.equal=function(val1,val2,msg){new Assertion(val1,msg).to.not.equal(val2)};should.not.Throw=function(fn,errt,errs,msg){new Assertion(fn,msg).to.not.Throw(errt,errs)};should.not.exist=function(val,msg){new Assertion(val,msg).to.not.exist};should["throw"]=should["Throw"];should.not["throw"]=should.not["Throw"];return should}chai.should=loadShould;chai.Should=loadShould}},{}],16:[function(require,module,exports){var transferFlags=require("./transferFlags");var flag=require("./flag");var config=require("../config");var hasProtoSupport="__proto__"in Object;var excludeNames=/^(?:length|name|arguments|caller)$/;var call=Function.prototype.call,apply=Function.prototype.apply;module.exports=function(ctx,name,method,chainingBehavior){if(typeof chainingBehavior!=="function"){chainingBehavior=function(){}}var chainableBehavior={method:method,chainingBehavior:chainingBehavior};if(!ctx.__methods){ctx.__methods={}}ctx.__methods[name]=chainableBehavior;Object.defineProperty(ctx,name,{get:function(){chainableBehavior.chainingBehavior.call(this);var assert=function assert(){var old_ssfi=flag(this,"ssfi");if(old_ssfi&&config.includeStack===false)flag(this,"ssfi",assert);var result=chainableBehavior.method.apply(this,arguments);return result===undefined?this:result};if(hasProtoSupport){var prototype=assert.__proto__=Object.create(this);prototype.call=call;prototype.apply=apply}else{var asserterNames=Object.getOwnPropertyNames(ctx);asserterNames.forEach(function(asserterName){if(!excludeNames.test(asserterName)){var pd=Object.getOwnPropertyDescriptor(ctx,asserterName);Object.defineProperty(assert,asserterName,pd)}})}transferFlags(this,assert);return assert},configurable:true})}},{"../config":11,"./flag":20,"./transferFlags":36}],17:[function(require,module,exports){var config=require("../config");var flag=require("./flag");module.exports=function(ctx,name,method){ctx[name]=function(){var old_ssfi=flag(this,"ssfi");if(old_ssfi&&config.includeStack===false)flag(this,"ssfi",ctx[name]);var result=method.apply(this,arguments);return result===undefined?this:result}}},{"../config":11,"./flag":20}],18:[function(require,module,exports){var config=require("../config");var flag=require("./flag");module.exports=function(ctx,name,getter){Object.defineProperty(ctx,name,{get:function addProperty(){var old_ssfi=flag(this,"ssfi");if(old_ssfi&&config.includeStack===false)flag(this,"ssfi",addProperty);var result=getter.call(this);return result===undefined?this:result},configurable:true})}},{"../config":11,"./flag":20}],19:[function(require,module,exports){var AssertionError=require("assertion-error");var flag=require("./flag");var type=require("type-detect");module.exports=function(obj,types){var obj=flag(obj,"object");types=types.map(function(t){return t.toLowerCase()});types.sort();var str=types.map(function(t,index){var art=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an":"a";var or=types.length>1&&index===types.length-1?"or ":"";return or+art+" "+t}).join(", ");if(!types.some(function(expected){return type(obj)===expected})){throw new AssertionError("object tested must be "+str+", but "+type(obj)+" given")}}},{"./flag":20,"assertion-error":37,"type-detect":42}],20:[function(require,module,exports){module.exports=function(obj,key,value){var flags=obj.__flags||(obj.__flags=Object.create(null));if(arguments.length===3){flags[key]=value}else{return flags[key]}}},{}],21:[function(require,module,exports){module.exports=function(obj,args){return args.length>4?args[4]:obj._obj}},{}],22:[function(require,module,exports){module.exports=function getEnumerableProperties(object){var result=[];for(var name in object){result.push(name)}return result}},{}],23:[function(require,module,exports){var flag=require("./flag"),getActual=require("./getActual"),inspect=require("./inspect"),objDisplay=require("./objDisplay");module.exports=function(obj,args){var negate=flag(obj,"negate"),val=flag(obj,"object"),expected=args[3],actual=getActual(obj,args),msg=negate?args[2]:args[1],flagMsg=flag(obj,"message");if(typeof msg==="function")msg=msg();msg=msg||"";msg=msg.replace(/#{this}/g,objDisplay(val)).replace(/#{act}/g,objDisplay(actual)).replace(/#{exp}/g,objDisplay(expected));return flagMsg?flagMsg+": "+msg:msg}},{"./flag":20,"./getActual":21,"./inspect":30,"./objDisplay":31}],24:[function(require,module,exports){module.exports=function(func){if(func.name)return func.name;var match=/^\s?function ([^(]*)\(/.exec(func);return match&&match[1]?match[1]:""}},{}],25:[function(require,module,exports){var hasProperty=require("./hasProperty");module.exports=function getPathInfo(path,obj){var parsed=parsePath(path),last=parsed[parsed.length-1];var info={parent:parsed.length>1?_getPathValue(parsed,obj,parsed.length-1):obj,name:last.p||last.i,value:_getPathValue(parsed,obj)};info.exists=hasProperty(info.name,info.parent);return info};function parsePath(path){var str=path.replace(/([^\\])\[/g,"$1.["),parts=str.match(/(\\\.|[^.]+?)+/g);return parts.map(function(value){var re=/^\[(\d+)\]$/,mArr=re.exec(value);if(mArr)return{i:parseFloat(mArr[1])};else return{p:value.replace(/\\([.\[\]])/g,"$1")}})}function _getPathValue(parsed,obj,index){var tmp=obj,res;index=index===undefined?parsed.length:index;for(var i=0,l=index;i<l;i++){var part=parsed[i];if(tmp){if("undefined"!==typeof part.p)tmp=tmp[part.p];else if("undefined"!==typeof part.i)tmp=tmp[part.i];if(i==l-1)res=tmp}else{res=undefined}}return res}},{"./hasProperty":28}],26:[function(require,module,exports){var getPathInfo=require("./getPathInfo");module.exports=function(path,obj){var info=getPathInfo(path,obj);return info.value}},{"./getPathInfo":25}],27:[function(require,module,exports){module.exports=function getProperties(object){var result=Object.getOwnPropertyNames(object);function addProperty(property){if(result.indexOf(property)===-1){result.push(property)}}var proto=Object.getPrototypeOf(object);while(proto!==null){Object.getOwnPropertyNames(proto).forEach(addProperty);proto=Object.getPrototypeOf(proto)}return result}},{}],28:[function(require,module,exports){var type=require("type-detect");var literals={number:Number,string:String};module.exports=function hasProperty(name,obj){var ot=type(obj);if(ot==="null"||ot==="undefined")return false;if(literals[ot]&&typeof obj!=="object")obj=new literals[ot](obj);return name in obj}},{"type-detect":42}],29:[function(require,module,exports){var exports=module.exports={};exports.test=require("./test");exports.type=require("type-detect");exports.expectTypes=require("./expectTypes");exports.getMessage=require("./getMessage");exports.getActual=require("./getActual");exports.inspect=require("./inspect");exports.objDisplay=require("./objDisplay");exports.flag=require("./flag");exports.transferFlags=require("./transferFlags");exports.eql=require("deep-eql");exports.getPathValue=require("./getPathValue");exports.getPathInfo=require("./getPathInfo");exports.hasProperty=require("./hasProperty");exports.getName=require("./getName");exports.addProperty=require("./addProperty");exports.addMethod=require("./addMethod");exports.overwriteProperty=require("./overwriteProperty");exports.overwriteMethod=require("./overwriteMethod");exports.addChainableMethod=require("./addChainableMethod");exports.overwriteChainableMethod=require("./overwriteChainableMethod")},{"./addChainableMethod":16,"./addMethod":17,"./addProperty":18,"./expectTypes":19,"./flag":20,"./getActual":21,"./getMessage":23,"./getName":24,"./getPathInfo":25,"./getPathValue":26,"./hasProperty":28,"./inspect":30,"./objDisplay":31,"./overwriteChainableMethod":32,"./overwriteMethod":33,"./overwriteProperty":34,"./test":35,"./transferFlags":36,"deep-eql":38,"type-detect":42}],30:[function(require,module,exports){var getName=require("./getName");var getProperties=require("./getProperties");var getEnumerableProperties=require("./getEnumerableProperties");module.exports=inspect;function inspect(obj,showHidden,depth,colors){var ctx={showHidden:showHidden,seen:[],stylize:function(str){return str}};return formatValue(ctx,obj,typeof depth==="undefined"?2:depth)}var isDOMElement=function(object){if(typeof HTMLElement==="object"){return object instanceof HTMLElement}else{return object&&typeof object==="object"&&object.nodeType===1&&typeof object.nodeName==="string"}};function formatValue(ctx,value,recurseTimes){if(value&&typeof value.inspect==="function"&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes);if(typeof ret!=="string"){ret=formatValue(ctx,ret,recurseTimes)}return ret}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive}if(isDOMElement(value)){if("outerHTML"in value){return value.outerHTML}else{try{if(document.xmlVersion){var xmlSerializer=new XMLSerializer;return xmlSerializer.serializeToString(value)}else{var ns="http://www.w3.org/1999/xhtml";var container=document.createElementNS(ns,"_");container.appendChild(value.cloneNode(false));html=container.innerHTML.replace("><",">"+value.innerHTML+"<");container.innerHTML="";return html}}catch(err){}}}var visibleKeys=getEnumerableProperties(value);var keys=ctx.showHidden?getProperties(value):visibleKeys;if(keys.length===0||isError(value)&&(keys.length===1&&keys[0]==="stack"||keys.length===2&&keys[0]==="description"&&keys[1]==="stack")){if(typeof value==="function"){var name=getName(value);var nameSuffix=name?": "+name:"";return ctx.stylize("[Function"+nameSuffix+"]","special")}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}if(isDate(value)){return ctx.stylize(Date.prototype.toUTCString.call(value),"date")}if(isError(value)){return formatError(value)}}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if(typeof value==="function"){var name=getName(value);var nameSuffix=name?": "+name:"";base=" [Function"+nameSuffix+"]"}if(isRegExp(value)){base=" "+RegExp.prototype.toString.call(value)}if(isDate(value)){base=" "+Date.prototype.toUTCString.call(value)}if(isError(value)){return formatError(value)}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}else{return ctx.stylize("[Object]","special")}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})}ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){switch(typeof value){case"undefined":return ctx.stylize("undefined","undefined");case"string":var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string");case"number":if(value===0&&1/value===-Infinity){return ctx.stylize("-0","number")}return ctx.stylize(""+value,"number");case"boolean":return ctx.stylize(""+value,"boolean")}if(value===null){return ctx.stylize("null","null")}}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(Object.prototype.hasOwnProperty.call(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}else{output.push("")}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}});return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str;if(value.__lookupGetter__){if(value.__lookupGetter__(key)){if(value.__lookupSetter__(key)){str=ctx.stylize("[Getter/Setter]","special")}else{str=ctx.stylize("[Getter]","special")}}else{if(value.__lookupSetter__(key)){str=ctx.stylize("[Setter]","special")}}}if(visibleKeys.indexOf(key)<0){name="["+key+"]"}if(!str){if(ctx.seen.indexOf(value[key])<0){if(recurseTimes===null){str=formatValue(ctx,value[key],null)}else{str=formatValue(ctx,value[key],recurseTimes-1)}if(str.indexOf("\n")>-1){if(array){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=ctx.stylize("[Circular]","special")}}if(typeof name==="undefined"){if(array&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.length+1},0);if(length>60){return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}return braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)||typeof ar==="object"&&objectToString(ar)==="[object Array]"}function isRegExp(re){return typeof re==="object"&&objectToString(re)==="[object RegExp]"}function isDate(d){return typeof d==="object"&&objectToString(d)==="[object Date]"}function isError(e){return typeof e==="object"&&objectToString(e)==="[object Error]"}function objectToString(o){return Object.prototype.toString.call(o)}},{"./getEnumerableProperties":22,"./getName":24,"./getProperties":27}],31:[function(require,module,exports){var inspect=require("./inspect");var config=require("../config");module.exports=function(obj){var str=inspect(obj),type=Object.prototype.toString.call(obj);if(config.truncateThreshold&&str.length>=config.truncateThreshold){if(type==="[object Function]"){return!obj.name||obj.name===""?"[Function]":"[Function: "+obj.name+"]"}else if(type==="[object Array]"){return"[ Array("+obj.length+") ]"}else if(type==="[object Object]"){var keys=Object.keys(obj),kstr=keys.length>2?keys.splice(0,2).join(", ")+", ...":keys.join(", ");return"{ Object ("+kstr+") }"}else{return str}}else{return str}}},{"../config":11,"./inspect":30}],32:[function(require,module,exports){module.exports=function(ctx,name,method,chainingBehavior){var chainableBehavior=ctx.__methods[name];var _chainingBehavior=chainableBehavior.chainingBehavior;chainableBehavior.chainingBehavior=function(){var result=chainingBehavior(_chainingBehavior).call(this);return result===undefined?this:result};var _method=chainableBehavior.method;chainableBehavior.method=function(){var result=method(_method).apply(this,arguments);return result===undefined?this:result}}},{}],33:[function(require,module,exports){module.exports=function(ctx,name,method){var _method=ctx[name],_super=function(){return this};if(_method&&"function"===typeof _method)_super=_method;ctx[name]=function(){var result=method(_super).apply(this,arguments);return result===undefined?this:result}}},{}],34:[function(require,module,exports){module.exports=function(ctx,name,getter){var _get=Object.getOwnPropertyDescriptor(ctx,name),_super=function(){};if(_get&&"function"===typeof _get.get)_super=_get.get;Object.defineProperty(ctx,name,{get:function(){var result=getter(_super).call(this);return result===undefined?this:result},configurable:true})}},{}],35:[function(require,module,exports){var flag=require("./flag");module.exports=function(obj,args){var negate=flag(obj,"negate"),expr=args[0];return negate?!expr:expr}},{"./flag":20}],36:[function(require,module,exports){module.exports=function(assertion,object,includeAll){var flags=assertion.__flags||(assertion.__flags=Object.create(null));if(!object.__flags){object.__flags=Object.create(null)}includeAll=arguments.length===3?includeAll:true;for(var flag in flags){if(includeAll||flag!=="object"&&flag!=="ssfi"&&flag!="message"){object.__flags[flag]=flags[flag]}}}},{}],37:[function(require,module,exports){function exclude(){var excludes=[].slice.call(arguments);function excludeProps(res,obj){Object.keys(obj).forEach(function(key){if(!~excludes.indexOf(key))res[key]=obj[key]})}return function extendExclude(){var args=[].slice.call(arguments),i=0,res={};for(;i<args.length;i++){excludeProps(res,args[i])}return res}}module.exports=AssertionError;function AssertionError(message,_props,ssf){var extend=exclude("name","message","stack","constructor","toJSON"),props=extend(_props||{});this.message=message||"Unspecified AssertionError";this.showDiff=false;for(var key in props){this[key]=props[key]}ssf=ssf||arguments.callee;if(ssf&&Error.captureStackTrace){Error.captureStackTrace(this,ssf)}else{this.stack=(new Error).stack}}AssertionError.prototype=Object.create(Error.prototype);AssertionError.prototype.name="AssertionError";AssertionError.prototype.constructor=AssertionError;AssertionError.prototype.toJSON=function(stack){var extend=exclude("constructor","toJSON","stack"),props=extend({name:this.name},this);if(false!==stack&&this.stack){props.stack=this.stack}return props}},{}],38:[function(require,module,exports){module.exports=require("./lib/eql")},{"./lib/eql":39}],39:[function(require,module,exports){var type=require("type-detect");var Buffer;try{Buffer=require("buffer").Buffer}catch(ex){Buffer={};Buffer.isBuffer=function(){return false}}module.exports=deepEqual;function deepEqual(a,b,m){if(sameValue(a,b)){return true}else if("date"===type(a)){return dateEqual(a,b)}else if("regexp"===type(a)){return regexpEqual(a,b)}else if(Buffer.isBuffer(a)){return bufferEqual(a,b)}else if("arguments"===type(a)){return argumentsEqual(a,b,m)}else if(!typeEqual(a,b)){return false}else if("object"!==type(a)&&"object"!==type(b)&&("array"!==type(a)&&"array"!==type(b))){return sameValue(a,b)}else{return objectEqual(a,b,m)}}function sameValue(a,b){if(a===b)return a!==0||1/a===1/b;return a!==a&&b!==b}function typeEqual(a,b){return type(a)===type(b)}function dateEqual(a,b){if("date"!==type(b))return false;return sameValue(a.getTime(),b.getTime())}function regexpEqual(a,b){if("regexp"!==type(b))return false;return sameValue(a.toString(),b.toString())}function argumentsEqual(a,b,m){if("arguments"!==type(b))return false;a=[].slice.call(a);b=[].slice.call(b);return deepEqual(a,b,m)}function enumerable(a){var res=[];for(var key in a)res.push(key);return res}function iterableEqual(a,b){if(a.length!==b.length)return false;var i=0;var match=true;for(;i<a.length;i++){if(a[i]!==b[i]){match=false;break}}return match}function bufferEqual(a,b){if(!Buffer.isBuffer(b))return false;return iterableEqual(a,b)}function isValue(a){return a!==null&&a!==undefined}function objectEqual(a,b,m){if(!isValue(a)||!isValue(b)){return false}if(a.prototype!==b.prototype){return false}var i;if(m){for(i=0;i<m.length;i++){if(m[i][0]===a&&m[i][1]===b||m[i][0]===b&&m[i][1]===a){return true}}}else{m=[]}try{var ka=enumerable(a);var kb=enumerable(b)}catch(ex){return false}ka.sort();kb.sort();if(!iterableEqual(ka,kb)){return false}m.push([a,b]);var key;for(i=ka.length-1;i>=0;i--){key=ka[i];if(!deepEqual(a[key],b[key],m)){return false}}return true}},{buffer:2,"type-detect":40}],40:[function(require,module,exports){module.exports=require("./lib/type")},{"./lib/type":41}],41:[function(require,module,exports){var exports=module.exports=getType;var natives={"[object Array]":"array","[object RegExp]":"regexp","[object Function]":"function","[object Arguments]":"arguments","[object Date]":"date"};function getType(obj){var str=Object.prototype.toString.call(obj);if(natives[str])return natives[str];if(obj===null)return"null";if(obj===undefined)return"undefined";if(obj===Object(obj))return"object";return typeof obj}exports.Library=Library;function Library(){this.tests={}}Library.prototype.of=getType;Library.prototype.define=function(type,test){if(arguments.length===1)return this.tests[type];this.tests[type]=test;return this};Library.prototype.test=function(obj,type){if(type===getType(obj))return true;var test=this.tests[type];if(test&&"regexp"===getType(test)){return test.test(obj)}else if(test&&"function"===getType(test)){return test(obj)}else{throw new ReferenceError('Type test "'+type+'" not defined or invalid.')}}},{}],42:[function(require,module,exports){arguments[4][40][0].apply(exports,arguments)},{"./lib/type":43,dup:40}],43:[function(require,module,exports){var exports=module.exports=getType;var objectTypeRegexp=/^\[object (.*)\]$/;function getType(obj){var type=Object.prototype.toString.call(obj).match(objectTypeRegexp)[1].toLowerCase();if(typeof Promise==="function"&&obj instanceof Promise)return"promise";if(obj===null)return"null";if(obj===undefined)return"undefined";return type}exports.Library=Library;function Library(){if(!(this instanceof Library))return new Library;this.tests={}}Library.prototype.of=getType;Library.prototype.define=function(type,test){if(arguments.length===1)return this.tests[type];this.tests[type]=test;return this};Library.prototype.test=function(obj,type){if(type===getType(obj))return true;var test=this.tests[type];if(test&&"regexp"===getType(test)){return test.test(obj)}else if(test&&"function"===getType(test)){return test(obj)}else{throw new ReferenceError('Type test "'+type+'" not defined or invalid.')}}},{}],44:[function(require,module,exports){module.exports=Table;function Table(){this.rows=[];this.row={__printers:{}}}Table.prototype.newRow=function(){this.rows.push(this.row);this.row={__printers:{}};return this};Table.prototype.cell=function(col,val,printer){this.row[col]=val;this.row.__printers[col]=printer||string;return this};Table.prototype.separator="  ";function string(val){return val===undefined?"":""+val}function length(str){return str.replace(/\u001b\[\d+m/g,"").length}Table.string=string;Table.leftPadder=leftPadder;function leftPadder(ch){return function(val,width){var str=string(val);var len=length(str);var pad=width>len?Array(width-len+1).join(ch):"";return pad+str}}var padLeft=Table.padLeft=leftPadder(" ");Table.rightPadder=rightPadder;function rightPadder(ch){return function padRight(val,width){var str=string(val);var len=length(str);var pad=width>len?Array(width-len+1).join(ch):"";return str+pad}}var padRight=rightPadder(" ");Table.number=function(digits){return function(val,width){if(val==null)return"";if(typeof val!="number")throw new Error(""+val+" is not a number");var str=digits==null?val+"":val.toFixed(digits);return padLeft(str,width)}};function each(row,fn){for(var key in row){if(key=="__printers")continue;fn(key,row[key])}}Table.prototype.columns=function(){var cols={};for(var i=0;i<2;i++){this.rows.forEach(function(row){var idx=0;each(row,function(key){idx=Math.max(idx,cols[key]||0);cols[key]=idx;idx++})})}return Object.keys(cols).sort(function(a,b){return cols[a]-cols[b]})};Table.prototype.print=function(){var cols=this.columns();var separator=this.separator;var widths={};var out="";this.rows.forEach(function(row){each(row,function(key,val){var str=row.__printers[key].call(row,val);widths[key]=Math.max(length(str),widths[key]||0)})});this.rows.forEach(function(row){var line="";cols.forEach(function(key){var width=widths[key];var str=row.hasOwnProperty(key)?""+row.__printers[key].call(row,row[key],width):"";line+=padRight(str,width)+separator});line=line.slice(0,-separator.length);out+=line+"\n"});return out};Table.prototype.toString=function(){var cols=this.columns();var out=new Table;out.separator=this.separator;cols.forEach(function(col){out.cell(col,col)});out.newRow();out.pushDelimeter(cols);out.rows=out.rows.concat(this.rows);if(this.totals&&this.rows.length){out.pushDelimeter(cols);this.forEachTotal(out.cell.bind(out));out.newRow()}return out.print()};Table.prototype.pushDelimeter=function(cols){cols=cols||this.columns();cols.forEach(function(col){this.cell(col,undefined,leftPadder("-"))},this);return this.newRow()};Table.prototype.forEachTotal=function(cb){for(var key in this.totals){var aggr=this.totals[key];var acc=aggr.init;var len=this.rows.length;this.rows.forEach(function(row,idx){acc=aggr.reduce.call(row,acc,row[key],idx,len)});cb(key,acc,aggr.printer)}};Table.prototype.printTransposed=function(opts){opts=opts||{};var out=new Table;out.separator=opts.separator||this.separator;this.columns().forEach(function(col){out.cell(0,col,opts.namePrinter);this.rows.forEach(function(row,idx){out.cell(idx+1,row[col],row.__printers[col])});out.newRow()},this);return out.print()};Table.prototype.sort=function(cmp){if(typeof cmp=="function"){this.rows.sort(cmp);return this}var keys=Array.isArray(cmp)?cmp:this.columns();var comparators=keys.map(function(key){var order="asc";var m=/(.*)\|\s*(asc|des)\s*$/.exec(key);if(m){key=m[1];order=m[2]}return function(a,b){return order=="asc"?compare(a[key],b[key]):compare(b[key],a[key])}});return this.sort(function(a,b){for(var i=0;i<comparators.length;i++){var order=comparators[i](a,b);if(order!=0)return order}return 0})};function compare(a,b){if(a===b)return 0;if(a===undefined)return 1;if(b===undefined)return-1;if(a===null)return 1;if(b===null)return-1;if(a>b)return 1;if(a<b)return-1;return compare(String(a),String(b))}Table.prototype.total=function(col,opts){opts=opts||{};this.totals=this.totals||{};this.totals[col]={reduce:opts.reduce||Table.aggr.sum,printer:opts.printer||padLeft,init:opts.init==null?0:opts.init};return this};Table.aggr={};Table.aggr.printer=function(prefix,printer){printer=printer||string;return function(val,width){return padLeft(prefix+printer(val),width)}};Table.aggr.sum=function(acc,val){return acc+val};Table.aggr.avg=function(acc,val,idx,len){acc=acc+val;return idx+1==len?acc/len:acc};Table.print=function(obj,format,cb){var opts=format||{};format=typeof format=="function"?format:function(obj,cell){for(var key in obj){if(!obj.hasOwnProperty(key))continue;var params=opts[key]||{};cell(params.name||key,obj[key],params.printer)}};var t=new Table;var cell=t.cell.bind(t);if(Array.isArray(obj)){cb=cb||function(t){return t.toString()};obj.forEach(function(item){format(item,cell);t.newRow()})}else{cb=cb||function(t){return t.printTransposed({separator:" : "})};format(obj,cell);t.newRow()}return cb(t)};Table.log=function(obj,format,cb){console.log(Table.print(obj,format,cb))};Table.prototype.log=function(){console.log(this.toString())}},{}],45:[function(require,module,exports){(function(root,undefined){var Functions={Identity:function(x){return x},True:function(){return true},Blank:function(){}};var Types={Boolean:typeof true,Number:typeof 0,String:typeof"",Object:typeof{},Undefined:typeof undefined,Function:typeof function(){}};var funcCache={"":Functions.Identity};var Utils={createLambda:function(expression){if(expression==null)return Functions.Identity;if(typeof expression===Types.String){var f=funcCache[expression];
if(f!=null){return f}if(expression.indexOf("=>")===-1){var regexp=new RegExp("[$]+","g");var maxLength=0;var match;while((match=regexp.exec(expression))!=null){var paramNumber=match[0].length;if(paramNumber>maxLength){maxLength=paramNumber}}var argArray=[];for(var i=1;i<=maxLength;i++){var dollar="";for(var j=0;j<i;j++){dollar+="$"}argArray.push(dollar)}var args=Array.prototype.join.call(argArray,",");f=new Function(args,"return "+expression);funcCache[expression]=f;return f}else{var expr=expression.match(/^[(\s]*([^()]*?)[)\s]*=>(.*)/);f=new Function(expr[1],"return "+expr[2]);funcCache[expression]=f;return f}}return expression},isIEnumerable:function(obj){if(typeof Enumerator!==Types.Undefined){try{new Enumerator(obj);return true}catch(e){}}return false},defineProperty:Object.defineProperties!=null?function(target,methodName,value){Object.defineProperty(target,methodName,{enumerable:false,configurable:true,writable:true,value:value})}:function(target,methodName,value){target[methodName]=value},compare:function(a,b){return a===b?0:a>b?1:-1},dispose:function(obj){if(obj!=null)obj.dispose()}};var State={Before:0,Running:1,After:2};var IEnumerator=function(initialize,tryGetNext,dispose){var yielder=new Yielder;var state=State.Before;this.current=yielder.current;this.moveNext=function(){try{switch(state){case State.Before:state=State.Running;initialize();case State.Running:if(tryGetNext.apply(yielder)){return true}else{this.dispose();return false}case State.After:return false}}catch(e){this.dispose();throw e}};this.dispose=function(){if(state!=State.Running)return;try{dispose()}finally{state=State.After}}};var Yielder=function(){var current=null;this.current=function(){return current};this.yieldReturn=function(value){current=value;return true};this.yieldBreak=function(){return false}};var Enumerable=function(getEnumerator){this.getEnumerator=getEnumerator};Enumerable.Utils={};Enumerable.Utils.createLambda=function(expression){return Utils.createLambda(expression)};Enumerable.Utils.createEnumerable=function(getEnumerator){return new Enumerable(getEnumerator)};Enumerable.Utils.createEnumerator=function(initialize,tryGetNext,dispose){return new IEnumerator(initialize,tryGetNext,dispose)};Enumerable.Utils.extendTo=function(type){var typeProto=type.prototype;var enumerableProto;if(type===Array){enumerableProto=ArrayEnumerable.prototype;Utils.defineProperty(typeProto,"getSource",function(){return this})}else{enumerableProto=Enumerable.prototype;Utils.defineProperty(typeProto,"getEnumerator",function(){return Enumerable.from(this).getEnumerator()})}for(var methodName in enumerableProto){var func=enumerableProto[methodName];if(typeProto[methodName]==func)continue;if(typeProto[methodName]!=null){methodName=methodName+"ByLinq";if(typeProto[methodName]==func)continue}if(func instanceof Function){Utils.defineProperty(typeProto,methodName,func)}}};Enumerable.choice=function(){var args=arguments;return new Enumerable(function(){return new IEnumerator(function(){args=args[0]instanceof Array?args[0]:args[0].getEnumerator!=null?args[0].toArray():args},function(){return this.yieldReturn(args[Math.floor(Math.random()*args.length)])},Functions.Blank)})};Enumerable.cycle=function(){var args=arguments;return new Enumerable(function(){var index=0;return new IEnumerator(function(){args=args[0]instanceof Array?args[0]:args[0].getEnumerator!=null?args[0].toArray():args},function(){if(index>=args.length)index=0;return this.yieldReturn(args[index++])},Functions.Blank)})};Enumerable.empty=function(){return new Enumerable(function(){return new IEnumerator(Functions.Blank,function(){return false},Functions.Blank)})};Enumerable.from=function(obj){if(obj==null){return Enumerable.empty()}if(obj instanceof Enumerable){return obj}if(typeof obj==Types.Number||typeof obj==Types.Boolean){return Enumerable.repeat(obj,1)}if(typeof obj==Types.String){return new Enumerable(function(){var index=0;return new IEnumerator(Functions.Blank,function(){return index<obj.length?this.yieldReturn(obj.charAt(index++)):false},Functions.Blank)})}if(typeof obj!=Types.Function){if(typeof obj.length==Types.Number){return new ArrayEnumerable(obj)}if(!(obj instanceof Object)&&Utils.isIEnumerable(obj)){return new Enumerable(function(){var isFirst=true;var enumerator;return new IEnumerator(function(){enumerator=new Enumerator(obj)},function(){if(isFirst)isFirst=false;else enumerator.moveNext();return enumerator.atEnd()?false:this.yieldReturn(enumerator.item())},Functions.Blank)})}if(typeof Windows===Types.Object&&typeof obj.first===Types.Function){return new Enumerable(function(){var isFirst=true;var enumerator;return new IEnumerator(function(){enumerator=obj.first()},function(){if(isFirst)isFirst=false;else enumerator.moveNext();return enumerator.hasCurrent?this.yieldReturn(enumerator.current):this.yieldBreak()},Functions.Blank)})}}return new Enumerable(function(){var array=[];var index=0;return new IEnumerator(function(){for(var key in obj){var value=obj[key];if(!(value instanceof Function)&&Object.prototype.hasOwnProperty.call(obj,key)){array.push({key:key,value:value})}}},function(){return index<array.length?this.yieldReturn(array[index++]):false},Functions.Blank)})},Enumerable.make=function(element){return Enumerable.repeat(element,1)};Enumerable.matches=function(input,pattern,flags){if(flags==null)flags="";if(pattern instanceof RegExp){flags+=pattern.ignoreCase?"i":"";flags+=pattern.multiline?"m":"";pattern=pattern.source}if(flags.indexOf("g")===-1)flags+="g";return new Enumerable(function(){var regex;return new IEnumerator(function(){regex=new RegExp(pattern,flags)},function(){var match=regex.exec(input);return match?this.yieldReturn(match):false},Functions.Blank)})};Enumerable.range=function(start,count,step){if(step==null)step=1;return new Enumerable(function(){var value;var index=0;return new IEnumerator(function(){value=start-step},function(){return index++<count?this.yieldReturn(value+=step):this.yieldBreak()},Functions.Blank)})};Enumerable.rangeDown=function(start,count,step){if(step==null)step=1;return new Enumerable(function(){var value;var index=0;return new IEnumerator(function(){value=start+step},function(){return index++<count?this.yieldReturn(value-=step):this.yieldBreak()},Functions.Blank)})};Enumerable.rangeTo=function(start,to,step){if(step==null)step=1;if(start<to){return new Enumerable(function(){var value;return new IEnumerator(function(){value=start-step},function(){var next=value+=step;return next<=to?this.yieldReturn(next):this.yieldBreak()},Functions.Blank)})}else{return new Enumerable(function(){var value;return new IEnumerator(function(){value=start+step},function(){var next=value-=step;return next>=to?this.yieldReturn(next):this.yieldBreak()},Functions.Blank)})}};Enumerable.repeat=function(element,count){if(count!=null)return Enumerable.repeat(element).take(count);return new Enumerable(function(){return new IEnumerator(Functions.Blank,function(){return this.yieldReturn(element)},Functions.Blank)})};Enumerable.repeatWithFinalize=function(initializer,finalizer){initializer=Utils.createLambda(initializer);finalizer=Utils.createLambda(finalizer);return new Enumerable(function(){var element;return new IEnumerator(function(){element=initializer()},function(){return this.yieldReturn(element)},function(){if(element!=null){finalizer(element);element=null}})})};Enumerable.generate=function(func,count){if(count!=null)return Enumerable.generate(func).take(count);func=Utils.createLambda(func);return new Enumerable(function(){return new IEnumerator(Functions.Blank,function(){return this.yieldReturn(func())},Functions.Blank)})};Enumerable.toInfinity=function(start,step){if(start==null)start=0;if(step==null)step=1;return new Enumerable(function(){var value;return new IEnumerator(function(){value=start-step},function(){return this.yieldReturn(value+=step)},Functions.Blank)})};Enumerable.toNegativeInfinity=function(start,step){if(start==null)start=0;if(step==null)step=1;return new Enumerable(function(){var value;return new IEnumerator(function(){value=start+step},function(){return this.yieldReturn(value-=step)},Functions.Blank)})};Enumerable.unfold=function(seed,func){func=Utils.createLambda(func);return new Enumerable(function(){var isFirst=true;var value;return new IEnumerator(Functions.Blank,function(){if(isFirst){isFirst=false;value=seed;return this.yieldReturn(value)}value=func(value);return this.yieldReturn(value)},Functions.Blank)})};Enumerable.defer=function(enumerableFactory){return new Enumerable(function(){var enumerator;return new IEnumerator(function(){enumerator=Enumerable.from(enumerableFactory()).getEnumerator()},function(){return enumerator.moveNext()?this.yieldReturn(enumerator.current()):this.yieldBreak()},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.traverseBreadthFirst=function(func,resultSelector){var source=this;func=Utils.createLambda(func);resultSelector=Utils.createLambda(resultSelector);return new Enumerable(function(){var enumerator;var nestLevel=0;var buffer=[];return new IEnumerator(function(){enumerator=source.getEnumerator()},function(){while(true){if(enumerator.moveNext()){buffer.push(enumerator.current());return this.yieldReturn(resultSelector(enumerator.current(),nestLevel))}var next=Enumerable.from(buffer).selectMany(function(x){return func(x)});if(!next.any()){return false}else{nestLevel++;buffer=[];Utils.dispose(enumerator);enumerator=next.getEnumerator()}}},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.traverseDepthFirst=function(func,resultSelector){var source=this;func=Utils.createLambda(func);resultSelector=Utils.createLambda(resultSelector);return new Enumerable(function(){var enumeratorStack=[];var enumerator;return new IEnumerator(function(){enumerator=source.getEnumerator()},function(){while(true){if(enumerator.moveNext()){var value=resultSelector(enumerator.current(),enumeratorStack.length);enumeratorStack.push(enumerator);enumerator=Enumerable.from(func(enumerator.current())).getEnumerator();return this.yieldReturn(value)}if(enumeratorStack.length<=0)return false;Utils.dispose(enumerator);enumerator=enumeratorStack.pop()}},function(){try{Utils.dispose(enumerator)}finally{Enumerable.from(enumeratorStack).forEach(function(s){s.dispose()})}})})};Enumerable.prototype.flatten=function(){var source=this;return new Enumerable(function(){var enumerator;var middleEnumerator=null;return new IEnumerator(function(){enumerator=source.getEnumerator()},function(){while(true){if(middleEnumerator!=null){if(middleEnumerator.moveNext()){return this.yieldReturn(middleEnumerator.current())}else{middleEnumerator=null}}if(enumerator.moveNext()){if(enumerator.current()instanceof Array){Utils.dispose(middleEnumerator);middleEnumerator=Enumerable.from(enumerator.current()).selectMany(Functions.Identity).flatten().getEnumerator();continue}else{return this.yieldReturn(enumerator.current())}}return false}},function(){try{Utils.dispose(enumerator)}finally{Utils.dispose(middleEnumerator)}})})};Enumerable.prototype.pairwise=function(selector){var source=this;selector=Utils.createLambda(selector);return new Enumerable(function(){var enumerator;return new IEnumerator(function(){enumerator=source.getEnumerator();enumerator.moveNext()},function(){var prev=enumerator.current();return enumerator.moveNext()?this.yieldReturn(selector(prev,enumerator.current())):false},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.scan=function(seed,func){var isUseSeed;if(func==null){func=Utils.createLambda(seed);isUseSeed=false}else{func=Utils.createLambda(func);isUseSeed=true}var source=this;return new Enumerable(function(){var enumerator;var value;var isFirst=true;return new IEnumerator(function(){enumerator=source.getEnumerator()},function(){if(isFirst){isFirst=false;if(!isUseSeed){if(enumerator.moveNext()){return this.yieldReturn(value=enumerator.current())}}else{return this.yieldReturn(value=seed)}}return enumerator.moveNext()?this.yieldReturn(value=func(value,enumerator.current())):false},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.select=function(selector){selector=Utils.createLambda(selector);if(selector.length<=1){return new WhereSelectEnumerable(this,null,selector)}else{var source=this;return new Enumerable(function(){var enumerator;var index=0;return new IEnumerator(function(){enumerator=source.getEnumerator()},function(){return enumerator.moveNext()?this.yieldReturn(selector(enumerator.current(),index++)):false},function(){Utils.dispose(enumerator)})})}};Enumerable.prototype.selectMany=function(collectionSelector,resultSelector){var source=this;collectionSelector=Utils.createLambda(collectionSelector);if(resultSelector==null)resultSelector=function(a,b){return b};resultSelector=Utils.createLambda(resultSelector);return new Enumerable(function(){var enumerator;var middleEnumerator=undefined;var index=0;return new IEnumerator(function(){enumerator=source.getEnumerator()},function(){if(middleEnumerator===undefined){if(!enumerator.moveNext())return false}do{if(middleEnumerator==null){var middleSeq=collectionSelector(enumerator.current(),index++);middleEnumerator=Enumerable.from(middleSeq).getEnumerator()}if(middleEnumerator.moveNext()){return this.yieldReturn(resultSelector(enumerator.current(),middleEnumerator.current()))}Utils.dispose(middleEnumerator);middleEnumerator=null}while(enumerator.moveNext());return false},function(){try{Utils.dispose(enumerator)}finally{Utils.dispose(middleEnumerator)}})})};Enumerable.prototype.where=function(predicate){predicate=Utils.createLambda(predicate);if(predicate.length<=1){return new WhereEnumerable(this,predicate)}else{var source=this;return new Enumerable(function(){var enumerator;var index=0;return new IEnumerator(function(){enumerator=source.getEnumerator()},function(){while(enumerator.moveNext()){if(predicate(enumerator.current(),index++)){return this.yieldReturn(enumerator.current())}}return false},function(){Utils.dispose(enumerator)})})}};Enumerable.prototype.choose=function(selector){selector=Utils.createLambda(selector);var source=this;return new Enumerable(function(){var enumerator;var index=0;return new IEnumerator(function(){enumerator=source.getEnumerator()},function(){while(enumerator.moveNext()){var result=selector(enumerator.current(),index++);if(result!=null){return this.yieldReturn(result)}}return this.yieldBreak()},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.ofType=function(type){var typeName;switch(type){case Number:typeName=Types.Number;break;case String:typeName=Types.String;break;case Boolean:typeName=Types.Boolean;break;case Function:typeName=Types.Function;break;default:typeName=null;break}return typeName===null?this.where(function(x){return x instanceof type}):this.where(function(x){return typeof x===typeName})};Enumerable.prototype.zip=function(){var args=arguments;var selector=Utils.createLambda(arguments[arguments.length-1]);var source=this;if(arguments.length==2){var second=arguments[0];return new Enumerable(function(){var firstEnumerator;var secondEnumerator;var index=0;return new IEnumerator(function(){firstEnumerator=source.getEnumerator();secondEnumerator=Enumerable.from(second).getEnumerator()},function(){if(firstEnumerator.moveNext()&&secondEnumerator.moveNext()){return this.yieldReturn(selector(firstEnumerator.current(),secondEnumerator.current(),index++))}return false},function(){try{Utils.dispose(firstEnumerator)}finally{Utils.dispose(secondEnumerator)}})})}else{return new Enumerable(function(){var enumerators;var index=0;return new IEnumerator(function(){var array=Enumerable.make(source).concat(Enumerable.from(args).takeExceptLast().select(Enumerable.from)).select(function(x){return x.getEnumerator()}).toArray();enumerators=Enumerable.from(array)},function(){if(enumerators.all(function(x){return x.moveNext()})){var array=enumerators.select(function(x){return x.current()}).toArray();array.push(index++);return this.yieldReturn(selector.apply(null,array))}else{return this.yieldBreak()}},function(){Enumerable.from(enumerators).forEach(Utils.dispose)})})}};Enumerable.prototype.merge=function(){var args=arguments;var source=this;return new Enumerable(function(){var enumerators;var index=-1;return new IEnumerator(function(){enumerators=Enumerable.make(source).concat(Enumerable.from(args).select(Enumerable.from)).select(function(x){return x.getEnumerator()}).toArray()},function(){while(enumerators.length>0){index=index>=enumerators.length-1?0:index+1;var enumerator=enumerators[index];if(enumerator.moveNext()){return this.yieldReturn(enumerator.current())}else{enumerator.dispose();enumerators.splice(index--,1)}}return this.yieldBreak()},function(){Enumerable.from(enumerators).forEach(Utils.dispose)})})};Enumerable.prototype.join=function(inner,outerKeySelector,innerKeySelector,resultSelector,compareSelector){outerKeySelector=Utils.createLambda(outerKeySelector);innerKeySelector=Utils.createLambda(innerKeySelector);resultSelector=Utils.createLambda(resultSelector);compareSelector=Utils.createLambda(compareSelector);var source=this;return new Enumerable(function(){var outerEnumerator;var lookup;var innerElements=null;var innerCount=0;return new IEnumerator(function(){outerEnumerator=source.getEnumerator();lookup=Enumerable.from(inner).toLookup(innerKeySelector,Functions.Identity,compareSelector)},function(){while(true){if(innerElements!=null){var innerElement=innerElements[innerCount++];if(innerElement!==undefined){return this.yieldReturn(resultSelector(outerEnumerator.current(),innerElement))}innerElement=null;innerCount=0}if(outerEnumerator.moveNext()){var key=outerKeySelector(outerEnumerator.current());innerElements=lookup.get(key).toArray()}else{return false}}},function(){Utils.dispose(outerEnumerator)})})};Enumerable.prototype.groupJoin=function(inner,outerKeySelector,innerKeySelector,resultSelector,compareSelector){outerKeySelector=Utils.createLambda(outerKeySelector);innerKeySelector=Utils.createLambda(innerKeySelector);resultSelector=Utils.createLambda(resultSelector);compareSelector=Utils.createLambda(compareSelector);var source=this;return new Enumerable(function(){var enumerator=source.getEnumerator();var lookup=null;return new IEnumerator(function(){enumerator=source.getEnumerator();lookup=Enumerable.from(inner).toLookup(innerKeySelector,Functions.Identity,compareSelector)},function(){if(enumerator.moveNext()){var innerElement=lookup.get(outerKeySelector(enumerator.current()));return this.yieldReturn(resultSelector(enumerator.current(),innerElement))}return false},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.all=function(predicate){predicate=Utils.createLambda(predicate);var result=true;this.forEach(function(x){if(!predicate(x)){result=false;return false}});return result};Enumerable.prototype.any=function(predicate){predicate=Utils.createLambda(predicate);var enumerator=this.getEnumerator();try{if(arguments.length==0)return enumerator.moveNext();while(enumerator.moveNext()){if(predicate(enumerator.current()))return true}return false}finally{Utils.dispose(enumerator)}};Enumerable.prototype.isEmpty=function(){return!this.any()};Enumerable.prototype.concat=function(){var source=this;if(arguments.length==1){var second=arguments[0];return new Enumerable(function(){var firstEnumerator;var secondEnumerator;return new IEnumerator(function(){firstEnumerator=source.getEnumerator()},function(){if(secondEnumerator==null){if(firstEnumerator.moveNext())return this.yieldReturn(firstEnumerator.current());secondEnumerator=Enumerable.from(second).getEnumerator()}if(secondEnumerator.moveNext())return this.yieldReturn(secondEnumerator.current());return false},function(){try{Utils.dispose(firstEnumerator)}finally{Utils.dispose(secondEnumerator)}})})}else{var args=arguments;return new Enumerable(function(){var enumerators;return new IEnumerator(function(){enumerators=Enumerable.make(source).concat(Enumerable.from(args).select(Enumerable.from)).select(function(x){return x.getEnumerator()}).toArray()},function(){while(enumerators.length>0){var enumerator=enumerators[0];if(enumerator.moveNext()){return this.yieldReturn(enumerator.current())}else{enumerator.dispose();enumerators.splice(0,1)}}return this.yieldBreak()},function(){Enumerable.from(enumerators).forEach(Utils.dispose)})})}};Enumerable.prototype.insert=function(index,second){var source=this;return new Enumerable(function(){var firstEnumerator;var secondEnumerator;var count=0;var isEnumerated=false;return new IEnumerator(function(){firstEnumerator=source.getEnumerator();secondEnumerator=Enumerable.from(second).getEnumerator()},function(){if(count==index&&secondEnumerator.moveNext()){isEnumerated=true;return this.yieldReturn(secondEnumerator.current())}if(firstEnumerator.moveNext()){count++;return this.yieldReturn(firstEnumerator.current())}if(!isEnumerated&&secondEnumerator.moveNext()){return this.yieldReturn(secondEnumerator.current())}return false},function(){try{Utils.dispose(firstEnumerator)}finally{Utils.dispose(secondEnumerator)}})})};Enumerable.prototype.alternate=function(alternateValueOrSequence){var source=this;return new Enumerable(function(){var buffer;var enumerator;var alternateSequence;var alternateEnumerator;return new IEnumerator(function(){if(alternateValueOrSequence instanceof Array||alternateValueOrSequence.getEnumerator!=null){alternateSequence=Enumerable.from(Enumerable.from(alternateValueOrSequence).toArray())}else{alternateSequence=Enumerable.make(alternateValueOrSequence)}enumerator=source.getEnumerator();if(enumerator.moveNext())buffer=enumerator.current()},function(){while(true){if(alternateEnumerator!=null){if(alternateEnumerator.moveNext()){return this.yieldReturn(alternateEnumerator.current())}else{alternateEnumerator=null}}if(buffer==null&&enumerator.moveNext()){buffer=enumerator.current();alternateEnumerator=alternateSequence.getEnumerator();continue}else if(buffer!=null){var retVal=buffer;buffer=null;return this.yieldReturn(retVal)}return this.yieldBreak()}},function(){try{Utils.dispose(enumerator)}finally{Utils.dispose(alternateEnumerator)}})})};Enumerable.prototype.contains=function(value,compareSelector){compareSelector=Utils.createLambda(compareSelector);var enumerator=this.getEnumerator();try{while(enumerator.moveNext()){if(compareSelector(enumerator.current())===value)return true}return false}finally{Utils.dispose(enumerator)}};Enumerable.prototype.defaultIfEmpty=function(defaultValue){var source=this;if(defaultValue===undefined)defaultValue=null;return new Enumerable(function(){var enumerator;var isFirst=true;return new IEnumerator(function(){enumerator=source.getEnumerator()},function(){if(enumerator.moveNext()){isFirst=false;return this.yieldReturn(enumerator.current())}else if(isFirst){isFirst=false;return this.yieldReturn(defaultValue)}return false},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.distinct=function(compareSelector){return this.except(Enumerable.empty(),compareSelector)};Enumerable.prototype.distinctUntilChanged=function(compareSelector){compareSelector=Utils.createLambda(compareSelector);var source=this;return new Enumerable(function(){var enumerator;var compareKey;var initial;return new IEnumerator(function(){enumerator=source.getEnumerator()},function(){while(enumerator.moveNext()){var key=compareSelector(enumerator.current());if(initial){initial=false;compareKey=key;return this.yieldReturn(enumerator.current())}if(compareKey===key){continue}compareKey=key;return this.yieldReturn(enumerator.current())}return this.yieldBreak()},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.except=function(second,compareSelector){compareSelector=Utils.createLambda(compareSelector);var source=this;return new Enumerable(function(){var enumerator;var keys;return new IEnumerator(function(){enumerator=source.getEnumerator();keys=new Dictionary(compareSelector);Enumerable.from(second).forEach(function(key){keys.add(key)})},function(){while(enumerator.moveNext()){var current=enumerator.current();if(!keys.contains(current)){keys.add(current);return this.yieldReturn(current)}}return false},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.intersect=function(second,compareSelector){compareSelector=Utils.createLambda(compareSelector);var source=this;return new Enumerable(function(){var enumerator;var keys;var outs;return new IEnumerator(function(){enumerator=source.getEnumerator();keys=new Dictionary(compareSelector);Enumerable.from(second).forEach(function(key){keys.add(key)});outs=new Dictionary(compareSelector)},function(){while(enumerator.moveNext()){var current=enumerator.current();if(!outs.contains(current)&&keys.contains(current)){outs.add(current);return this.yieldReturn(current)}}return false},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.sequenceEqual=function(second,compareSelector){compareSelector=Utils.createLambda(compareSelector);var firstEnumerator=this.getEnumerator();try{var secondEnumerator=Enumerable.from(second).getEnumerator();try{while(firstEnumerator.moveNext()){if(!secondEnumerator.moveNext()||compareSelector(firstEnumerator.current())!==compareSelector(secondEnumerator.current())){return false}}if(secondEnumerator.moveNext())return false;return true}finally{Utils.dispose(secondEnumerator)}}finally{Utils.dispose(firstEnumerator)}};Enumerable.prototype.union=function(second,compareSelector){compareSelector=Utils.createLambda(compareSelector);var source=this;return new Enumerable(function(){var firstEnumerator;var secondEnumerator;var keys;return new IEnumerator(function(){firstEnumerator=source.getEnumerator();keys=new Dictionary(compareSelector)},function(){var current;if(secondEnumerator===undefined){while(firstEnumerator.moveNext()){current=firstEnumerator.current();if(!keys.contains(current)){keys.add(current);return this.yieldReturn(current)}}secondEnumerator=Enumerable.from(second).getEnumerator()}while(secondEnumerator.moveNext()){current=secondEnumerator.current();if(!keys.contains(current)){keys.add(current);return this.yieldReturn(current)}}return false},function(){try{Utils.dispose(firstEnumerator)}finally{Utils.dispose(secondEnumerator)}})})};Enumerable.prototype.orderBy=function(keySelector){return new OrderedEnumerable(this,keySelector,false)};Enumerable.prototype.orderByDescending=function(keySelector){return new OrderedEnumerable(this,keySelector,true)};Enumerable.prototype.reverse=function(){var source=this;return new Enumerable(function(){var buffer;var index;return new IEnumerator(function(){buffer=source.toArray();index=buffer.length},function(){return index>0?this.yieldReturn(buffer[--index]):false},Functions.Blank)})};Enumerable.prototype.shuffle=function(){var source=this;return new Enumerable(function(){var buffer;return new IEnumerator(function(){buffer=source.toArray()},function(){if(buffer.length>0){var i=Math.floor(Math.random()*buffer.length);return this.yieldReturn(buffer.splice(i,1)[0])}return false},Functions.Blank)})};Enumerable.prototype.weightedSample=function(weightSelector){weightSelector=Utils.createLambda(weightSelector);var source=this;return new Enumerable(function(){var sortedByBound;var totalWeight=0;return new IEnumerator(function(){sortedByBound=source.choose(function(x){var weight=weightSelector(x);if(weight<=0)return null;totalWeight+=weight;return{value:x,bound:totalWeight}}).toArray()},function(){if(sortedByBound.length>0){var draw=Math.floor(Math.random()*totalWeight)+1;var lower=-1;var upper=sortedByBound.length;while(upper-lower>1){var index=Math.floor((lower+upper)/2);if(sortedByBound[index].bound>=draw){upper=index}else{lower=index}}return this.yieldReturn(sortedByBound[upper].value)}return this.yieldBreak()},Functions.Blank)})};Enumerable.prototype.groupBy=function(keySelector,elementSelector,resultSelector,compareSelector){var source=this;keySelector=Utils.createLambda(keySelector);elementSelector=Utils.createLambda(elementSelector);if(resultSelector!=null)resultSelector=Utils.createLambda(resultSelector);compareSelector=Utils.createLambda(compareSelector);return new Enumerable(function(){var enumerator;return new IEnumerator(function(){enumerator=source.toLookup(keySelector,elementSelector,compareSelector).toEnumerable().getEnumerator()},function(){while(enumerator.moveNext()){return resultSelector==null?this.yieldReturn(enumerator.current()):this.yieldReturn(resultSelector(enumerator.current().key(),enumerator.current()))}return false},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.partitionBy=function(keySelector,elementSelector,resultSelector,compareSelector){var source=this;keySelector=Utils.createLambda(keySelector);elementSelector=Utils.createLambda(elementSelector);compareSelector=Utils.createLambda(compareSelector);var hasResultSelector;if(resultSelector==null){hasResultSelector=false;resultSelector=function(key,group){return new Grouping(key,group)}}else{hasResultSelector=true;resultSelector=Utils.createLambda(resultSelector)}return new Enumerable(function(){var enumerator;var key;var compareKey;var group=[];return new IEnumerator(function(){enumerator=source.getEnumerator();if(enumerator.moveNext()){key=keySelector(enumerator.current());compareKey=compareSelector(key);group.push(elementSelector(enumerator.current()))}},function(){var hasNext;while((hasNext=enumerator.moveNext())==true){if(compareKey===compareSelector(keySelector(enumerator.current()))){group.push(elementSelector(enumerator.current()))}else break}if(group.length>0){var result=hasResultSelector?resultSelector(key,Enumerable.from(group)):resultSelector(key,group);if(hasNext){key=keySelector(enumerator.current());compareKey=compareSelector(key);group=[elementSelector(enumerator.current())]}else group=[];return this.yieldReturn(result)}return false},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.buffer=function(count){var source=this;return new Enumerable(function(){var enumerator;return new IEnumerator(function(){enumerator=source.getEnumerator()},function(){var array=[];var index=0;while(enumerator.moveNext()){array.push(enumerator.current());if(++index>=count)return this.yieldReturn(array)}if(array.length>0)return this.yieldReturn(array);return false},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.aggregate=function(seed,func,resultSelector){resultSelector=Utils.createLambda(resultSelector);return resultSelector(this.scan(seed,func,resultSelector).last())};Enumerable.prototype.average=function(selector){selector=Utils.createLambda(selector);var sum=0;var count=0;this.forEach(function(x){sum+=selector(x);++count});return sum/count};Enumerable.prototype.count=function(predicate){predicate=predicate==null?Functions.True:Utils.createLambda(predicate);var count=0;this.forEach(function(x,i){if(predicate(x,i))++count});return count};Enumerable.prototype.max=function(selector){if(selector==null)selector=Functions.Identity;return this.select(selector).aggregate(function(a,b){return a>b?a:b})};Enumerable.prototype.min=function(selector){if(selector==null)selector=Functions.Identity;return this.select(selector).aggregate(function(a,b){return a<b?a:b})};Enumerable.prototype.maxBy=function(keySelector){keySelector=Utils.createLambda(keySelector);return this.aggregate(function(a,b){return keySelector(a)>keySelector(b)?a:b})};Enumerable.prototype.minBy=function(keySelector){keySelector=Utils.createLambda(keySelector);return this.aggregate(function(a,b){return keySelector(a)<keySelector(b)?a:b})};Enumerable.prototype.sum=function(selector){if(selector==null)selector=Functions.Identity;return this.select(selector).aggregate(0,function(a,b){return a+b})};Enumerable.prototype.elementAt=function(index){var value;var found=false;this.forEach(function(x,i){if(i==index){value=x;found=true;return false}});if(!found)throw new Error("index is less than 0 or greater than or equal to the number of elements in source.");return value};Enumerable.prototype.elementAtOrDefault=function(index,defaultValue){if(defaultValue===undefined)defaultValue=null;var value;
var found=false;this.forEach(function(x,i){if(i==index){value=x;found=true;return false}});return!found?defaultValue:value};Enumerable.prototype.first=function(predicate){if(predicate!=null)return this.where(predicate).first();var value;var found=false;this.forEach(function(x){value=x;found=true;return false});if(!found)throw new Error("first:No element satisfies the condition.");return value};Enumerable.prototype.firstOrDefault=function(predicate,defaultValue){if(defaultValue===undefined)defaultValue=null;if(predicate!=null)return this.where(predicate).firstOrDefault(null,defaultValue);var value;var found=false;this.forEach(function(x){value=x;found=true;return false});return!found?defaultValue:value};Enumerable.prototype.last=function(predicate){if(predicate!=null)return this.where(predicate).last();var value;var found=false;this.forEach(function(x){found=true;value=x});if(!found)throw new Error("last:No element satisfies the condition.");return value};Enumerable.prototype.lastOrDefault=function(predicate,defaultValue){if(defaultValue===undefined)defaultValue=null;if(predicate!=null)return this.where(predicate).lastOrDefault(null,defaultValue);var value;var found=false;this.forEach(function(x){found=true;value=x});return!found?defaultValue:value};Enumerable.prototype.single=function(predicate){if(predicate!=null)return this.where(predicate).single();var value;var found=false;this.forEach(function(x){if(!found){found=true;value=x}else throw new Error("single:sequence contains more than one element.")});if(!found)throw new Error("single:No element satisfies the condition.");return value};Enumerable.prototype.singleOrDefault=function(predicate,defaultValue){if(defaultValue===undefined)defaultValue=null;if(predicate!=null)return this.where(predicate).singleOrDefault(null,defaultValue);var value;var found=false;this.forEach(function(x){if(!found){found=true;value=x}else throw new Error("single:sequence contains more than one element.")});return!found?defaultValue:value};Enumerable.prototype.skip=function(count){var source=this;return new Enumerable(function(){var enumerator;var index=0;return new IEnumerator(function(){enumerator=source.getEnumerator();while(index++<count&&enumerator.moveNext()){}},function(){return enumerator.moveNext()?this.yieldReturn(enumerator.current()):false},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.skipWhile=function(predicate){predicate=Utils.createLambda(predicate);var source=this;return new Enumerable(function(){var enumerator;var index=0;var isSkipEnd=false;return new IEnumerator(function(){enumerator=source.getEnumerator()},function(){while(!isSkipEnd){if(enumerator.moveNext()){if(!predicate(enumerator.current(),index++)){isSkipEnd=true;return this.yieldReturn(enumerator.current())}continue}else return false}return enumerator.moveNext()?this.yieldReturn(enumerator.current()):false},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.take=function(count){var source=this;return new Enumerable(function(){var enumerator;var index=0;return new IEnumerator(function(){enumerator=source.getEnumerator()},function(){return index++<count&&enumerator.moveNext()?this.yieldReturn(enumerator.current()):false},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.takeWhile=function(predicate){predicate=Utils.createLambda(predicate);var source=this;return new Enumerable(function(){var enumerator;var index=0;return new IEnumerator(function(){enumerator=source.getEnumerator()},function(){return enumerator.moveNext()&&predicate(enumerator.current(),index++)?this.yieldReturn(enumerator.current()):false},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.takeExceptLast=function(count){if(count==null)count=1;var source=this;return new Enumerable(function(){if(count<=0)return source.getEnumerator();var enumerator;var q=[];return new IEnumerator(function(){enumerator=source.getEnumerator()},function(){while(enumerator.moveNext()){if(q.length==count){q.push(enumerator.current());return this.yieldReturn(q.shift())}q.push(enumerator.current())}return false},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.takeFromLast=function(count){if(count<=0||count==null)return Enumerable.empty();var source=this;return new Enumerable(function(){var sourceEnumerator;var enumerator;var q=[];return new IEnumerator(function(){sourceEnumerator=source.getEnumerator()},function(){while(sourceEnumerator.moveNext()){if(q.length==count)q.shift();q.push(sourceEnumerator.current())}if(enumerator==null){enumerator=Enumerable.from(q).getEnumerator()}return enumerator.moveNext()?this.yieldReturn(enumerator.current()):false},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.indexOf=function(item){var found=null;if(typeof item===Types.Function){this.forEach(function(x,i){if(item(x,i)){found=i;return false}})}else{this.forEach(function(x,i){if(x===item){found=i;return false}})}return found!==null?found:-1};Enumerable.prototype.lastIndexOf=function(item){var result=-1;if(typeof item===Types.Function){this.forEach(function(x,i){if(item(x,i))result=i})}else{this.forEach(function(x,i){if(x===item)result=i})}return result};Enumerable.prototype.cast=function(){return this};Enumerable.prototype.asEnumerable=function(){return Enumerable.from(this)};Enumerable.prototype.toArray=function(){var array=[];this.forEach(function(x){array.push(x)});return array};Enumerable.prototype.toLookup=function(keySelector,elementSelector,compareSelector){keySelector=Utils.createLambda(keySelector);elementSelector=Utils.createLambda(elementSelector);compareSelector=Utils.createLambda(compareSelector);var dict=new Dictionary(compareSelector);this.forEach(function(x){var key=keySelector(x);var element=elementSelector(x);var array=dict.get(key);if(array!==undefined)array.push(element);else dict.add(key,[element])});return new Lookup(dict)};Enumerable.prototype.toObject=function(keySelector,elementSelector){keySelector=Utils.createLambda(keySelector);elementSelector=Utils.createLambda(elementSelector);var obj={};this.forEach(function(x){obj[keySelector(x)]=elementSelector(x)});return obj};Enumerable.prototype.toDictionary=function(keySelector,elementSelector,compareSelector){keySelector=Utils.createLambda(keySelector);elementSelector=Utils.createLambda(elementSelector);compareSelector=Utils.createLambda(compareSelector);var dict=new Dictionary(compareSelector);this.forEach(function(x){dict.add(keySelector(x),elementSelector(x))});return dict};Enumerable.prototype.toJSONString=function(replacer,space){if(typeof JSON===Types.Undefined||JSON.stringify==null){throw new Error("toJSONString can't find JSON.stringify. This works native JSON support Browser or include json2.js")}return JSON.stringify(this.toArray(),replacer,space)};Enumerable.prototype.toJoinedString=function(separator,selector){if(separator==null)separator="";if(selector==null)selector=Functions.Identity;return this.select(selector).toArray().join(separator)};Enumerable.prototype.doAction=function(action){var source=this;action=Utils.createLambda(action);return new Enumerable(function(){var enumerator;var index=0;return new IEnumerator(function(){enumerator=source.getEnumerator()},function(){if(enumerator.moveNext()){action(enumerator.current(),index++);return this.yieldReturn(enumerator.current())}return false},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.forEach=function(action){action=Utils.createLambda(action);var index=0;var enumerator=this.getEnumerator();try{while(enumerator.moveNext()){if(action(enumerator.current(),index++)===false)break}}finally{Utils.dispose(enumerator)}};Enumerable.prototype.write=function(separator,selector){if(separator==null)separator="";selector=Utils.createLambda(selector);var isFirst=true;this.forEach(function(item){if(isFirst)isFirst=false;else document.write(separator);document.write(selector(item))})};Enumerable.prototype.writeLine=function(selector){selector=Utils.createLambda(selector);this.forEach(function(item){document.writeln(selector(item)+"<br />")})};Enumerable.prototype.force=function(){var enumerator=this.getEnumerator();try{while(enumerator.moveNext()){}}finally{Utils.dispose(enumerator)}};Enumerable.prototype.letBind=function(func){func=Utils.createLambda(func);var source=this;return new Enumerable(function(){var enumerator;return new IEnumerator(function(){enumerator=Enumerable.from(func(source)).getEnumerator()},function(){return enumerator.moveNext()?this.yieldReturn(enumerator.current()):false},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.share=function(){var source=this;var sharedEnumerator;var disposed=false;return new DisposableEnumerable(function(){return new IEnumerator(function(){if(sharedEnumerator==null){sharedEnumerator=source.getEnumerator()}},function(){if(disposed)throw new Error("enumerator is disposed");return sharedEnumerator.moveNext()?this.yieldReturn(sharedEnumerator.current()):false},Functions.Blank)},function(){disposed=true;Utils.dispose(sharedEnumerator)})};Enumerable.prototype.memoize=function(){var source=this;var cache;var enumerator;var disposed=false;return new DisposableEnumerable(function(){var index=-1;return new IEnumerator(function(){if(enumerator==null){enumerator=source.getEnumerator();cache=[]}},function(){if(disposed)throw new Error("enumerator is disposed");index++;if(cache.length<=index){return enumerator.moveNext()?this.yieldReturn(cache[index]=enumerator.current()):false}return this.yieldReturn(cache[index])},Functions.Blank)},function(){disposed=true;Utils.dispose(enumerator);cache=null})};Enumerable.prototype.catchError=function(handler){handler=Utils.createLambda(handler);var source=this;return new Enumerable(function(){var enumerator;return new IEnumerator(function(){enumerator=source.getEnumerator()},function(){try{return enumerator.moveNext()?this.yieldReturn(enumerator.current()):false}catch(e){handler(e);return false}},function(){Utils.dispose(enumerator)})})};Enumerable.prototype.finallyAction=function(finallyAction){finallyAction=Utils.createLambda(finallyAction);var source=this;return new Enumerable(function(){var enumerator;return new IEnumerator(function(){enumerator=source.getEnumerator()},function(){return enumerator.moveNext()?this.yieldReturn(enumerator.current()):false},function(){try{Utils.dispose(enumerator)}finally{finallyAction()}})})};Enumerable.prototype.log=function(selector){selector=Utils.createLambda(selector);return this.doAction(function(item){if(typeof console!==Types.Undefined){console.log(selector(item))}})};Enumerable.prototype.trace=function(message,selector){if(message==null)message="Trace";selector=Utils.createLambda(selector);return this.doAction(function(item){if(typeof console!==Types.Undefined){console.log(message,selector(item))}})};var OrderedEnumerable=function(source,keySelector,descending,parent){this.source=source;this.keySelector=Utils.createLambda(keySelector);this.descending=descending;this.parent=parent};OrderedEnumerable.prototype=new Enumerable;OrderedEnumerable.prototype.createOrderedEnumerable=function(keySelector,descending){return new OrderedEnumerable(this.source,keySelector,descending,this)};OrderedEnumerable.prototype.thenBy=function(keySelector){return this.createOrderedEnumerable(keySelector,false)};OrderedEnumerable.prototype.thenByDescending=function(keySelector){return this.createOrderedEnumerable(keySelector,true)};OrderedEnumerable.prototype.getEnumerator=function(){var self=this;var buffer;var indexes;var index=0;return new IEnumerator(function(){buffer=[];indexes=[];self.source.forEach(function(item,index){buffer.push(item);indexes.push(index)});var sortContext=SortContext.create(self,null);sortContext.GenerateKeys(buffer);indexes.sort(function(a,b){return sortContext.compare(a,b)})},function(){return index<indexes.length?this.yieldReturn(buffer[indexes[index++]]):false},Functions.Blank)};var SortContext=function(keySelector,descending,child){this.keySelector=keySelector;this.descending=descending;this.child=child;this.keys=null};SortContext.create=function(orderedEnumerable,currentContext){var context=new SortContext(orderedEnumerable.keySelector,orderedEnumerable.descending,currentContext);if(orderedEnumerable.parent!=null)return SortContext.create(orderedEnumerable.parent,context);return context};SortContext.prototype.GenerateKeys=function(source){var len=source.length;var keySelector=this.keySelector;var keys=new Array(len);for(var i=0;i<len;i++)keys[i]=keySelector(source[i]);this.keys=keys;if(this.child!=null)this.child.GenerateKeys(source)};SortContext.prototype.compare=function(index1,index2){var comparison=Utils.compare(this.keys[index1],this.keys[index2]);if(comparison==0){if(this.child!=null)return this.child.compare(index1,index2);return Utils.compare(index1,index2)}return this.descending?-comparison:comparison};var DisposableEnumerable=function(getEnumerator,dispose){this.dispose=dispose;Enumerable.call(this,getEnumerator)};DisposableEnumerable.prototype=new Enumerable;var ArrayEnumerable=function(source){this.getSource=function(){return source}};ArrayEnumerable.prototype=new Enumerable;ArrayEnumerable.prototype.any=function(predicate){return predicate==null?this.getSource().length>0:Enumerable.prototype.any.apply(this,arguments)};ArrayEnumerable.prototype.count=function(predicate){return predicate==null?this.getSource().length:Enumerable.prototype.count.apply(this,arguments)};ArrayEnumerable.prototype.elementAt=function(index){var source=this.getSource();return 0<=index&&index<source.length?source[index]:Enumerable.prototype.elementAt.apply(this,arguments)};ArrayEnumerable.prototype.elementAtOrDefault=function(index,defaultValue){if(defaultValue===undefined)defaultValue=null;var source=this.getSource();return 0<=index&&index<source.length?source[index]:defaultValue};ArrayEnumerable.prototype.first=function(predicate){var source=this.getSource();return predicate==null&&source.length>0?source[0]:Enumerable.prototype.first.apply(this,arguments)};ArrayEnumerable.prototype.firstOrDefault=function(predicate,defaultValue){if(defaultValue===undefined)defaultValue=null;if(predicate!=null){return Enumerable.prototype.firstOrDefault.apply(this,arguments)}var source=this.getSource();return source.length>0?source[0]:defaultValue};ArrayEnumerable.prototype.last=function(predicate){var source=this.getSource();return predicate==null&&source.length>0?source[source.length-1]:Enumerable.prototype.last.apply(this,arguments)};ArrayEnumerable.prototype.lastOrDefault=function(predicate,defaultValue){if(defaultValue===undefined)defaultValue=null;if(predicate!=null){return Enumerable.prototype.lastOrDefault.apply(this,arguments)}var source=this.getSource();return source.length>0?source[source.length-1]:defaultValue};ArrayEnumerable.prototype.skip=function(count){var source=this.getSource();return new Enumerable(function(){var index;return new IEnumerator(function(){index=count<0?0:count},function(){return index<source.length?this.yieldReturn(source[index++]):false},Functions.Blank)})};ArrayEnumerable.prototype.takeExceptLast=function(count){if(count==null)count=1;return this.take(this.getSource().length-count)};ArrayEnumerable.prototype.takeFromLast=function(count){return this.skip(this.getSource().length-count)};ArrayEnumerable.prototype.reverse=function(){var source=this.getSource();return new Enumerable(function(){var index;return new IEnumerator(function(){index=source.length},function(){return index>0?this.yieldReturn(source[--index]):false},Functions.Blank)})};ArrayEnumerable.prototype.sequenceEqual=function(second,compareSelector){if((second instanceof ArrayEnumerable||second instanceof Array)&&compareSelector==null&&Enumerable.from(second).count()!=this.count()){return false}return Enumerable.prototype.sequenceEqual.apply(this,arguments)};ArrayEnumerable.prototype.toJoinedString=function(separator,selector){var source=this.getSource();if(selector!=null||!(source instanceof Array)){return Enumerable.prototype.toJoinedString.apply(this,arguments)}if(separator==null)separator="";return source.join(separator)};ArrayEnumerable.prototype.getEnumerator=function(){var source=this.getSource();var index=-1;return{current:function(){return source[index]},moveNext:function(){return++index<source.length},dispose:Functions.Blank}};var WhereEnumerable=function(source,predicate){this.prevSource=source;this.prevPredicate=predicate};WhereEnumerable.prototype=new Enumerable;WhereEnumerable.prototype.where=function(predicate){predicate=Utils.createLambda(predicate);if(predicate.length<=1){var prevPredicate=this.prevPredicate;var composedPredicate=function(x){return prevPredicate(x)&&predicate(x)};return new WhereEnumerable(this.prevSource,composedPredicate)}else{return Enumerable.prototype.where.call(this,predicate)}};WhereEnumerable.prototype.select=function(selector){selector=Utils.createLambda(selector);return selector.length<=1?new WhereSelectEnumerable(this.prevSource,this.prevPredicate,selector):Enumerable.prototype.select.call(this,selector)};WhereEnumerable.prototype.getEnumerator=function(){var predicate=this.prevPredicate;var source=this.prevSource;var enumerator;return new IEnumerator(function(){enumerator=source.getEnumerator()},function(){while(enumerator.moveNext()){if(predicate(enumerator.current())){return this.yieldReturn(enumerator.current())}}return false},function(){Utils.dispose(enumerator)})};var WhereSelectEnumerable=function(source,predicate,selector){this.prevSource=source;this.prevPredicate=predicate;this.prevSelector=selector};WhereSelectEnumerable.prototype=new Enumerable;WhereSelectEnumerable.prototype.where=function(predicate){predicate=Utils.createLambda(predicate);return predicate.length<=1?new WhereEnumerable(this,predicate):Enumerable.prototype.where.call(this,predicate)};WhereSelectEnumerable.prototype.select=function(selector){selector=Utils.createLambda(selector);if(selector.length<=1){var prevSelector=this.prevSelector;var composedSelector=function(x){return selector(prevSelector(x))};return new WhereSelectEnumerable(this.prevSource,this.prevPredicate,composedSelector)}else{return Enumerable.prototype.select.call(this,selector)}};WhereSelectEnumerable.prototype.getEnumerator=function(){var predicate=this.prevPredicate;var selector=this.prevSelector;var source=this.prevSource;var enumerator;return new IEnumerator(function(){enumerator=source.getEnumerator()},function(){while(enumerator.moveNext()){if(predicate==null||predicate(enumerator.current())){return this.yieldReturn(selector(enumerator.current()))}}return false},function(){Utils.dispose(enumerator)})};var Dictionary=function(){var callHasOwnProperty=function(target,key){return Object.prototype.hasOwnProperty.call(target,key)};var computeHashCode=function(obj){if(obj===null)return"null";if(obj===undefined)return"undefined";return typeof obj.toString===Types.Function?obj.toString():Object.prototype.toString.call(obj)};var HashEntry=function(key,value){this.key=key;this.value=value;this.prev=null;this.next=null};var EntryList=function(){this.first=null;this.last=null};EntryList.prototype={addLast:function(entry){if(this.last!=null){this.last.next=entry;entry.prev=this.last;this.last=entry}else this.first=this.last=entry},replace:function(entry,newEntry){if(entry.prev!=null){entry.prev.next=newEntry;newEntry.prev=entry.prev}else this.first=newEntry;if(entry.next!=null){entry.next.prev=newEntry;newEntry.next=entry.next}else this.last=newEntry},remove:function(entry){if(entry.prev!=null)entry.prev.next=entry.next;else this.first=entry.next;if(entry.next!=null)entry.next.prev=entry.prev;else this.last=entry.prev}};var Dictionary=function(compareSelector){this.countField=0;this.entryList=new EntryList;this.buckets={};this.compareSelector=compareSelector==null?Functions.Identity:compareSelector};Dictionary.prototype={add:function(key,value){var compareKey=this.compareSelector(key);var hash=computeHashCode(compareKey);var entry=new HashEntry(key,value);if(callHasOwnProperty(this.buckets,hash)){var array=this.buckets[hash];for(var i=0;i<array.length;i++){if(this.compareSelector(array[i].key)===compareKey){this.entryList.replace(array[i],entry);array[i]=entry;return}}array.push(entry)}else{this.buckets[hash]=[entry]}this.countField++;this.entryList.addLast(entry)},get:function(key){var compareKey=this.compareSelector(key);var hash=computeHashCode(compareKey);if(!callHasOwnProperty(this.buckets,hash))return undefined;var array=this.buckets[hash];for(var i=0;i<array.length;i++){var entry=array[i];if(this.compareSelector(entry.key)===compareKey)return entry.value}return undefined},set:function(key,value){var compareKey=this.compareSelector(key);var hash=computeHashCode(compareKey);if(callHasOwnProperty(this.buckets,hash)){var array=this.buckets[hash];for(var i=0;i<array.length;i++){if(this.compareSelector(array[i].key)===compareKey){var newEntry=new HashEntry(key,value);this.entryList.replace(array[i],newEntry);array[i]=newEntry;return true}}}return false},contains:function(key){var compareKey=this.compareSelector(key);var hash=computeHashCode(compareKey);if(!callHasOwnProperty(this.buckets,hash))return false;var array=this.buckets[hash];for(var i=0;i<array.length;i++){if(this.compareSelector(array[i].key)===compareKey)return true}return false},clear:function(){this.countField=0;this.buckets={};this.entryList=new EntryList},remove:function(key){var compareKey=this.compareSelector(key);var hash=computeHashCode(compareKey);if(!callHasOwnProperty(this.buckets,hash))return;var array=this.buckets[hash];for(var i=0;i<array.length;i++){if(this.compareSelector(array[i].key)===compareKey){this.entryList.remove(array[i]);array.splice(i,1);if(array.length==0)delete this.buckets[hash];this.countField--;return}}},count:function(){return this.countField},toEnumerable:function(){var self=this;return new Enumerable(function(){var currentEntry;return new IEnumerator(function(){currentEntry=self.entryList.first},function(){if(currentEntry!=null){var result={key:currentEntry.key,value:currentEntry.value};currentEntry=currentEntry.next;return this.yieldReturn(result)}return false},Functions.Blank)})}};return Dictionary}();var Lookup=function(dictionary){this.count=function(){return dictionary.count()};this.get=function(key){return Enumerable.from(dictionary.get(key))};this.contains=function(key){return dictionary.contains(key)};this.toEnumerable=function(){return dictionary.toEnumerable().select(function(kvp){return new Grouping(kvp.key,kvp.value)})}};var Grouping=function(groupKey,elements){this.key=function(){return groupKey};ArrayEnumerable.call(this,elements)};Grouping.prototype=new ArrayEnumerable;if(typeof define===Types.Function&&define.amd){define("linqjs",[],function(){return Enumerable})}else if(typeof module!==Types.Undefined&&module.exports){module.exports=Enumerable}else{root.Enumerable=Enumerable}})(this)},{}],46:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.moment=factory()})(this,function(){"use strict";var hookCallback;function utils_hooks__hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(callback){hookCallback=callback}function isArray(input){return Object.prototype.toString.call(input)==="[object Array]"}function isDate(input){return input instanceof Date||Object.prototype.toString.call(input)==="[object Date]"}function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i){res.push(fn(arr[i],i))}return res}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function extend(a,b){for(var i in b){if(hasOwnProp(b,i)){a[i]=b[i]}}if(hasOwnProp(b,"toString")){a.toString=b.toString}if(hasOwnProp(b,"valueOf")){a.valueOf=b.valueOf}return a}function create_utc__createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,true).utc()}function defaultParsingFlags(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false}}function getParsingFlags(m){if(m._pf==null){m._pf=defaultParsingFlags()}return m._pf}function valid__isValid(m){if(m._isValid==null){var flags=getParsingFlags(m);m._isValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidMonth&&!flags.invalidWeekday&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated;if(m._strict){m._isValid=m._isValid&&flags.charsLeftOver===0&&flags.unusedTokens.length===0&&flags.bigHour===undefined}}return m._isValid}function valid__createInvalid(flags){var m=create_utc__createUTC(NaN);if(flags!=null){extend(getParsingFlags(m),flags)}else{getParsingFlags(m).userInvalidated=true}return m}var momentProperties=utils_hooks__hooks.momentProperties=[];function copyConfig(to,from){var i,prop,val;if(typeof from._isAMomentObject!=="undefined"){to._isAMomentObject=from._isAMomentObject}if(typeof from._i!=="undefined"){to._i=from._i}if(typeof from._f!=="undefined"){to._f=from._f}if(typeof from._l!=="undefined"){to._l=from._l}if(typeof from._strict!=="undefined"){to._strict=from._strict}if(typeof from._tzm!=="undefined"){to._tzm=from._tzm}if(typeof from._isUTC!=="undefined"){to._isUTC=from._isUTC}if(typeof from._offset!=="undefined"){to._offset=from._offset}if(typeof from._pf!=="undefined"){to._pf=getParsingFlags(from)}if(typeof from._locale!=="undefined"){to._locale=from._locale}if(momentProperties.length>0){for(i in momentProperties){prop=momentProperties[i];val=from[prop];if(typeof val!=="undefined"){to[prop]=val}}}return to}var updateInProgress=false;function Moment(config){copyConfig(this,config);this._d=new Date(config._d!=null?config._d.getTime():NaN);if(updateInProgress===false){updateInProgress=true;utils_hooks__hooks.updateOffset(this);updateInProgress=false}}function isMoment(obj){return obj instanceof Moment||obj!=null&&obj._isAMomentObject!=null}function absFloor(number){if(number<0){return Math.ceil(number)}else{return Math.floor(number)}}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(coercedNumber!==0&&isFinite(coercedNumber)){value=absFloor(coercedNumber)}return value}function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i])){diffs++}}return diffs+lengthDiff}function Locale(){}var locales={};var globalLocale;function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function chooseLocale(names){var i=0,j,next,locale,split;while(i<names.length){split=normalizeLocale(names[i]).split("-");j=split.length;next=normalizeLocale(names[i+1]);next=next?next.split("-"):null;while(j>0){locale=loadLocale(split.slice(0,j).join("-"));if(locale){return locale}if(next&&next.length>=j&&compareArrays(split,next,true)>=j-1){break}j--}i++}return null}function loadLocale(name){var oldLocale=null;if(!locales[name]&&typeof module!=="undefined"&&module&&module.exports){try{oldLocale=globalLocale._abbr;require("./locale/"+name);locale_locales__getSetGlobalLocale(oldLocale)}catch(e){}}return locales[name]}function locale_locales__getSetGlobalLocale(key,values){var data;if(key){if(typeof values==="undefined"){data=locale_locales__getLocale(key)}else{data=defineLocale(key,values)}if(data){globalLocale=data}}return globalLocale._abbr}function defineLocale(name,values){if(values!==null){values.abbr=name;locales[name]=locales[name]||new Locale;locales[name].set(values);locale_locales__getSetGlobalLocale(name);return locales[name]}else{delete locales[name];return null}}function locale_locales__getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr){key=key._locale._abbr}if(!key){return globalLocale}if(!isArray(key)){locale=loadLocale(key);if(locale){return locale}key=[key]}return chooseLocale(key)}var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+"s"]=aliases[shorthand]=unit}function normalizeUnits(units){return typeof units==="string"?aliases[units]||aliases[units.toLowerCase()]:undefined}function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject){if(hasOwnProp(inputObject,prop)){normalizedProp=normalizeUnits(prop);if(normalizedProp){normalizedInput[normalizedProp]=inputObject[prop]}}}return normalizedInput}function makeGetSet(unit,keepTime){return function(value){if(value!=null){get_set__set(this,unit,value);utils_hooks__hooks.updateOffset(this,keepTime);return this}else{return get_set__get(this,unit)}}}function get_set__get(mom,unit){return mom._d["get"+(mom._isUTC?"UTC":"")+unit]()}function get_set__set(mom,unit,value){return mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}function getSet(units,value){var unit;if(typeof units==="object"){for(unit in units){this.set(unit,units[unit])}}else{units=normalizeUnits(units);if(typeof this[units]==="function"){return this[units](value)}}return this}function zeroFill(number,targetLength,forceSign){var absNumber=""+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign=number>=0;return(sign?forceSign?"+":"":"-")+Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber}var formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var formatFunctions={};var formatTokenFunctions={};function addFormatToken(token,padded,ordinal,callback){var func=callback;if(typeof callback==="string"){func=function(){return this[callback]()}}if(token){formatTokenFunctions[token]=func}if(padded){formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2])}}if(ordinal){formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token)}}}function removeFormattingTokens(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|\]$/g,"")}return input.replace(/\\/g,"")}function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]]}else{array[i]=removeFormattingTokens(array[i])}}return function(mom){var output="";for(i=0;i<length;i++){output+=array[i]instanceof Function?array[i].call(mom,format):array[i]}return output}}function formatMoment(m,format){if(!m.isValid()){return m.localeData().invalidDate()}format=expandFormat(format,m.localeData());formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format);return formatFunctions[format](m)}function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}localFormattingTokens.lastIndex=0;while(i>=0&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens);localFormattingTokens.lastIndex=0;i-=1}return format}var match1=/\d/;var match2=/\d\d/;var match3=/\d{3}/;var match4=/\d{4}/;var match6=/[+-]?\d{6}/;var match1to2=/\d\d?/;var match1to3=/\d{1,3}/;var match1to4=/\d{1,4}/;var match1to6=/[+-]?\d{1,6}/;var matchUnsigned=/\d+/;var matchSigned=/[+-]?\d+/;var matchOffset=/Z|[+-]\d\d:?\d\d/gi;var matchTimestamp=/[+-]?\d+(\.\d{1,3})?/;var matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var regexes={};function isFunction(sth){return typeof sth==="function"&&Object.prototype.toString.call(sth)==="[object Function]"}function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict){return isStrict&&strictRegex?strictRegex:regex}}function getParseRegexForToken(token,config){
if(!hasOwnProp(regexes,token)){return new RegExp(unescapeFormat(token))}return regexes[token](config._strict,config._locale)}function unescapeFormat(s){return s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var tokens={};function addParseToken(token,callback){var i,func=callback;if(typeof token==="string"){token=[token]}if(typeof callback==="number"){func=function(input,array){array[callback]=toInt(input)}}for(i=0;i<token.length;i++){tokens[token[i]]=func}}function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{};callback(input,config._w,config,token)})}function addTimeToArrayFromToken(token,input,config){if(input!=null&&hasOwnProp(tokens,token)){tokens[token](input,config._a,config,token)}}var YEAR=0;var MONTH=1;var DATE=2;var HOUR=3;var MINUTE=4;var SECOND=5;var MILLISECOND=6;function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1});addFormatToken("MMM",0,0,function(format){return this.localeData().monthsShort(this,format)});addFormatToken("MMMM",0,0,function(format){return this.localeData().months(this,format)});addUnitAlias("month","M");addRegexToken("M",match1to2);addRegexToken("MM",match1to2,match2);addRegexToken("MMM",matchWord);addRegexToken("MMMM",matchWord);addParseToken(["M","MM"],function(input,array){array[MONTH]=toInt(input)-1});addParseToken(["MMM","MMMM"],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);if(month!=null){array[MONTH]=month}else{getParsingFlags(config).invalidMonth=input}});var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function localeMonths(m){return this._months[m.month()]}var defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function localeMonthsShort(m){return this._monthsShort[m.month()]}function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(i=0;i<12;i++){mom=create_utc__createUTC([2e3,i]);if(strict&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i");this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")}if(!strict&&!this._monthsParse[i]){regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,"");this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")}if(strict&&format==="MMMM"&&this._longMonthsParse[i].test(monthName)){return i}else if(strict&&format==="MMM"&&this._shortMonthsParse[i].test(monthName)){return i}else if(!strict&&this._monthsParse[i].test(monthName)){return i}}}function setMonth(mom,value){var dayOfMonth;if(typeof value==="string"){value=mom.localeData().monthsParse(value);if(typeof value!=="number"){return mom}}dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value));mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth);return mom}function getSetMonth(value){if(value!=null){setMonth(this,value);utils_hooks__hooks.updateOffset(this,true);return this}else{return get_set__get(this,"Month")}}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}function checkOverflow(m){var overflow;var a=m._a;if(a&&getParsingFlags(m).overflow===-2){overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||a[HOUR]===24&&(a[MINUTE]!==0||a[SECOND]!==0||a[MILLISECOND]!==0)?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1;if(getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)){overflow=DATE}getParsingFlags(m).overflow=overflow}return m}function warn(msg){if(utils_hooks__hooks.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+msg)}}function deprecate(msg,fn){var firstTime=true;return extend(function(){if(firstTime){warn(msg+"\n"+(new Error).stack);firstTime=false}return fn.apply(this,arguments)},fn)}var deprecations={};function deprecateSimple(name,msg){if(!deprecations[name]){warn(msg);deprecations[name]=true}}utils_hooks__hooks.suppressDeprecationWarnings=false;var from_string__isoRegex=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]];var isoTimes=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]];var aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;function configFromISO(config){var i,l,string=config._i,match=from_string__isoRegex.exec(string);if(match){getParsingFlags(config).iso=true;for(i=0,l=isoDates.length;i<l;i++){if(isoDates[i][1].exec(string)){config._f=isoDates[i][0];break}}for(i=0,l=isoTimes.length;i<l;i++){if(isoTimes[i][1].exec(string)){config._f+=(match[6]||" ")+isoTimes[i][0];break}}if(string.match(matchOffset)){config._f+="Z"}configFromStringAndFormat(config)}else{config._isValid=false}}function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);if(matched!==null){config._d=new Date(+matched[1]);return}configFromISO(config);if(config._isValid===false){delete config._isValid;utils_hooks__hooks.createFromInputFallback(config)}}utils_hooks__hooks.createFromInputFallback=deprecate("moment construction falls back to js Date. This is "+"discouraged and will be removed in upcoming major "+"release. Please refer to "+"https://github.com/moment/moment/issues/1407 for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))});function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(y<1970){date.setFullYear(y)}return date}function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));if(y<1970){date.setUTCFullYear(y)}return date}addFormatToken(0,["YY",2],0,function(){return this.year()%100});addFormatToken(0,["YYYY",4],0,"year");addFormatToken(0,["YYYYY",5],0,"year");addFormatToken(0,["YYYYYY",6,true],0,"year");addUnitAlias("year","y");addRegexToken("Y",matchSigned);addRegexToken("YY",match1to2,match2);addRegexToken("YYYY",match1to4,match4);addRegexToken("YYYYY",match1to6,match6);addRegexToken("YYYYYY",match1to6,match6);addParseToken(["YYYYY","YYYYYY"],YEAR);addParseToken("YYYY",function(input,array){array[YEAR]=input.length===2?utils_hooks__hooks.parseTwoDigitYear(input):toInt(input)});addParseToken("YY",function(input,array){array[YEAR]=utils_hooks__hooks.parseTwoDigitYear(input)});function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}utils_hooks__hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",false);function getIsLeapYear(){return isLeapYear(this.year())}addFormatToken("w",["ww",2],"wo","week");addFormatToken("W",["WW",2],"Wo","isoWeek");addUnitAlias("week","w");addUnitAlias("isoWeek","W");addRegexToken("w",match1to2);addRegexToken("ww",match1to2,match2);addRegexToken("W",match1to2);addRegexToken("WW",match1to2,match2);addWeekParseToken(["w","ww","W","WW"],function(input,week,config,token){week[token.substr(0,1)]=toInt(input)});function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day(),adjustedMoment;if(daysToDayOfWeek>end){daysToDayOfWeek-=7}if(daysToDayOfWeek<end-7){daysToDayOfWeek+=7}adjustedMoment=local__createLocal(mom).add(daysToDayOfWeek,"d");return{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()}}function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week}var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,"d")}function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,"d")}addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear");addUnitAlias("dayOfYear","DDD");addRegexToken("DDD",match1to3);addRegexToken("DDDD",match3);addParseToken(["DDD","DDDD"],function(input,array,config){config._dayOfYear=toInt(input)});function dayOfYearFromWeeks(year,week,weekday,firstDayOfWeekOfYear,firstDayOfWeek){var week1Jan=6+firstDayOfWeek-firstDayOfWeekOfYear,janX=createUTCDate(year,0,1+week1Jan),d=janX.getUTCDay(),dayOfYear;if(d<firstDayOfWeek){d+=7}weekday=weekday!=null?1*weekday:firstDayOfWeek;dayOfYear=1+week1Jan+7*(week-1)-d+weekday;return{year:dayOfYear>0?year:year-1,dayOfYear:dayOfYear>0?dayOfYear:daysInYear(year-1)+dayOfYear}}function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return input==null?dayOfYear:this.add(input-dayOfYear,"d")}function defaults(a,b,c){if(a!=null){return a}if(b!=null){return b}return c}function currentDateArray(config){var now=new Date;if(config._useUTC){return[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()]}return[now.getFullYear(),now.getMonth(),now.getDate()]}function configFromArray(config){var i,date,input=[],currentDate,yearToUse;if(config._d){return}currentDate=currentDateArray(config);if(config._w&&config._a[DATE]==null&&config._a[MONTH]==null){dayOfYearFromWeekInfo(config)}if(config._dayOfYear){yearToUse=defaults(config._a[YEAR],currentDate[YEAR]);if(config._dayOfYear>daysInYear(yearToUse)){getParsingFlags(config)._overflowDayOfYear=true}date=createUTCDate(yearToUse,0,config._dayOfYear);config._a[MONTH]=date.getUTCMonth();config._a[DATE]=date.getUTCDate()}for(i=0;i<3&&config._a[i]==null;++i){config._a[i]=input[i]=currentDate[i]}for(;i<7;i++){config._a[i]=input[i]=config._a[i]==null?i===2?1:0:config._a[i]}if(config._a[HOUR]===24&&config._a[MINUTE]===0&&config._a[SECOND]===0&&config._a[MILLISECOND]===0){config._nextDay=true;config._a[HOUR]=0}config._d=(config._useUTC?createUTCDate:createDate).apply(null,input);if(config._tzm!=null){config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm)}if(config._nextDay){config._a[HOUR]=24}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp;w=config._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(local__createLocal(),1,4).year);week=defaults(w.W,1);weekday=defaults(w.E,1)}else{dow=config._locale._week.dow;doy=config._locale._week.doy;weekYear=defaults(w.gg,config._a[YEAR],weekOfYear(local__createLocal(),dow,doy).year);week=defaults(w.w,1);if(w.d!=null){weekday=w.d;if(weekday<dow){++week}}else if(w.e!=null){weekday=w.e+dow}else{weekday=dow}}temp=dayOfYearFromWeeks(weekYear,week,weekday,doy,dow);config._a[YEAR]=temp.year;config._dayOfYear=temp.dayOfYear}utils_hooks__hooks.ISO_8601=function(){};function configFromStringAndFormat(config){if(config._f===utils_hooks__hooks.ISO_8601){configFromISO(config);return}config._a=[];getParsingFlags(config).empty=true;var string=""+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[];for(i=0;i<tokens.length;i++){token=tokens[i];parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0];if(parsedInput){skipped=string.substr(0,string.indexOf(parsedInput));if(skipped.length>0){getParsingFlags(config).unusedInput.push(skipped)}string=string.slice(string.indexOf(parsedInput)+parsedInput.length);totalParsedInputLength+=parsedInput.length}if(formatTokenFunctions[token]){if(parsedInput){getParsingFlags(config).empty=false}else{getParsingFlags(config).unusedTokens.push(token)}addTimeToArrayFromToken(token,parsedInput,config)}else if(config._strict&&!parsedInput){getParsingFlags(config).unusedTokens.push(token)}}getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength;if(string.length>0){getParsingFlags(config).unusedInput.push(string)}if(getParsingFlags(config).bigHour===true&&config._a[HOUR]<=12&&config._a[HOUR]>0){getParsingFlags(config).bigHour=undefined}config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem);configFromArray(config);checkOverflow(config)}function meridiemFixWrap(locale,hour,meridiem){var isPm;if(meridiem==null){return hour}if(locale.meridiemHour!=null){return locale.meridiemHour(hour,meridiem)}else if(locale.isPM!=null){isPm=locale.isPM(meridiem);if(isPm&&hour<12){hour+=12}if(!isPm&&hour===12){hour=0}return hour}else{return hour}}function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(config._f.length===0){getParsingFlags(config).invalidFormat=true;config._d=new Date(NaN);return}for(i=0;i<config._f.length;i++){currentScore=0;tempConfig=copyConfig({},config);if(config._useUTC!=null){tempConfig._useUTC=config._useUTC}tempConfig._f=config._f[i];configFromStringAndFormat(tempConfig);if(!valid__isValid(tempConfig)){continue}currentScore+=getParsingFlags(tempConfig).charsLeftOver;currentScore+=getParsingFlags(tempConfig).unusedTokens.length*10;getParsingFlags(tempConfig).score=currentScore;if(scoreToBeat==null||currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempConfig}}extend(config,bestMoment||tempConfig)}function configFromObject(config){if(config._d){return}var i=normalizeObjectUnits(config._i);config._a=[i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond];configFromArray(config)}function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));if(res._nextDay){res.add(1,"d");res._nextDay=undefined}return res}function prepareConfig(config){var input=config._i,format=config._f;config._locale=config._locale||locale_locales__getLocale(config._l);if(input===null||format===undefined&&input===""){return valid__createInvalid({nullInput:true})}if(typeof input==="string"){config._i=input=config._locale.preparse(input)}if(isMoment(input)){return new Moment(checkOverflow(input))}else if(isArray(format)){configFromStringAndArray(config)}else if(format){configFromStringAndFormat(config)}else if(isDate(input)){config._d=input}else{configFromInput(config)}return config}function configFromInput(config){var input=config._i;if(input===undefined){config._d=new Date}else if(isDate(input)){config._d=new Date(+input)}else if(typeof input==="string"){configFromString(config)}else if(isArray(input)){config._a=map(input.slice(0),function(obj){return parseInt(obj,10)});configFromArray(config)}else if(typeof input==="object"){configFromObject(config)}else if(typeof input==="number"){config._d=new Date(input)}else{utils_hooks__hooks.createFromInputFallback(config)}}function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};if(typeof locale==="boolean"){strict=locale;locale=undefined}c._isAMomentObject=true;c._useUTC=c._isUTC=isUTC;c._l=locale;c._i=input;c._f=format;c._strict=strict;return createFromConfig(c)}function local__createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,false)}var prototypeMin=deprecate("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var other=local__createLocal.apply(null,arguments);return other<this?this:other});var prototypeMax=deprecate("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var other=local__createLocal.apply(null,arguments);return other>this?this:other});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0])){moments=moments[0]}if(!moments.length){return local__createLocal()}res=moments[0];for(i=1;i<moments.length;++i){if(!moments[i].isValid()||moments[i][fn](res)){res=moments[i]}}return res}function min(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args)}function max(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+seconds*1e3+minutes*6e4+hours*36e5;this._days=+days+weeks*7;this._months=+months+quarters*3+years*12;this._data={};this._locale=locale_locales__getLocale();this._bubble()}function isDuration(obj){return obj instanceof Duration}function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset();var sign="+";if(offset<0){offset=-offset;sign="-"}return sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~offset%60,2)})}offset("Z",":");offset("ZZ","");addRegexToken("Z",matchOffset);addRegexToken("ZZ",matchOffset);addParseToken(["Z","ZZ"],function(input,array,config){config._useUTC=true;config._tzm=offsetFromString(input)});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(string){var matches=(string||"").match(matchOffset)||[];var chunk=matches[matches.length-1]||[];var parts=(chunk+"").match(chunkOffset)||["-",0,0];var minutes=+(parts[1]*60)+toInt(parts[2]);return parts[0]==="+"?minutes:-minutes}function cloneWithOffset(input,model){var res,diff;if(model._isUTC){res=model.clone();diff=(isMoment(input)||isDate(input)?+input:+local__createLocal(input))-+res;res._d.setTime(+res._d+diff);utils_hooks__hooks.updateOffset(res,false);return res}else{return local__createLocal(input).local()}}function getDateOffset(m){return-Math.round(m._d.getTimezoneOffset()/15)*15}utils_hooks__hooks.updateOffset=function(){};function getSetOffset(input,keepLocalTime){var offset=this._offset||0,localAdjust;if(input!=null){if(typeof input==="string"){input=offsetFromString(input)}if(Math.abs(input)<16){input=input*60}if(!this._isUTC&&keepLocalTime){localAdjust=getDateOffset(this)}this._offset=input;this._isUTC=true;if(localAdjust!=null){this.add(localAdjust,"m")}if(offset!==input){if(!keepLocalTime||this._changeInProgress){add_subtract__addSubtract(this,create__createDuration(input-offset,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;utils_hooks__hooks.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?offset:getDateOffset(this)}}function getSetZone(input,keepLocalTime){if(input!=null){if(typeof input!=="string"){input=-input}this.utcOffset(input,keepLocalTime);return this}else{return-this.utcOffset()}}function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime)}function setOffsetToLocal(keepLocalTime){if(this._isUTC){this.utcOffset(0,keepLocalTime);this._isUTC=false;if(keepLocalTime){this.subtract(getDateOffset(this),"m")}}return this}function setOffsetToParsedOffset(){if(this._tzm){this.utcOffset(this._tzm)}else if(typeof this._i==="string"){this.utcOffset(offsetFromString(this._i))}return this}function hasAlignedHourOffset(input){input=input?local__createLocal(input).utcOffset():0;return(this.utcOffset()-input)%60===0}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(typeof this._isDSTShifted!=="undefined"){return this._isDSTShifted}var c={};copyConfig(c,this);c=prepareConfig(c);if(c._a){var other=c._isUTC?create_utc__createUTC(c._a):local__createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function isLocal(){return!this._isUTC}function isUtcOffset(){return this._isUTC}function isUtc(){return this._isUTC&&this._offset===0}var aspNetRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/;var create__isoRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function create__createDuration(input,key){var duration=input,match=null,sign,ret,diffRes;if(isDuration(input)){duration={ms:input._milliseconds,d:input._days,M:input._months}}else if(typeof input==="number"){duration={};if(key){duration[key]=input}else{duration.milliseconds=input}}else if(!!(match=aspNetRegex.exec(input))){sign=match[1]==="-"?-1:1;duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign}}else if(!!(match=create__isoRegex.exec(input))){sign=match[1]==="-"?-1:1;duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),d:parseIso(match[4],sign),h:parseIso(match[5],sign),m:parseIso(match[6],sign),s:parseIso(match[7],sign),w:parseIso(match[8],sign)}}else if(duration==null){duration={}}else if(typeof duration==="object"&&("from"in duration||"to"in duration)){diffRes=momentsDifference(local__createLocal(duration.from),local__createLocal(duration.to));duration={};duration.ms=diffRes.milliseconds;duration.M=diffRes.months}ret=new Duration(duration);if(isDuration(input)&&hasOwnProp(input,"_locale")){ret._locale=input._locale}return ret}create__createDuration.fn=Duration.prototype;function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};res.months=other.month()-base.month()+(other.year()-base.year())*12;if(base.clone().add(res.months,"M").isAfter(other)){--res.months}res.milliseconds=+other-+base.clone().add(res.months,"M");return res}function momentsDifference(base,other){var res;other=cloneWithOffset(other,base);if(base.isBefore(other)){res=positiveMomentsDifference(base,other)}else{res=positiveMomentsDifference(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months}return res}function createAdder(direction,name){return function(val,period){var dur,tmp;if(period!==null&&!isNaN(+period)){deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period).");tmp=val;val=period;period=tmp}val=typeof val==="string"?+val:val;dur=create__createDuration(val,period);add_subtract__addSubtract(this,dur,direction);return this}}function add_subtract__addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months;updateOffset=updateOffset==null?true:updateOffset;if(milliseconds){mom._d.setTime(+mom._d+milliseconds*isAdding)}if(days){get_set__set(mom,"Date",get_set__get(mom,"Date")+days*isAdding)}if(months){setMonth(mom,get_set__get(mom,"Month")+months*isAdding)}if(updateOffset){utils_hooks__hooks.updateOffset(mom,days||months)}}var add_subtract__add=createAdder(1,"add");var add_subtract__subtract=createAdder(-1,"subtract");function moment_calendar__calendar(time,formats){var now=time||local__createLocal(),sod=cloneWithOffset(now,this).startOf("day"),diff=this.diff(sod,"days",true),format=diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse";return this.format(formats&&formats[format]||this.localeData().calendar(format,this,local__createLocal(now)))}function clone(){return new Moment(this)}function isAfter(input,units){var inputMs;units=normalizeUnits(typeof units!=="undefined"?units:"millisecond");if(units==="millisecond"){input=isMoment(input)?input:local__createLocal(input);return+this>+input}else{inputMs=isMoment(input)?+input:+local__createLocal(input);return inputMs<+this.clone().startOf(units)}}function isBefore(input,units){var inputMs;units=normalizeUnits(typeof units!=="undefined"?units:"millisecond");if(units==="millisecond"){input=isMoment(input)?input:local__createLocal(input);return+this<+input}else{inputMs=isMoment(input)?+input:+local__createLocal(input);return+this.clone().endOf(units)<inputMs}}function isBetween(from,to,units){return this.isAfter(from,units)&&this.isBefore(to,units)}function isSame(input,units){var inputMs;units=normalizeUnits(units||"millisecond");if(units==="millisecond"){input=isMoment(input)?input:local__createLocal(input);return+this===+input}else{inputMs=+local__createLocal(input);return+this.clone().startOf(units)<=inputMs&&inputMs<=+this.clone().endOf(units)}}function diff(input,units,asFloat){var that=cloneWithOffset(input,this),zoneDelta=(that.utcOffset()-this.utcOffset())*6e4,delta,output;units=normalizeUnits(units);if(units==="year"||units==="month"||units==="quarter"){output=monthDiff(this,that);if(units==="quarter"){output=output/3}else if(units==="year"){output=output/12}}else{delta=this-that;output=units==="second"?delta/1e3:units==="minute"?delta/6e4:units==="hour"?delta/36e5:units==="day"?(delta-zoneDelta)/864e5:units==="week"?(delta-zoneDelta)/6048e5:delta}return asFloat?output:absFloor(output)}function monthDiff(a,b){var wholeMonthDiff=(b.year()-a.year())*12+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months"),anchor2,adjust;if(b-anchor<0){anchor2=a.clone().add(wholeMonthDiff-1,"months");adjust=(b-anchor)/(anchor-anchor2)}else{anchor2=a.clone().add(wholeMonthDiff+1,"months");adjust=(b-anchor)/(anchor2-anchor)}return-(wholeMonthDiff+adjust)}utils_hooks__hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function moment_format__toISOString(){var m=this.clone().utc();if(0<m.year()&&m.year()<=9999){if("function"===typeof Date.prototype.toISOString){return this.toDate().toISOString()}else{return formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}else{return formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}function format(inputString){var output=formatMoment(this,inputString||utils_hooks__hooks.defaultFormat);return this.localeData().postformat(output)}function from(time,withoutSuffix){if(!this.isValid()){return this.localeData().invalidDate()}return create__createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix)}function fromNow(withoutSuffix){return this.from(local__createLocal(),withoutSuffix)}function to(time,withoutSuffix){if(!this.isValid()){return this.localeData().invalidDate()}return create__createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix)}function toNow(withoutSuffix){return this.to(local__createLocal(),withoutSuffix)}function locale(key){var newLocaleData;if(key===undefined){return this._locale._abbr}else{newLocaleData=locale_locales__getLocale(key);if(newLocaleData!=null){this._locale=newLocaleData}return this}}var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){if(key===undefined){return this.localeData()}else{return this.locale(key)}});function localeData(){return this._locale}function startOf(units){units=normalizeUnits(units);switch(units){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(units==="week"){this.weekday(0)}if(units==="isoWeek"){this.isoWeekday(1)}if(units==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function endOf(units){units=normalizeUnits(units);if(units===undefined||units==="millisecond"){return this}return this.startOf(units).add(1,units==="isoWeek"?"week":units).subtract(1,"ms")}function to_type__valueOf(){return+this._d-(this._offset||0)*6e4}function unix(){return Math.floor(+this/1e3)}function toDate(){return this._offset?new Date(+this):this._d}function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()]}function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()}}function moment_valid__isValid(){return valid__isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100});addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100});function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter)}addWeekYearFormatToken("gggg","weekYear");addWeekYearFormatToken("ggggg","weekYear");addWeekYearFormatToken("GGGG","isoWeekYear");addWeekYearFormatToken("GGGGG","isoWeekYear");addUnitAlias("weekYear","gg");addUnitAlias("isoWeekYear","GG");addRegexToken("G",matchSigned);addRegexToken("g",matchSigned);addRegexToken("GG",match1to2,match2);addRegexToken("gg",match1to2,match2);addRegexToken("GGGG",match1to4,match4);addRegexToken("gggg",match1to4,match4);addRegexToken("GGGGG",match1to6,match6);addRegexToken("ggggg",match1to6,match6);addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(input,week,config,token){week[token.substr(0,2)]=toInt(input)});addWeekParseToken(["gg","GG"],function(input,week,config,token){week[token]=utils_hooks__hooks.parseTwoDigitYear(input)});function weeksInYear(year,dow,doy){return weekOfYear(local__createLocal([year,11,31+dow-doy]),dow,doy).week}function getSetWeekYear(input){var year=weekOfYear(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return input==null?year:this.add(input-year,"y")}function getSetISOWeekYear(input){var year=weekOfYear(this,1,4).year;return input==null?year:this.add(input-year,"y")}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)}addFormatToken("Q",0,0,"quarter");addUnitAlias("quarter","Q");addRegexToken("Q",match1);addParseToken("Q",function(input,array){array[MONTH]=(toInt(input)-1)*3});function getSetQuarter(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3)}addFormatToken("D",["DD",2],"Do","date");addUnitAlias("date","D");addRegexToken("D",match1to2);addRegexToken("DD",match1to2,match2);addRegexToken("Do",function(isStrict,locale){return isStrict?locale._ordinalParse:locale._ordinalParseLenient});addParseToken(["D","DD"],DATE);addParseToken("Do",function(input,array){array[DATE]=toInt(input.match(match1to2)[0],10)});var getSetDayOfMonth=makeGetSet("Date",true);addFormatToken("d",0,"do","day");addFormatToken("dd",0,0,function(format){return this.localeData().weekdaysMin(this,format)});addFormatToken("ddd",0,0,function(format){return this.localeData().weekdaysShort(this,format)});addFormatToken("dddd",0,0,function(format){return this.localeData().weekdays(this,format)});addFormatToken("e",0,0,"weekday");addFormatToken("E",0,0,"isoWeekday");addUnitAlias("day","d");addUnitAlias("weekday","e");addUnitAlias("isoWeekday","E");addRegexToken("d",match1to2);addRegexToken("e",match1to2);addRegexToken("E",match1to2);addRegexToken("dd",matchWord);addRegexToken("ddd",matchWord);addRegexToken("dddd",matchWord);addWeekParseToken(["dd","ddd","dddd"],function(input,week,config){var weekday=config._locale.weekdaysParse(input);if(weekday!=null){week.d=weekday}else{getParsingFlags(config).invalidWeekday=input}});addWeekParseToken(["d","e","E"],function(input,week,config,token){week[token]=toInt(input)});function parseWeekday(input,locale){if(typeof input!=="string"){return input}if(!isNaN(input)){return parseInt(input,10)}input=locale.weekdaysParse(input);if(typeof input==="number"){return input}return null}var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");
function localeWeekdays(m){return this._weekdays[m.day()]}var defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function localeWeekdaysShort(m){return this._weekdaysShort[m.day()]}var defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function localeWeekdaysMin(m){return this._weekdaysMin[m.day()]}function localeWeekdaysParse(weekdayName){var i,mom,regex;this._weekdaysParse=this._weekdaysParse||[];for(i=0;i<7;i++){if(!this._weekdaysParse[i]){mom=local__createLocal([2e3,1]).day(i);regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,"");this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")}if(this._weekdaysParse[i].test(weekdayName)){return i}}}function getSetDayOfWeek(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=parseWeekday(input,this.localeData());return this.add(input-day,"d")}else{return day}}function getSetLocaleDayOfWeek(input){var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,"d")}function getSetISODayOfWeek(input){return input==null?this.day()||7:this.day(this.day()%7?input:input-7)}addFormatToken("H",["HH",2],0,"hour");addFormatToken("h",["hh",2],0,function(){return this.hours()%12||12});function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase)})}meridiem("a",true);meridiem("A",false);addUnitAlias("hour","h");function matchMeridiem(isStrict,locale){return locale._meridiemParse}addRegexToken("a",matchMeridiem);addRegexToken("A",matchMeridiem);addRegexToken("H",match1to2);addRegexToken("h",match1to2);addRegexToken("HH",match1to2,match2);addRegexToken("hh",match1to2,match2);addParseToken(["H","HH"],HOUR);addParseToken(["a","A"],function(input,array,config){config._isPm=config._locale.isPM(input);config._meridiem=input});addParseToken(["h","hh"],function(input,array,config){array[HOUR]=toInt(input);getParsingFlags(config).bigHour=true});function localeIsPM(input){return(input+"").toLowerCase().charAt(0)==="p"}var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i;function localeMeridiem(hours,minutes,isLower){if(hours>11){return isLower?"pm":"PM"}else{return isLower?"am":"AM"}}var getSetHour=makeGetSet("Hours",true);addFormatToken("m",["mm",2],0,"minute");addUnitAlias("minute","m");addRegexToken("m",match1to2);addRegexToken("mm",match1to2,match2);addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",false);addFormatToken("s",["ss",2],0,"second");addUnitAlias("second","s");addRegexToken("s",match1to2);addRegexToken("ss",match1to2,match2);addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",false);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)});addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)});addFormatToken(0,["SSS",3],0,"millisecond");addFormatToken(0,["SSSS",4],0,function(){return this.millisecond()*10});addFormatToken(0,["SSSSS",5],0,function(){return this.millisecond()*100});addFormatToken(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});addFormatToken(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});addFormatToken(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});addFormatToken(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});addUnitAlias("millisecond","ms");addRegexToken("S",match1to3,match1);addRegexToken("SS",match1to3,match2);addRegexToken("SSS",match1to3,match3);var token;for(token="SSSS";token.length<=9;token+="S"){addRegexToken(token,matchUnsigned)}function parseMs(input,array){array[MILLISECOND]=toInt(("0."+input)*1e3)}for(token="S";token.length<=9;token+="S"){addParseToken(token,parseMs)}var getSetMillisecond=makeGetSet("Milliseconds",false);addFormatToken("z",0,0,"zoneAbbr");addFormatToken("zz",0,0,"zoneName");function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}var momentPrototype__proto=Moment.prototype;momentPrototype__proto.add=add_subtract__add;momentPrototype__proto.calendar=moment_calendar__calendar;momentPrototype__proto.clone=clone;momentPrototype__proto.diff=diff;momentPrototype__proto.endOf=endOf;momentPrototype__proto.format=format;momentPrototype__proto.from=from;momentPrototype__proto.fromNow=fromNow;momentPrototype__proto.to=to;momentPrototype__proto.toNow=toNow;momentPrototype__proto.get=getSet;momentPrototype__proto.invalidAt=invalidAt;momentPrototype__proto.isAfter=isAfter;momentPrototype__proto.isBefore=isBefore;momentPrototype__proto.isBetween=isBetween;momentPrototype__proto.isSame=isSame;momentPrototype__proto.isValid=moment_valid__isValid;momentPrototype__proto.lang=lang;momentPrototype__proto.locale=locale;momentPrototype__proto.localeData=localeData;momentPrototype__proto.max=prototypeMax;momentPrototype__proto.min=prototypeMin;momentPrototype__proto.parsingFlags=parsingFlags;momentPrototype__proto.set=getSet;momentPrototype__proto.startOf=startOf;momentPrototype__proto.subtract=add_subtract__subtract;momentPrototype__proto.toArray=toArray;momentPrototype__proto.toObject=toObject;momentPrototype__proto.toDate=toDate;momentPrototype__proto.toISOString=moment_format__toISOString;momentPrototype__proto.toJSON=moment_format__toISOString;momentPrototype__proto.toString=toString;momentPrototype__proto.unix=unix;momentPrototype__proto.valueOf=to_type__valueOf;momentPrototype__proto.year=getSetYear;momentPrototype__proto.isLeapYear=getIsLeapYear;momentPrototype__proto.weekYear=getSetWeekYear;momentPrototype__proto.isoWeekYear=getSetISOWeekYear;momentPrototype__proto.quarter=momentPrototype__proto.quarters=getSetQuarter;momentPrototype__proto.month=getSetMonth;momentPrototype__proto.daysInMonth=getDaysInMonth;momentPrototype__proto.week=momentPrototype__proto.weeks=getSetWeek;momentPrototype__proto.isoWeek=momentPrototype__proto.isoWeeks=getSetISOWeek;momentPrototype__proto.weeksInYear=getWeeksInYear;momentPrototype__proto.isoWeeksInYear=getISOWeeksInYear;momentPrototype__proto.date=getSetDayOfMonth;momentPrototype__proto.day=momentPrototype__proto.days=getSetDayOfWeek;momentPrototype__proto.weekday=getSetLocaleDayOfWeek;momentPrototype__proto.isoWeekday=getSetISODayOfWeek;momentPrototype__proto.dayOfYear=getSetDayOfYear;momentPrototype__proto.hour=momentPrototype__proto.hours=getSetHour;momentPrototype__proto.minute=momentPrototype__proto.minutes=getSetMinute;momentPrototype__proto.second=momentPrototype__proto.seconds=getSetSecond;momentPrototype__proto.millisecond=momentPrototype__proto.milliseconds=getSetMillisecond;momentPrototype__proto.utcOffset=getSetOffset;momentPrototype__proto.utc=setOffsetToUTC;momentPrototype__proto.local=setOffsetToLocal;momentPrototype__proto.parseZone=setOffsetToParsedOffset;momentPrototype__proto.hasAlignedHourOffset=hasAlignedHourOffset;momentPrototype__proto.isDST=isDaylightSavingTime;momentPrototype__proto.isDSTShifted=isDaylightSavingTimeShifted;momentPrototype__proto.isLocal=isLocal;momentPrototype__proto.isUtcOffset=isUtcOffset;momentPrototype__proto.isUtc=isUtc;momentPrototype__proto.isUTC=isUtc;momentPrototype__proto.zoneAbbr=getZoneAbbr;momentPrototype__proto.zoneName=getZoneName;momentPrototype__proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth);momentPrototype__proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth);momentPrototype__proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear);momentPrototype__proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",getSetZone);var momentPrototype=momentPrototype__proto;function moment__createUnix(input){return local__createLocal(input*1e3)}function moment__createInZone(){return local__createLocal.apply(null,arguments).parseZone()}var defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function locale_calendar__calendar(key,mom,now){var output=this._calendar[key];return typeof output==="function"?output.call(mom,now):output}var defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];if(format||!formatUpper){return format}this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)});return this._longDateFormat[key]}var defaultInvalidDate="Invalid date";function invalidDate(){return this._invalidDate}var defaultOrdinal="%d";var defaultOrdinalParse=/\d{1,2}/;function ordinal(number){return this._ordinal.replace("%d",number)}function preParsePostFormat(string){return string}var defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function relative__relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return typeof output==="function"?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)}function pastFuture(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return typeof format==="function"?format(output):format.replace(/%s/i,output)}function locale_set__set(config){var prop,i;for(i in config){prop=config[i];if(typeof prop==="function"){this[i]=prop}else{this["_"+i]=prop}}this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}var prototype__proto=Locale.prototype;prototype__proto._calendar=defaultCalendar;prototype__proto.calendar=locale_calendar__calendar;prototype__proto._longDateFormat=defaultLongDateFormat;prototype__proto.longDateFormat=longDateFormat;prototype__proto._invalidDate=defaultInvalidDate;prototype__proto.invalidDate=invalidDate;prototype__proto._ordinal=defaultOrdinal;prototype__proto.ordinal=ordinal;prototype__proto._ordinalParse=defaultOrdinalParse;prototype__proto.preparse=preParsePostFormat;prototype__proto.postformat=preParsePostFormat;prototype__proto._relativeTime=defaultRelativeTime;prototype__proto.relativeTime=relative__relativeTime;prototype__proto.pastFuture=pastFuture;prototype__proto.set=locale_set__set;prototype__proto.months=localeMonths;prototype__proto._months=defaultLocaleMonths;prototype__proto.monthsShort=localeMonthsShort;prototype__proto._monthsShort=defaultLocaleMonthsShort;prototype__proto.monthsParse=localeMonthsParse;prototype__proto.week=localeWeek;prototype__proto._week=defaultLocaleWeek;prototype__proto.firstDayOfYear=localeFirstDayOfYear;prototype__proto.firstDayOfWeek=localeFirstDayOfWeek;prototype__proto.weekdays=localeWeekdays;prototype__proto._weekdays=defaultLocaleWeekdays;prototype__proto.weekdaysMin=localeWeekdaysMin;prototype__proto._weekdaysMin=defaultLocaleWeekdaysMin;prototype__proto.weekdaysShort=localeWeekdaysShort;prototype__proto._weekdaysShort=defaultLocaleWeekdaysShort;prototype__proto.weekdaysParse=localeWeekdaysParse;prototype__proto.isPM=localeIsPM;prototype__proto._meridiemParse=defaultLocaleMeridiemParse;prototype__proto.meridiem=localeMeridiem;function lists__get(format,index,field,setter){var locale=locale_locales__getLocale();var utc=create_utc__createUTC().set(setter,index);return locale[field](utc,format)}function list(format,index,field,count,setter){if(typeof format==="number"){index=format;format=undefined}format=format||"";if(index!=null){return lists__get(format,index,field,setter)}var i;var out=[];for(i=0;i<count;i++){out[i]=lists__get(format,i,field,setter)}return out}function lists__listMonths(format,index){return list(format,index,"months",12,"month")}function lists__listMonthsShort(format,index){return list(format,index,"monthsShort",12,"month")}function lists__listWeekdays(format,index){return list(format,index,"weekdays",7,"day")}function lists__listWeekdaysShort(format,index){return list(format,index,"weekdaysShort",7,"day")}function lists__listWeekdaysMin(format,index){return list(format,index,"weekdaysMin",7,"day")}locale_locales__getSetGlobalLocale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=toInt(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return number+output}});utils_hooks__hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",locale_locales__getSetGlobalLocale);utils_hooks__hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",locale_locales__getLocale);var mathAbs=Math.abs;function duration_abs__abs(){var data=this._data;this._milliseconds=mathAbs(this._milliseconds);this._days=mathAbs(this._days);this._months=mathAbs(this._months);data.milliseconds=mathAbs(data.milliseconds);data.seconds=mathAbs(data.seconds);data.minutes=mathAbs(data.minutes);data.hours=mathAbs(data.hours);data.months=mathAbs(data.months);data.years=mathAbs(data.years);return this}function duration_add_subtract__addSubtract(duration,input,value,direction){var other=create__createDuration(input,value);duration._milliseconds+=direction*other._milliseconds;duration._days+=direction*other._days;duration._months+=direction*other._months;return duration._bubble()}function duration_add_subtract__add(input,value){return duration_add_subtract__addSubtract(this,input,value,1)}function duration_add_subtract__subtract(input,value){return duration_add_subtract__addSubtract(this,input,value,-1)}function absCeil(number){if(number<0){return Math.floor(number)}else{return Math.ceil(number)}}function bubble(){var milliseconds=this._milliseconds;var days=this._days;var months=this._months;var data=this._data;var seconds,minutes,hours,years,monthsFromDays;if(!(milliseconds>=0&&days>=0&&months>=0||milliseconds<=0&&days<=0&&months<=0)){milliseconds+=absCeil(monthsToDays(months)+days)*864e5;days=0;months=0}data.milliseconds=milliseconds%1e3;seconds=absFloor(milliseconds/1e3);data.seconds=seconds%60;minutes=absFloor(seconds/60);data.minutes=minutes%60;hours=absFloor(minutes/60);data.hours=hours%24;days+=absFloor(hours/24);monthsFromDays=absFloor(daysToMonths(days));months+=monthsFromDays;days-=absCeil(monthsToDays(monthsFromDays));years=absFloor(months/12);months%=12;data.days=days;data.months=months;data.years=years;return this}function daysToMonths(days){return days*4800/146097}function monthsToDays(months){return months*146097/4800}function as(units){var days;var months;var milliseconds=this._milliseconds;units=normalizeUnits(units);if(units==="month"||units==="year"){days=this._days+milliseconds/864e5;months=this._months+daysToMonths(days);return units==="month"?months:months/12}else{days=this._days+Math.round(monthsToDays(this._months));switch(units){case"week":return days/7+milliseconds/6048e5;case"day":return days+milliseconds/864e5;case"hour":return days*24+milliseconds/36e5;case"minute":return days*1440+milliseconds/6e4;case"second":return days*86400+milliseconds/1e3;case"millisecond":return Math.floor(days*864e5)+milliseconds;default:throw new Error("Unknown unit "+units)}}}function duration_as__valueOf(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+toInt(this._months/12)*31536e6}function makeAs(alias){return function(){return this.as(alias)}}var asMilliseconds=makeAs("ms");var asSeconds=makeAs("s");var asMinutes=makeAs("m");var asHours=makeAs("h");var asDays=makeAs("d");var asWeeks=makeAs("w");var asMonths=makeAs("M");var asYears=makeAs("y");function duration_get__get(units){units=normalizeUnits(units);return this[units+"s"]()}function makeGetter(name){return function(){return this._data[name]}}var milliseconds=makeGetter("milliseconds");var seconds=makeGetter("seconds");var minutes=makeGetter("minutes");var hours=makeGetter("hours");var days=makeGetter("days");var months=makeGetter("months");var years=makeGetter("years");function weeks(){return absFloor(this.days()/7)}var round=Math.round;var thresholds={s:45,m:45,h:22,d:26,M:11};function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function duration_humanize__relativeTime(posNegDuration,withoutSuffix,locale){var duration=create__createDuration(posNegDuration).abs();var seconds=round(duration.as("s"));var minutes=round(duration.as("m"));var hours=round(duration.as("h"));var days=round(duration.as("d"));var months=round(duration.as("M"));var years=round(duration.as("y"));var a=seconds<thresholds.s&&["s",seconds]||minutes===1&&["m"]||minutes<thresholds.m&&["mm",minutes]||hours===1&&["h"]||hours<thresholds.h&&["hh",hours]||days===1&&["d"]||days<thresholds.d&&["dd",days]||months===1&&["M"]||months<thresholds.M&&["MM",months]||years===1&&["y"]||["yy",years];a[2]=withoutSuffix;a[3]=+posNegDuration>0;a[4]=locale;return substituteTimeAgo.apply(null,a)}function duration_humanize__getSetRelativeTimeThreshold(threshold,limit){if(thresholds[threshold]===undefined){return false}if(limit===undefined){return thresholds[threshold]}thresholds[threshold]=limit;return true}function humanize(withSuffix){var locale=this.localeData();var output=duration_humanize__relativeTime(this,!withSuffix,locale);if(withSuffix){output=locale.pastFuture(+this,output)}return locale.postformat(output)}var iso_string__abs=Math.abs;function iso_string__toISOString(){var seconds=iso_string__abs(this._milliseconds)/1e3;var days=iso_string__abs(this._days);var months=iso_string__abs(this._months);var minutes,hours,years;minutes=absFloor(seconds/60);hours=absFloor(minutes/60);seconds%=60;minutes%=60;years=absFloor(months/12);months%=12;var Y=years;var M=months;var D=days;var h=hours;var m=minutes;var s=seconds;var total=this.asSeconds();if(!total){return"P0D"}return(total<0?"-":"")+"P"+(Y?Y+"Y":"")+(M?M+"M":"")+(D?D+"D":"")+(h||m||s?"T":"")+(h?h+"H":"")+(m?m+"M":"")+(s?s+"S":"")}var duration_prototype__proto=Duration.prototype;duration_prototype__proto.abs=duration_abs__abs;duration_prototype__proto.add=duration_add_subtract__add;duration_prototype__proto.subtract=duration_add_subtract__subtract;duration_prototype__proto.as=as;duration_prototype__proto.asMilliseconds=asMilliseconds;duration_prototype__proto.asSeconds=asSeconds;duration_prototype__proto.asMinutes=asMinutes;duration_prototype__proto.asHours=asHours;duration_prototype__proto.asDays=asDays;duration_prototype__proto.asWeeks=asWeeks;duration_prototype__proto.asMonths=asMonths;duration_prototype__proto.asYears=asYears;duration_prototype__proto.valueOf=duration_as__valueOf;duration_prototype__proto._bubble=bubble;duration_prototype__proto.get=duration_get__get;duration_prototype__proto.milliseconds=milliseconds;duration_prototype__proto.seconds=seconds;duration_prototype__proto.minutes=minutes;duration_prototype__proto.hours=hours;duration_prototype__proto.days=days;duration_prototype__proto.weeks=weeks;duration_prototype__proto.months=months;duration_prototype__proto.years=years;duration_prototype__proto.humanize=humanize;duration_prototype__proto.toISOString=iso_string__toISOString;duration_prototype__proto.toString=iso_string__toISOString;duration_prototype__proto.toJSON=iso_string__toISOString;duration_prototype__proto.locale=locale;duration_prototype__proto.localeData=localeData;duration_prototype__proto.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",iso_string__toISOString);duration_prototype__proto.lang=lang;addFormatToken("X",0,0,"unix");addFormatToken("x",0,0,"valueOf");addRegexToken("x",matchSigned);addRegexToken("X",matchTimestamp);addParseToken("X",function(input,array,config){config._d=new Date(parseFloat(input,10)*1e3)});addParseToken("x",function(input,array,config){config._d=new Date(toInt(input))});utils_hooks__hooks.version="2.10.6";setHookCallback(local__createLocal);utils_hooks__hooks.fn=momentPrototype;utils_hooks__hooks.min=min;utils_hooks__hooks.max=max;utils_hooks__hooks.utc=create_utc__createUTC;utils_hooks__hooks.unix=moment__createUnix;utils_hooks__hooks.months=lists__listMonths;utils_hooks__hooks.isDate=isDate;utils_hooks__hooks.locale=locale_locales__getSetGlobalLocale;utils_hooks__hooks.invalid=valid__createInvalid;utils_hooks__hooks.duration=create__createDuration;utils_hooks__hooks.isMoment=isMoment;utils_hooks__hooks.weekdays=lists__listWeekdays;utils_hooks__hooks.parseZone=moment__createInZone;utils_hooks__hooks.localeData=locale_locales__getLocale;utils_hooks__hooks.isDuration=isDuration;utils_hooks__hooks.monthsShort=lists__listMonthsShort;utils_hooks__hooks.weekdaysMin=lists__listWeekdaysMin;utils_hooks__hooks.defineLocale=defineLocale;utils_hooks__hooks.weekdaysShort=lists__listWeekdaysShort;utils_hooks__hooks.normalizeUnits=normalizeUnits;utils_hooks__hooks.relativeTimeThreshold=duration_humanize__getSetRelativeTimeThreshold;var _moment=utils_hooks__hooks;return _moment})},{}],47:[function(require,module,exports){(function(global){(function(){"use strict";var object=Object,array=Array,regexp=RegExp,date=Date,string=String,number=Number,math=Math,Undefined;var globalContext=typeof global!=="undefined"?global:this;var internalToString=object.prototype.toString;var internalHasOwnProperty=object.prototype.hasOwnProperty;var definePropertySupport=object.defineProperty&&object.defineProperties;var regexIsFunction=typeof regexp()==="function";var noKeysInStringObjects=!("0"in new string("a"));var typeChecks={};var matchedByValueReg=/^\[object Date|Array|String|Number|RegExp|Boolean|Arguments\]$/;var ClassNames="Boolean,Number,String,Array,Date,RegExp,Function".split(",");var isBoolean=buildPrimitiveClassCheck("boolean",ClassNames[0]);var isNumber=buildPrimitiveClassCheck("number",ClassNames[1]);var isString=buildPrimitiveClassCheck("string",ClassNames[2]);var isArray=buildClassCheck(ClassNames[3]);var isDate=buildClassCheck(ClassNames[4]);var isRegExp=buildClassCheck(ClassNames[5]);var isFunction=buildClassCheck(ClassNames[6]);function isClass(obj,klass,cached){var k=cached||className(obj);return k==="[object "+klass+"]"}function buildClassCheck(klass){var fn=klass==="Array"&&array.isArray||function(obj,cached){return isClass(obj,klass,cached)};typeChecks[klass]=fn;return fn}function buildPrimitiveClassCheck(type,klass){var fn=function(obj){if(isObjectType(obj)){return isClass(obj,klass)}return typeof obj===type};typeChecks[klass]=fn;return fn}function className(obj){return internalToString.call(obj)}function initializeClasses(){initializeClass(object);iterateOverObject(ClassNames,function(i,name){initializeClass(globalContext[name])})}function initializeClass(klass){if(klass["SugarMethods"])return;defineProperty(klass,"SugarMethods",{});extend(klass,false,true,{extend:function(methods,override,instance){extend(klass,instance!==false,override,methods)},sugarRestore:function(){return batchMethodExecute(this,klass,arguments,function(target,name,m){defineProperty(target,name,m.method)})},sugarRevert:function(){return batchMethodExecute(this,klass,arguments,function(target,name,m){if(m["existed"]){defineProperty(target,name,m["original"])}else{delete target[name]}})}})}function extend(klass,instance,override,methods){var extendee=instance?klass.prototype:klass;initializeClass(klass);iterateOverObject(methods,function(name,extendedFn){var nativeFn=extendee[name],existed=hasOwnProperty(extendee,name);if(isFunction(override)&&nativeFn){extendedFn=wrapNative(nativeFn,extendedFn,override)}if(override!==false||!nativeFn){defineProperty(extendee,name,extendedFn)}klass["SugarMethods"][name]={method:extendedFn,existed:existed,original:nativeFn,instance:instance}})}function extendSimilar(klass,instance,override,set,fn){var methods={};set=isString(set)?set.split(","):set;set.forEach(function(name,i){fn(methods,name,i)});extend(klass,instance,override,methods)}function batchMethodExecute(target,klass,args,fn){var all=args.length===0,methods=multiArgs(args),changed=false;iterateOverObject(klass["SugarMethods"],function(name,m){if(all||methods.indexOf(name)!==-1){changed=true;fn(m["instance"]?target.prototype:target,name,m)}});return changed}function wrapNative(nativeFn,extendedFn,condition){return function(a){return condition.apply(this,arguments)?extendedFn.apply(this,arguments):nativeFn.apply(this,arguments)}}function defineProperty(target,name,method){if(definePropertySupport){object.defineProperty(target,name,{value:method,configurable:true,enumerable:false,writable:true})}else{target[name]=method}}function multiArgs(args,fn,from){var result=[],i=from||0,len;for(len=args.length;i<len;i++){result.push(args[i]);if(fn)fn.call(args,args[i],i)}return result}function flattenedArgs(args,fn,from){var arg=args[from||0];if(isArray(arg)){args=arg;from=0}return multiArgs(args,fn,from)}function checkCallback(fn){if(!fn||!fn.call){throw new TypeError("Callback is not callable")}}function isDefined(o){return o!==Undefined}function isUndefined(o){return o===Undefined}function hasProperty(obj,prop){return!isPrimitiveType(obj)&&prop in obj}function hasOwnProperty(obj,prop){return!!obj&&internalHasOwnProperty.call(obj,prop)}function isObjectType(obj){return!!obj&&(typeof obj==="object"||regexIsFunction&&isRegExp(obj))}function isPrimitiveType(obj){var type=typeof obj;return obj==null||type==="string"||type==="number"||type==="boolean"}function isPlainObject(obj,klass){klass=klass||className(obj);try{if(obj&&obj.constructor&&!hasOwnProperty(obj,"constructor")&&!hasOwnProperty(obj.constructor.prototype,"isPrototypeOf")){return false}}catch(e){return false}return!!obj&&klass==="[object Object]"&&"hasOwnProperty"in obj}function iterateOverObject(obj,fn){var key;for(key in obj){if(!hasOwnProperty(obj,key))continue;if(fn.call(obj,key,obj[key],obj)===false)break}}function simpleRepeat(n,fn){for(var i=0;i<n;i++){fn(i)}}function simpleMerge(target,source){iterateOverObject(source,function(key){target[key]=source[key]});return target}function coercePrimitiveToObject(obj){if(isPrimitiveType(obj)){obj=object(obj)}if(noKeysInStringObjects&&isString(obj)){forceStringCoercion(obj)}return obj}function forceStringCoercion(obj){var i=0,chr;while(chr=obj.charAt(i)){obj[i++]=chr}}function Hash(obj){simpleMerge(this,coercePrimitiveToObject(obj))}Hash.prototype.constructor=object;var abs=math.abs;var pow=math.pow;var ceil=math.ceil;var floor=math.floor;var round=math.round;var min=math.min;var max=math.max;function withPrecision(val,precision,fn){var multiplier=pow(10,abs(precision||0));fn=fn||round;if(precision<0)multiplier=1/multiplier;return fn(val*multiplier)/multiplier}var HalfWidthZeroCode=48;var HalfWidthNineCode=57;var FullWidthZeroCode=65296;var FullWidthNineCode=65305;var HalfWidthPeriod=".";var FullWidthPeriod="";var HalfWidthComma=",";var FullWidthDigits="";var NumberNormalizeMap={};var NumberNormalizeReg;function codeIsNumeral(code){return code>=HalfWidthZeroCode&&code<=HalfWidthNineCode||code>=FullWidthZeroCode&&code<=FullWidthNineCode}function buildNumberHelpers(){var digit,i;for(i=0;i<=9;i++){digit=chr(i+FullWidthZeroCode);FullWidthDigits+=digit;NumberNormalizeMap[digit]=chr(i+HalfWidthZeroCode)}NumberNormalizeMap[HalfWidthComma]="";NumberNormalizeMap[FullWidthPeriod]=HalfWidthPeriod;NumberNormalizeMap[HalfWidthPeriod]=HalfWidthPeriod;NumberNormalizeReg=regexp("["+FullWidthDigits+FullWidthPeriod+HalfWidthComma+HalfWidthPeriod+"]","g")}function chr(num){return string.fromCharCode(num)}function getTrimmableCharacters(){return"	\n\x0B\f\r \u2028\u2029\ufeff"}function repeatString(str,num){var result="",str=str.toString();while(num>0){if(num&1){result+=str}if(num>>=1){str+=str}}return result}function stringToNumber(str,base){var sanitized,isDecimal;sanitized=str.replace(NumberNormalizeReg,function(chr){var replacement=NumberNormalizeMap[chr];if(replacement===HalfWidthPeriod){isDecimal=true}return replacement});return isDecimal?parseFloat(sanitized):parseInt(sanitized,base||10)}function padNumber(num,place,sign,base){var str=abs(num).toString(base||10);str=repeatString("0",place-str.replace(/\.\d+/,"").length)+str;if(sign||num<0){str=(num<0?"-":"+")+str}return str}function getOrdinalizedSuffix(num){if(num>=11&&num<=13){return"th"}else{switch(num%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}}function getRegExpFlags(reg,add){var flags="";add=add||"";function checkFlag(prop,flag){if(prop||add.indexOf(flag)>-1){flags+=flag}}checkFlag(reg.multiline,"m");checkFlag(reg.ignoreCase,"i");checkFlag(reg.global,"g");checkFlag(reg.sticky,"y");return flags}function escapeRegExp(str){if(!isString(str))str=string(str);return str.replace(/([\\/\'*+?|()\[\]{}.^$])/g,"\\$1")}function callDateGet(d,method){return d["get"+(d._utc?"UTC":"")+method]()}function callDateSet(d,method,value){return d["set"+(d._utc&&method!="ISOWeek"?"UTC":"")+method](value)}function stringify(thing,stack){var type=typeof thing,thingIsObject,thingIsArray,klass,value,arr,key,i,len;if(type==="string")return thing;klass=internalToString.call(thing);thingIsObject=isPlainObject(thing,klass);thingIsArray=isArray(thing,klass);if(thing!=null&&thingIsObject||thingIsArray){if(!stack)stack=[];if(stack.length>1){i=stack.length;while(i--){if(stack[i]===thing){return"CYC"}}}stack.push(thing);value=thing.valueOf()+string(thing.constructor);arr=thingIsArray?thing:object.keys(thing).sort();for(i=0,len=arr.length;i<len;i++){key=thingIsArray?i:arr[i];value+=key+stringify(thing[key],stack)}stack.pop()}else if(1/thing===-Infinity){value="-0"}else{value=string(thing&&thing.valueOf?thing.valueOf():thing)}return type+klass+value}function isEqual(a,b){if(a===b){return a!==0||1/a===1/b}else if(objectIsMatchedByValue(a)&&objectIsMatchedByValue(b)){return stringify(a)===stringify(b)}return false}function objectIsMatchedByValue(obj){var klass=className(obj);return matchedByValueReg.test(klass)||isPlainObject(obj,klass)}function getEntriesForIndexes(obj,args,isString){var result,length=obj.length,argsLen=args.length,overshoot=args[argsLen-1]!==false,multiple=argsLen>(overshoot?1:2);if(!multiple){return entryAtIndex(obj,length,args[0],overshoot,isString)}result=[];multiArgs(args,function(index){if(isBoolean(index))return false;result.push(entryAtIndex(obj,length,index,overshoot,isString))});return result}function entryAtIndex(obj,length,index,overshoot,isString){if(overshoot){index=index%length;if(index<0)index=length+index}return isString?obj.charAt(index):obj[index]}function buildObjectInstanceMethods(set,target){extendSimilar(target,true,false,set,function(methods,name){methods[name+(name==="equal"?"s":"")]=function(){return object[name].apply(null,[this].concat(multiArgs(arguments)))}})}initializeClasses();buildNumberHelpers();extend(object,false,false,{keys:function(obj){var keys=[];if(!isObjectType(obj)&&!isRegExp(obj)&&!isFunction(obj)){throw new TypeError("Object required")}iterateOverObject(obj,function(key,value){keys.push(key)});return keys}});function arrayIndexOf(arr,search,fromIndex,increment){var length=arr.length,fromRight=increment==-1,start=fromRight?length-1:0,index=toIntegerWithDefault(fromIndex,start);if(index<0){index=length+index}if(!fromRight&&index<0||fromRight&&index>=length){index=start}while(fromRight&&index>=0||!fromRight&&index<length){if(arr[index]===search){return index}index+=increment}return-1}function arrayReduce(arr,fn,initialValue,fromRight){var length=arr.length,count=0,defined=isDefined(initialValue),result,index;checkCallback(fn);if(length==0&&!defined){throw new TypeError("Reduce called on empty array with no initial value")}else if(defined){result=initialValue}else{result=arr[fromRight?length-1:count];count++}while(count<length){index=fromRight?length-count-1:count;if(index in arr){result=fn(result,arr[index],index,arr)}count++}return result}function toIntegerWithDefault(i,d){if(isNaN(i)){return d}else{return parseInt(i>>0)}}function checkFirstArgumentExists(args){
if(args.length===0){throw new TypeError("First argument must be defined")}}extend(array,false,false,{isArray:function(obj){return isArray(obj)}});extend(array,true,false,{every:function(fn,scope){var length=this.length,index=0;checkFirstArgumentExists(arguments);while(index<length){if(index in this&&!fn.call(scope,this[index],index,this)){return false}index++}return true},some:function(fn,scope){var length=this.length,index=0;checkFirstArgumentExists(arguments);while(index<length){if(index in this&&fn.call(scope,this[index],index,this)){return true}index++}return false},map:function(fn,scope){var scope=arguments[1],length=this.length,index=0,result=new Array(length);checkFirstArgumentExists(arguments);while(index<length){if(index in this){result[index]=fn.call(scope,this[index],index,this)}index++}return result},filter:function(fn){var scope=arguments[1];var length=this.length,index=0,result=[];checkFirstArgumentExists(arguments);while(index<length){if(index in this&&fn.call(scope,this[index],index,this)){result.push(this[index])}index++}return result},indexOf:function(search){var fromIndex=arguments[1];if(isString(this))return this.indexOf(search,fromIndex);return arrayIndexOf(this,search,fromIndex,1)},lastIndexOf:function(search){var fromIndex=arguments[1];if(isString(this))return this.lastIndexOf(search,fromIndex);return arrayIndexOf(this,search,fromIndex,-1)},forEach:function(fn){var length=this.length,index=0,scope=arguments[1];checkCallback(fn);while(index<length){if(index in this){fn.call(scope,this[index],index,this)}index++}},reduce:function(fn){return arrayReduce(this,fn,arguments[1])},reduceRight:function(fn){return arrayReduce(this,fn,arguments[1],true)}});function buildTrim(){var support=getTrimmableCharacters().match(/^\s+$/);try{string.prototype.trim.call([1])}catch(e){support=false}extend(string,true,!support,{trim:function(){return this.toString().trimLeft().trimRight()},trimLeft:function(){return this.replace(regexp("^["+getTrimmableCharacters()+"]+"),"")},trimRight:function(){return this.replace(regexp("["+getTrimmableCharacters()+"]+$"),"")}})}extend(Function,true,false,{bind:function(scope){var fn=this,args=multiArgs(arguments,null,1),bound;if(!isFunction(this)){throw new TypeError("Function.prototype.bind called on a non-function")}bound=function(){return fn.apply(fn.prototype&&this instanceof fn?this:scope,args.concat(multiArgs(arguments)))};bound.prototype=this.prototype;return bound}});extend(date,false,false,{now:function(){return(new date).getTime()}});function buildISOString(){var d=new date(date.UTC(1999,11,31)),target="1999-12-31T00:00:00.000Z";var support=d.toISOString&&d.toISOString()===target;extendSimilar(date,true,!support,"toISOString,toJSON",function(methods,name){methods[name]=function(){return padNumber(this.getUTCFullYear(),4)+"-"+padNumber(this.getUTCMonth()+1,2)+"-"+padNumber(this.getUTCDate(),2)+"T"+padNumber(this.getUTCHours(),2)+":"+padNumber(this.getUTCMinutes(),2)+":"+padNumber(this.getUTCSeconds(),2)+"."+padNumber(this.getUTCMilliseconds(),3)+"Z"}})}buildTrim();buildISOString();function regexMatcher(reg){reg=regexp(reg);return function(el){return reg.test(el)}}function dateMatcher(d){var ms=d.getTime();return function(el){return!!(el&&el.getTime)&&el.getTime()===ms}}function functionMatcher(fn){return function(el,i,arr){return el===fn||fn.call(this,el,i,arr)}}function invertedArgsFunctionMatcher(fn){return function(value,key,obj){return value===fn||fn.call(obj,key,value,obj)}}function fuzzyMatcher(obj,isObject){var matchers={};return function(el,i,arr){var key;if(!isObjectType(el)){return false}for(key in obj){matchers[key]=matchers[key]||getMatcher(obj[key],isObject);if(matchers[key].call(arr,el[key],i,arr)===false){return false}}return true}}function defaultMatcher(f){return function(el){return el===f||isEqual(el,f)}}function getMatcher(f,isObject){if(isPrimitiveType(f)){}else if(isRegExp(f)){return regexMatcher(f)}else if(isDate(f)){return dateMatcher(f)}else if(isFunction(f)){if(isObject){return invertedArgsFunctionMatcher(f)}else{return functionMatcher(f)}}else if(isPlainObject(f)){return fuzzyMatcher(f,isObject)}return defaultMatcher(f)}function transformArgument(el,map,context,mapArgs){if(!map){return el}else if(map.apply){return map.apply(context,mapArgs||[])}else if(isFunction(el[map])){return el[map].call(el)}else{return el[map]}}function arrayEach(arr,fn,startIndex,loop){var index,i,length=+arr.length;if(startIndex<0)startIndex=arr.length+startIndex;i=isNaN(startIndex)?0:startIndex;if(loop===true){length+=i}while(i<length){index=i%arr.length;if(!(index in arr)){return iterateOverSparseArray(arr,fn,i,loop)}else if(fn.call(arr,arr[index],index,arr)===false){break}i++}}function iterateOverSparseArray(arr,fn,fromIndex,loop){var indexes=[],i;for(i in arr){if(isArrayIndex(arr,i)&&i>=fromIndex){indexes.push(parseInt(i))}}indexes.sort().each(function(index){return fn.call(arr,arr[index],index,arr)});return arr}function isArrayIndex(arr,i){return i in arr&&toUInt32(i)==i&&i!=4294967295}function toUInt32(i){return i>>>0}function arrayFind(arr,f,startIndex,loop,returnIndex,context){var result,index,matcher;if(arr.length>0){matcher=getMatcher(f);arrayEach(arr,function(el,i){if(matcher.call(context,el,i,arr)){result=el;index=i;return false}},startIndex,loop)}return returnIndex?index:result}function arrayUnique(arr,map){var result=[],o={},transformed;arrayEach(arr,function(el,i){transformed=map?transformArgument(el,map,arr,[el,i,arr]):el;if(!checkForElementInHashAndSet(o,transformed)){result.push(el)}});return result}function arrayIntersect(arr1,arr2,subtract){var result=[],o={};arr2.each(function(el){checkForElementInHashAndSet(o,el)});arr1.each(function(el){var stringified=stringify(el),isReference=!objectIsMatchedByValue(el);if(elementExistsInHash(o,stringified,el,isReference)!==subtract){discardElementFromHash(o,stringified,el,isReference);result.push(el)}});return result}function arrayFlatten(arr,level,current){level=level||Infinity;current=current||0;var result=[];arrayEach(arr,function(el){if(isArray(el)&&current<level){result=result.concat(arrayFlatten(el,level,current+1))}else{result.push(el)}});return result}function isArrayLike(obj){return hasProperty(obj,"length")&&!isString(obj)&&!isPlainObject(obj)}function isArgumentsObject(obj){return hasProperty(obj,"length")&&(className(obj)==="[object Arguments]"||!!obj.callee)}function flatArguments(args){var result=[];multiArgs(args,function(arg){result=result.concat(arg)});return result}function elementExistsInHash(hash,key,element,isReference){var exists=key in hash;if(isReference){if(!hash[key]){hash[key]=[]}exists=hash[key].indexOf(element)!==-1}return exists}function checkForElementInHashAndSet(hash,element){var stringified=stringify(element),isReference=!objectIsMatchedByValue(element),exists=elementExistsInHash(hash,stringified,element,isReference);if(isReference){hash[stringified].push(element)}else{hash[stringified]=element}return exists}function discardElementFromHash(hash,key,element,isReference){var arr,i=0;if(isReference){arr=hash[key];while(i<arr.length){if(arr[i]===element){arr.splice(i,1)}else{i+=1}}}else{delete hash[key]}}function getMinOrMax(obj,map,which,all){var el,key,edge,test,result=[],max=which==="max",min=which==="min",isArray=array.isArray(obj);for(key in obj){if(!obj.hasOwnProperty(key))continue;el=obj[key];test=transformArgument(el,map,obj,isArray?[el,parseInt(key),obj]:[]);if(isUndefined(test)){throw new TypeError("Cannot compare with undefined")}if(test===edge){result.push(el)}else if(isUndefined(edge)||max&&test>edge||min&&test<edge){result=[el];edge=test}}if(!isArray)result=arrayFlatten(result,1);return all?result:result[0]}function collateStrings(a,b){var aValue,bValue,aChar,bChar,aEquiv,bEquiv,index=0,tiebreaker=0;var sortIgnore=array[AlphanumericSortIgnore];var sortIgnoreCase=array[AlphanumericSortIgnoreCase];var sortEquivalents=array[AlphanumericSortEquivalents];var sortOrder=array[AlphanumericSortOrder];var naturalSort=array[AlphanumericSortNatural];a=getCollationReadyString(a,sortIgnore,sortIgnoreCase);b=getCollationReadyString(b,sortIgnore,sortIgnoreCase);do{aChar=getCollationCharacter(a,index,sortEquivalents);bChar=getCollationCharacter(b,index,sortEquivalents);aValue=getSortOrderIndex(aChar,sortOrder);bValue=getSortOrderIndex(bChar,sortOrder);if(aValue===-1||bValue===-1){aValue=a.charCodeAt(index)||null;bValue=b.charCodeAt(index)||null;if(naturalSort&&codeIsNumeral(aValue)&&codeIsNumeral(bValue)){aValue=stringToNumber(a.slice(index));bValue=stringToNumber(b.slice(index))}}else{aEquiv=aChar!==a.charAt(index);bEquiv=bChar!==b.charAt(index);if(aEquiv!==bEquiv&&tiebreaker===0){tiebreaker=aEquiv-bEquiv}}index+=1}while(aValue!=null&&bValue!=null&&aValue===bValue);if(aValue===bValue)return tiebreaker;return aValue-bValue}function getCollationReadyString(str,sortIgnore,sortIgnoreCase){if(!isString(str))str=string(str);if(sortIgnoreCase){str=str.toLowerCase()}if(sortIgnore){str=str.replace(sortIgnore,"")}return str}function getCollationCharacter(str,index,sortEquivalents){var chr=str.charAt(index);return sortEquivalents[chr]||chr}function getSortOrderIndex(chr,sortOrder){if(!chr){return null}else{return sortOrder.indexOf(chr)}}var AlphanumericSort="AlphanumericSort";var AlphanumericSortOrder="AlphanumericSortOrder";var AlphanumericSortIgnore="AlphanumericSortIgnore";var AlphanumericSortIgnoreCase="AlphanumericSortIgnoreCase";var AlphanumericSortEquivalents="AlphanumericSortEquivalents";var AlphanumericSortNatural="AlphanumericSortNatural";function buildEnhancements(){var nativeMap=array.prototype.map;var callbackCheck=function(){var args=arguments;return args.length>0&&!isFunction(args[0])};extendSimilar(array,true,callbackCheck,"every,all,some,filter,any,none,find,findIndex",function(methods,name){var nativeFn=array.prototype[name];methods[name]=function(f){var matcher=getMatcher(f);return nativeFn.call(this,function(el,index){return matcher(el,index,this)})}});extend(array,true,callbackCheck,{map:function(f){return nativeMap.call(this,function(el,index){return transformArgument(el,f,this,[el,index,this])})}})}function buildAlphanumericSort(){var order="ABCDEFGHIJKLMNOPQRSTUVWXYZ";var equiv="A,C,E,I,O,S,U";array[AlphanumericSortOrder]=order.split("").map(function(str){return str+str.toLowerCase()}).join("");var equivalents={};arrayEach(equiv.split(","),function(set){var equivalent=set.charAt(0);arrayEach(set.slice(1).split(""),function(chr){equivalents[chr]=equivalent;equivalents[chr.toLowerCase()]=equivalent.toLowerCase()})});array[AlphanumericSortNatural]=true;array[AlphanumericSortIgnoreCase]=true;array[AlphanumericSortEquivalents]=equivalents}extend(array,false,true,{create:function(){var result=[];multiArgs(arguments,function(a){if(isArgumentsObject(a)||isArrayLike(a)){a=array.prototype.slice.call(a,0)}result=result.concat(a)});return result}});extend(array,true,false,{find:function(f,context){checkCallback(f);return arrayFind(this,f,0,false,false,context)},findIndex:function(f,context){var index;checkCallback(f);index=arrayFind(this,f,0,false,true,context);return isUndefined(index)?-1:index}});extend(array,true,true,{findFrom:function(f,index,loop){return arrayFind(this,f,index,loop)},findIndexFrom:function(f,index,loop){var index=arrayFind(this,f,index,loop,true);return isUndefined(index)?-1:index},findAll:function(f,index,loop){var result=[],matcher;if(this.length>0){matcher=getMatcher(f);arrayEach(this,function(el,i,arr){if(matcher(el,i,arr)){result.push(el)}},index,loop)}return result},count:function(f){if(isUndefined(f))return this.length;return this.findAll(f).length},removeAt:function(start,end){if(isUndefined(start))return this;if(isUndefined(end))end=start;this.splice(start,end-start+1);return this},include:function(el,index){return this.clone().add(el,index)},exclude:function(){return array.prototype.remove.apply(this.clone(),arguments)},clone:function(){return simpleMerge([],this)},unique:function(map){return arrayUnique(this,map)},flatten:function(limit){return arrayFlatten(this,limit)},union:function(){return arrayUnique(this.concat(flatArguments(arguments)))},intersect:function(){return arrayIntersect(this,flatArguments(arguments),false)},subtract:function(a){return arrayIntersect(this,flatArguments(arguments),true)},at:function(){return getEntriesForIndexes(this,arguments)},first:function(num){if(isUndefined(num))return this[0];if(num<0)num=0;return this.slice(0,num)},last:function(num){if(isUndefined(num))return this[this.length-1];var start=this.length-num<0?0:this.length-num;return this.slice(start)},from:function(num){return this.slice(num)},to:function(num){if(isUndefined(num))num=this.length;return this.slice(0,num)},min:function(map,all){return getMinOrMax(this,map,"min",all)},max:function(map,all){return getMinOrMax(this,map,"max",all)},least:function(map,all){return getMinOrMax(this.groupBy.apply(this,[map]),"length","min",all)},most:function(map,all){return getMinOrMax(this.groupBy.apply(this,[map]),"length","max",all)},sum:function(map){var arr=map?this.map(map):this;return arr.length>0?arr.reduce(function(a,b){return a+b}):0},average:function(map){var arr=map?this.map(map):this;return arr.length>0?arr.sum()/arr.length:0},inGroups:function(num,padding){var pad=arguments.length>1;var arr=this;var result=[];var divisor=ceil(this.length/num);simpleRepeat(num,function(i){var index=i*divisor;var group=arr.slice(index,index+divisor);if(pad&&group.length<divisor){simpleRepeat(divisor-group.length,function(){group=group.add(padding)})}result.push(group)});return result},inGroupsOf:function(num,padding){var result=[],len=this.length,arr=this,group;if(len===0||num===0)return arr;if(isUndefined(num))num=1;if(isUndefined(padding))padding=null;simpleRepeat(ceil(len/num),function(i){group=arr.slice(num*i,num*i+num);while(group.length<num){group.push(padding)}result.push(group)});return result},isEmpty:function(){return this.compact().length==0},sortBy:function(map,desc){var arr=this.clone();arr.sort(function(a,b){var aProperty,bProperty,comp;aProperty=transformArgument(a,map,arr,[a]);bProperty=transformArgument(b,map,arr,[b]);if(isString(aProperty)&&isString(bProperty)){comp=collateStrings(aProperty,bProperty)}else if(aProperty<bProperty){comp=-1}else if(aProperty>bProperty){comp=1}else{comp=0}return comp*(desc?-1:1)});return arr},randomize:function(){var arr=this.concat(),i=arr.length,j,x;while(i){j=math.random()*i|0;x=arr[--i];arr[i]=arr[j];arr[j]=x}return arr},zip:function(){var args=multiArgs(arguments);return this.map(function(el,i){return[el].concat(args.map(function(k){return i in k?k[i]:null}))})},sample:function(num){var arr=this.randomize();return arguments.length>0?arr.slice(0,num):arr[0]},each:function(fn,index,loop){arrayEach(this,fn,index,loop);return this},add:function(el,index){if(!isNumber(number(index))||isNaN(index))index=this.length;array.prototype.splice.apply(this,[index,0].concat(el));return this},remove:function(){var arr=this;multiArgs(arguments,function(f){var i=0,matcher=getMatcher(f);while(i<arr.length){if(matcher(arr[i],i,arr)){arr.splice(i,1)}else{i++}}});return arr},compact:function(all){var result=[];arrayEach(this,function(el,i){if(isArray(el)){result.push(el.compact())}else if(all&&el){result.push(el)}else if(!all&&el!=null&&el.valueOf()===el.valueOf()){result.push(el)}});return result},groupBy:function(map,fn){var arr=this,result={},key;arrayEach(arr,function(el,index){key=transformArgument(el,map,arr,[el,index,arr]);if(!result[key])result[key]=[];result[key].push(el)});if(fn){iterateOverObject(result,fn)}return result},none:function(){return!this.any.apply(this,arguments)}});extend(array,true,true,{all:array.prototype.every,any:array.prototype.some,insert:array.prototype.add});function keysWithObjectCoercion(obj){return object.keys(coercePrimitiveToObject(obj))}function buildEnumerableMethods(names,mapping){extendSimilar(object,false,true,names,function(methods,name){methods[name]=function(obj,arg1,arg2){var result,coerced=keysWithObjectCoercion(obj),matcher;if(!mapping){matcher=getMatcher(arg1,true)}result=array.prototype[name].call(coerced,function(key){var value=obj[key];if(mapping){return transformArgument(value,arg1,obj,[key,value,obj])}else{return matcher(value,key,obj)}},arg2);if(isArray(result)){result=result.reduce(function(o,key,i){o[key]=obj[key];return o},{})}return result}});buildObjectInstanceMethods(names,Hash)}function exportSortAlgorithm(){array[AlphanumericSort]=collateStrings}extend(object,false,true,{map:function(obj,map){var result={},key,value;for(key in obj){if(!hasOwnProperty(obj,key))continue;value=obj[key];result[key]=transformArgument(value,map,obj,[key,value,obj])}return result},reduce:function(obj){var values=keysWithObjectCoercion(obj).map(function(key){return obj[key]});return values.reduce.apply(values,multiArgs(arguments,null,1))},each:function(obj,fn){checkCallback(fn);iterateOverObject(obj,fn);return obj},size:function(obj){return keysWithObjectCoercion(obj).length}});var EnumerableFindingMethods="any,all,none,count,find,findAll,isEmpty".split(",");var EnumerableMappingMethods="sum,average,min,max,least,most".split(",");var EnumerableOtherMethods="map,reduce,size".split(",");var EnumerableMethods=EnumerableFindingMethods.concat(EnumerableMappingMethods).concat(EnumerableOtherMethods);buildEnhancements();buildAlphanumericSort();buildEnumerableMethods(EnumerableFindingMethods);buildEnumerableMethods(EnumerableMappingMethods,true);buildObjectInstanceMethods(EnumerableOtherMethods,Hash);exportSortAlgorithm();var English;var CurrentLocalization;var TimeFormat=["ampm","hour","minute","second","ampm","utc","offset_sign","offset_hours","offset_minutes","ampm"];var DecimalReg="(?:[,.]\\d+)?";var HoursReg="\\d{1,2}"+DecimalReg;var SixtyReg="[0-5]\\d"+DecimalReg;var RequiredTime="({t})?\\s*("+HoursReg+")(?:{h}("+SixtyReg+")?{m}(?::?("+SixtyReg+"){s})?\\s*(?:({t})|(Z)|(?:([+-])(\\d{2,2})(?::?(\\d{2,2}))?)?)?|\\s*({t}))";var KanjiDigits="";var AsianDigitMap={};var AsianDigitReg;var DateArgumentUnits;var DateUnitsReversed;var CoreDateFormats=[];var CompiledOutputFormats={};var DateFormatTokens={yyyy:function(d){return callDateGet(d,"FullYear")},yy:function(d){return callDateGet(d,"FullYear")%100},ord:function(d){var date=callDateGet(d,"Date");return date+getOrdinalizedSuffix(date)},tz:function(d){return d.getUTCOffset()},isotz:function(d){return d.getUTCOffset(true)},Z:function(d){return d.getUTCOffset()},ZZ:function(d){return d.getUTCOffset().replace(/(\d{2})$/,":$1")}};var DateUnits=[{name:"year",method:"FullYear",ambiguous:true,multiplier:function(d){var adjust=d?d.isLeapYear()?1:0:.25;return(365+adjust)*24*60*60*1e3}},{name:"month",error:.919,method:"Month",ambiguous:true,multiplier:function(d,ms){var days=30.4375,inMonth;if(d){inMonth=d.daysInMonth();if(ms<=inMonth.days()){days=inMonth}}return days*24*60*60*1e3}},{name:"week",method:"ISOWeek",multiplier:function(){return 7*24*60*60*1e3}},{name:"day",error:.958,method:"Date",ambiguous:true,multiplier:function(){return 24*60*60*1e3}},{name:"hour",method:"Hours",multiplier:function(){return 60*60*1e3}},{name:"minute",method:"Minutes",multiplier:function(){return 60*1e3}},{name:"second",method:"Seconds",multiplier:function(){return 1e3}},{name:"millisecond",method:"Milliseconds",multiplier:function(){return 1}}];var Localizations={};function Localization(l){simpleMerge(this,l);this.compiledFormats=CoreDateFormats.concat()}Localization.prototype={getMonth:function(n){if(isNumber(n)){return n-1}else{return this["months"].indexOf(n)%12}},getWeekday:function(n){return this["weekdays"].indexOf(n)%7},getNumber:function(n){var i;if(isNumber(n)){return n}else if(n&&(i=this["numbers"].indexOf(n))!==-1){return(i+1)%10}else{return 1}},getNumericDate:function(n){var self=this;return n.replace(regexp(this["num"],"g"),function(d){var num=self.getNumber(d);return num||""})},getUnitIndex:function(n){return this["units"].indexOf(n)%8},getRelativeFormat:function(adu){return this.convertAdjustedToFormat(adu,adu[2]>0?"future":"past")},getDuration:function(ms){return this.convertAdjustedToFormat(getAdjustedUnit(ms),"duration")},hasVariant:function(code){code=code||this.code;return code==="en"||code==="en-US"?true:this["variant"]},matchAM:function(str){return str===this["ampm"][0]},matchPM:function(str){return str&&str===this["ampm"][1]},convertAdjustedToFormat:function(adu,mode){var sign,unit,mult,num=adu[0],u=adu[1],ms=adu[2],format=this[mode]||this["relative"];if(isFunction(format)){return format.call(this,num,u,ms,mode)}mult=this["plural"]&&num>1?1:0;unit=this["units"][mult*8+u]||this["units"][u];if(this["capitalizeUnit"])unit=simpleCapitalize(unit);sign=this["modifiers"].filter(function(m){return m.name=="sign"&&m.value==(ms>0?1:-1)})[0];return format.replace(/\{(.*?)\}/g,function(full,match){switch(match){case"num":return num;case"unit":return unit;case"sign":return sign.src}})},getFormats:function(){return this.cachedFormat?[this.cachedFormat].concat(this.compiledFormats):this.compiledFormats},addFormat:function(src,allowsTime,match,variant,iso){var to=match||[],loc=this,time,timeMarkers,lastIsNumeral;src=src.replace(/\s+/g,"[,. ]*");src=src.replace(/\{([^,]+?)\}/g,function(all,k){var value,arr,result,opt=k.match(/\?$/),nc=k.match(/^(\d+)\??$/),slice=k.match(/(\d)(?:-(\d))?/),key=k.replace(/[^a-z]+$/,"");if(nc){value=loc["tokens"][nc[1]]}else if(loc[key]){value=loc[key]}else if(loc[key+"s"]){value=loc[key+"s"];if(slice){arr=[];value.forEach(function(m,i){var mod=i%(loc["units"]?8:value.length);if(mod>=slice[1]&&mod<=(slice[2]||slice[1])){arr.push(m)}});value=arr}value=arrayToAlternates(value)}if(nc){result="(?:"+value+")"}else{if(!match){to.push(key)}result="("+value+")"}if(opt){result+="?"}return result});if(allowsTime){time=prepareTime(RequiredTime,loc,iso);timeMarkers=["t","[\\s\\u3000]"].concat(loc["timeMarker"]);lastIsNumeral=src.match(/\\d\{\d,\d\}\)+\??$/);addDateInputFormat(loc,"(?:"+time+")[,\\s\\u3000]+?"+src,TimeFormat.concat(to),variant);addDateInputFormat(loc,src+"(?:[,\\s]*(?:"+timeMarkers.join("|")+(lastIsNumeral?"+":"*")+")"+time+")?",to.concat(TimeFormat),variant)}else{addDateInputFormat(loc,src,to,variant)}}};function getLocalization(localeCode,fallback){var loc;if(!isString(localeCode))localeCode="";loc=Localizations[localeCode]||Localizations[localeCode.slice(0,2)];if(fallback===false&&!loc){throw new TypeError("Invalid locale.")}return loc||CurrentLocalization}function setLocalization(localeCode,set){var loc,canAbbreviate;function initializeField(name){var val=loc[name];if(isString(val)){loc[name]=val.split(",")}else if(!val){loc[name]=[]}}function eachAlternate(str,fn){str=str.split("+").map(function(split){return split.replace(/(.+):(.+)$/,function(full,base,suffixes){return suffixes.split("|").map(function(suffix){return base+suffix}).join("|")})}).join("|");return str.split("|").forEach(fn)}function setArray(name,abbreviate,multiple){var arr=[];loc[name].forEach(function(full,i){if(abbreviate){full+="+"+full.slice(0,3)}eachAlternate(full,function(day,j){arr[j*multiple+i]=day.toLowerCase()})});loc[name]=arr}function getDigit(start,stop,allowNumbers){var str="\\d{"+start+","+stop+"}";if(allowNumbers)str+="|(?:"+arrayToAlternates(loc["numbers"])+")+";return str}function getNum(){var arr=["-?\\d+"].concat(loc["articles"]);if(loc["numbers"])arr=arr.concat(loc["numbers"]);return arrayToAlternates(arr)}function setDefault(name,value){loc[name]=loc[name]||value}function setModifiers(){var arr=[];loc.modifiersByName={};loc["modifiers"].push({name:"day",src:"yesterday",value:-1});loc["modifiers"].push({name:"day",src:"today",value:0});loc["modifiers"].push({name:"day",src:"tomorrow",value:1});loc["modifiers"].forEach(function(modifier){var name=modifier.name;eachAlternate(modifier.src,function(t){var locEntry=loc[name];loc.modifiersByName[t]=modifier;arr.push({name:name,src:t,value:modifier.value});loc[name]=locEntry?locEntry+"|"+t:t})});loc["day"]+="|"+arrayToAlternates(loc["weekdays"]);loc["modifiers"]=arr}loc=new Localization(set);initializeField("modifiers");"months,weekdays,units,numbers,articles,tokens,timeMarker,ampm,timeSuffixes,dateParse,timeParse".split(",").forEach(initializeField);canAbbreviate=!loc["monthSuffix"];setArray("months",canAbbreviate,12);setArray("weekdays",canAbbreviate,7);setArray("units",false,8);setArray("numbers",false,10);setDefault("code",localeCode);setDefault("date",getDigit(1,2,loc["digitDate"]));setDefault("year","'\\d{2}|"+getDigit(4,4));setDefault("num",getNum());setModifiers();if(loc["monthSuffix"]){loc["month"]=getDigit(1,2);loc["months"]="1,2,3,4,5,6,7,8,9,10,11,12".split(",").map(function(n){return n+loc["monthSuffix"]})}loc["full_month"]=getDigit(1,2)+"|"+arrayToAlternates(loc["months"]);if(loc["timeSuffixes"].length>0){loc.addFormat(prepareTime(RequiredTime,loc),false,TimeFormat)}loc.addFormat("{day}",true);loc.addFormat("{month}"+(loc["monthSuffix"]||""));loc.addFormat("{year}"+(loc["yearSuffix"]||""));loc["timeParse"].forEach(function(src){loc.addFormat(src,true)});loc["dateParse"].forEach(function(src){loc.addFormat(src)});return Localizations[localeCode]=loc}function addDateInputFormat(locale,format,match,variant){locale.compiledFormats.unshift({variant:variant,locale:locale,reg:regexp("^"+format+"$","i"),to:match})}function simpleCapitalize(str){return str.slice(0,1).toUpperCase()+str.slice(1)}function arrayToAlternates(arr){return arr.filter(function(el){return!!el}).join("|")}function getNewDate(){var fn=date.SugarNewDate;return fn?fn():new date}function collectDateArguments(args,allowDuration){var obj;if(isObjectType(args[0])){return args}else if(isNumber(args[0])&&!isNumber(args[1])){return[args[0]]}else if(isString(args[0])&&allowDuration){return[getDateParamsFromString(args[0]),args[1]]}obj={};DateArgumentUnits.forEach(function(u,i){obj[u.name]=args[i]});return[obj]}function getDateParamsFromString(str,num){var match,params={};match=str.match(/^(\d+)?\s?(\w+?)s?$/i);if(match){if(isUndefined(num)){num=parseInt(match[1])||1}params[match[2].toLowerCase()]=num}return params}function iterateOverDateUnits(fn,from,to){var i,unit;if(isUndefined(to))to=DateUnitsReversed.length;for(i=from||0;i<to;i++){unit=DateUnitsReversed[i];if(fn(unit.name,unit,i)===false){break}}}function getFormatMatch(match,arr){var obj={},value,num;arr.forEach(function(key,i){value=match[i+1];if(isUndefined(value)||value==="")return;if(key==="year"){obj.yearAsString=value.replace(/'/,"")}num=parseFloat(value.replace(/'/,"").replace(/,/,"."));obj[key]=!isNaN(num)?num:value.toLowerCase()});return obj}function cleanDateInput(str){str=str.trim().replace(/^just (?=now)|\.+$/i,"");return convertAsianDigits(str)}function convertAsianDigits(str){return str.replace(AsianDigitReg,function(full,disallowed,match){var sum=0,place=1,lastWasHolder,lastHolder;if(disallowed)return full;match.split("").reverse().forEach(function(letter){var value=AsianDigitMap[letter],holder=value>9;if(holder){if(lastWasHolder)sum+=place;place*=value/(lastHolder||1);lastHolder=value}else{if(lastWasHolder===false){place*=10}sum+=place*value}lastWasHolder=holder});if(lastWasHolder)sum+=place;return sum})}function getExtendedDate(f,localeCode,prefer,forceUTC){var d,relative,baseLocalization,afterCallbacks,loc,set,unit,unitIndex,weekday,num,tmp;d=getNewDate();afterCallbacks=[];function afterDateSet(fn){afterCallbacks.push(fn)}function fireCallbacks(){afterCallbacks.forEach(function(fn){fn.call()})}function setWeekdayOfMonth(){var w=d.getWeekday();d.setWeekday(7*(set["num"]-1)+(w>weekday?weekday+7:weekday))}function setUnitEdge(){var modifier=loc.modifiersByName[set["edge"]];iterateOverDateUnits(function(name){if(isDefined(set[name])){unit=name;return false}},4);if(unit==="year")set.specificity="month";else if(unit==="month"||unit==="week")set.specificity="day";d[(modifier.value<0?"endOf":"beginningOf")+simpleCapitalize(unit)]();if(modifier.value===-2)d.reset()}function separateAbsoluteUnits(){var params;iterateOverDateUnits(function(name,u,i){if(name==="day")name="date";if(isDefined(set[name])){if(i>=unitIndex){invalidateDate(d);return false}params=params||{};params[name]=set[name];delete set[name]}});if(params){afterDateSet(function(){d.set(params,true)})}}d.utc(forceUTC);if(isDate(f)){d.utc(f.isUTC()).setTime(f.getTime())}else if(isNumber(f)){d.setTime(f)}else if(isObjectType(f)){d.set(f,true);set=f}else if(isString(f)){baseLocalization=getLocalization(localeCode);f=cleanDateInput(f);if(baseLocalization){iterateOverObject(baseLocalization.getFormats(),function(i,dif){var match=f.match(dif.reg);if(match){loc=dif.locale;set=getFormatMatch(match,dif.to,loc);loc.cachedFormat=dif;if(set["utc"]){d.utc()}if(set.timestamp){set=set.timestamp;return false}if(dif.variant&&!isString(set["month"])&&(isString(set["date"])||baseLocalization.hasVariant(localeCode))){tmp=set["month"];set["month"]=set["date"];set["date"]=tmp}if(set["year"]&&set.yearAsString.length===2){set["year"]=getYearFromAbbreviation(set["year"])}if(set["month"]){set["month"]=loc.getMonth(set["month"]);if(set["shift"]&&!set["unit"])set["unit"]=loc["units"][7]}if(set["weekday"]&&set["date"]){delete set["weekday"]}else if(set["weekday"]){set["weekday"]=loc.getWeekday(set["weekday"]);if(set["shift"]&&!set["unit"])set["unit"]=loc["units"][5]}if(set["day"]&&(tmp=loc.modifiersByName[set["day"]])){set["day"]=tmp.value;d.reset();relative=true}else if(set["day"]&&(weekday=loc.getWeekday(set["day"]))>-1){delete set["day"];if(set["num"]&&set["month"]){afterDateSet(setWeekdayOfMonth);set["day"]=1}else{set["weekday"]=weekday}}if(set["date"]&&!isNumber(set["date"])){set["date"]=loc.getNumericDate(set["date"])}if(loc.matchPM(set["ampm"])&&set["hour"]<12){set["hour"]+=12}else if(loc.matchAM(set["ampm"])&&set["hour"]===12){set["hour"]=0}if("offset_hours"in set||"offset_minutes"in set){d.utc();set["offset_minutes"]=set["offset_minutes"]||0;set["offset_minutes"]+=set["offset_hours"]*60;if(set["offset_sign"]==="-"){set["offset_minutes"]*=-1}set["minute"]-=set["offset_minutes"]}if(set["unit"]){relative=true;num=loc.getNumber(set["num"]);unitIndex=loc.getUnitIndex(set["unit"]);unit=English["units"][unitIndex];separateAbsoluteUnits();if(set["shift"]){num*=(tmp=loc.modifiersByName[set["shift"]])?tmp.value:0}if(set["sign"]&&(tmp=loc.modifiersByName[set["sign"]])){num*=tmp.value}if(isDefined(set["weekday"])){d.set({weekday:set["weekday"]},true);delete set["weekday"]}set[unit]=(set[unit]||0)+num}if(set["edge"]){afterDateSet(setUnitEdge)}if(set["year_sign"]==="-"){set["year"]*=-1}iterateOverDateUnits(function(name,unit,i){var value=set[name],fraction=value%1;if(fraction){set[DateUnitsReversed[i-1].name]=round(fraction*(name==="second"?1e3:60));set[name]=floor(value)}},1,4);return false}})}if(!set){if(f!=="now"){d=new date(f)}if(forceUTC){d.addMinutes(-d.getTimezoneOffset())}}else if(relative){d.advance(set)}else{if(d._utc){d.reset()}updateDate(d,set,true,false,prefer)}fireCallbacks();d.utc(false)}return{date:d,set:set}}function getYearFromAbbreviation(year){return round(callDateGet(getNewDate(),"FullYear")/100)*100-round(year/100)*100+year}function getShortHour(d){var hours=callDateGet(d,"Hours");return hours===0?12:hours-floor(hours/13)*12}function getWeekNumber(date){date=date.clone();var dow=callDateGet(date,"Day")||7;date.addDays(4-dow).reset();return 1+floor(date.daysSince(date.clone().beginningOfYear())/7)}function getAdjustedUnit(ms){var next,ams=abs(ms),value=ams,unitIndex=0;iterateOverDateUnits(function(name,unit,i){next=floor(withPrecision(ams/unit.multiplier(),1));if(next>=1){value=next;unitIndex=i}},1);return[value,unitIndex,ms]}function getRelativeWithMonthFallback(date){var adu=getAdjustedUnit(date.millisecondsFromNow());if(allowMonthFallback(date,adu)){adu[0]=abs(date.monthsFromNow());adu[1]=6}return adu}function allowMonthFallback(date,adu){return adu[1]===6||adu[1]===5&&adu[0]===4&&date.daysFromNow()>=getNewDate().daysInMonth();
}function createMeridianTokens(slice,caps){var fn=function(d,localeCode){var hours=callDateGet(d,"Hours");return getLocalization(localeCode)["ampm"][floor(hours/12)]||""};createFormatToken("t",fn,1);createFormatToken("tt",fn);createFormatToken("T",fn,1,1);createFormatToken("TT",fn,null,2)}function createWeekdayTokens(slice,caps){var fn=function(d,localeCode){var dow=callDateGet(d,"Day");return getLocalization(localeCode)["weekdays"][dow]};createFormatToken("dow",fn,3);createFormatToken("Dow",fn,3,1);createFormatToken("weekday",fn);createFormatToken("Weekday",fn,null,1)}function createMonthTokens(slice,caps){createMonthToken("mon",0,3);createMonthToken("month",0);createMonthToken("month2",1);createMonthToken("month3",2)}function createMonthToken(token,multiplier,slice){var fn=function(d,localeCode){var month=callDateGet(d,"Month");return getLocalization(localeCode)["months"][month+multiplier*12]};createFormatToken(token,fn,slice);createFormatToken(simpleCapitalize(token),fn,slice,1)}function createFormatToken(t,fn,slice,caps){DateFormatTokens[t]=function(d,localeCode){var str=fn(d,localeCode);if(slice)str=str.slice(0,slice);if(caps)str=str.slice(0,caps).toUpperCase()+str.slice(caps);return str}}function createPaddedToken(t,fn,ms){DateFormatTokens[t]=fn;DateFormatTokens[t+t]=function(d,localeCode){return padNumber(fn(d,localeCode),2)};if(ms){DateFormatTokens[t+t+t]=function(d,localeCode){return padNumber(fn(d,localeCode),3)};DateFormatTokens[t+t+t+t]=function(d,localeCode){return padNumber(fn(d,localeCode),4)}}}function buildCompiledOutputFormat(format){var match=format.match(/(\{\w+\})|[^{}]+/g);CompiledOutputFormats[format]=match.map(function(p){p.replace(/\{(\w+)\}/,function(full,token){p=DateFormatTokens[token]||token;return token});return p})}function executeCompiledOutputFormat(date,format,localeCode){var compiledFormat,length,i,t,result="";compiledFormat=CompiledOutputFormats[format];for(i=0,length=compiledFormat.length;i<length;i++){t=compiledFormat[i];result+=isFunction(t)?t(date,localeCode):t}return result}function formatDate(date,format,relative,localeCode){var adu;if(!date.isValid()){return"Invalid Date"}else if(Date[format]){format=Date[format]}else if(isFunction(format)){adu=getRelativeWithMonthFallback(date);format=format.apply(date,adu.concat(getLocalization(localeCode)))}if(!format&&relative){adu=adu||getRelativeWithMonthFallback(date);if(adu[1]===0){adu[1]=1;adu[0]=1}return getLocalization(localeCode).getRelativeFormat(adu)}format=format||"long";if(format==="short"||format==="long"||format==="full"){format=getLocalization(localeCode)[format]}if(!CompiledOutputFormats[format]){buildCompiledOutputFormat(format)}return executeCompiledOutputFormat(date,format,localeCode)}function compareDate(d,find,localeCode,buffer,forceUTC){var p,t,min,max,override,capitalized,accuracy=0,loBuffer=0,hiBuffer=0;p=getExtendedDate(find,localeCode,null,forceUTC);if(buffer>0){loBuffer=hiBuffer=buffer;override=true}if(!p.date.isValid())return false;if(p.set&&p.set.specificity){DateUnits.forEach(function(u,i){if(u.name===p.set.specificity){accuracy=u.multiplier(p.date,d-p.date)-1}});capitalized=simpleCapitalize(p.set.specificity);if(p.set["edge"]||p.set["shift"]){p.date["beginningOf"+capitalized]()}if(p.set.specificity==="month"){max=p.date.clone()["endOf"+capitalized]().getTime()}if(!override&&p.set["sign"]&&p.set.specificity!="millisecond"){loBuffer=50;hiBuffer=-50}}t=d.getTime();min=p.date.getTime();max=max||min+accuracy;max=compensateForTimezoneTraversal(d,min,max);return t>=min-loBuffer&&t<=max+hiBuffer}function compensateForTimezoneTraversal(d,min,max){var dMin,dMax,minOffset,maxOffset;dMin=new date(min);dMax=new date(max).utc(d.isUTC());if(callDateGet(dMax,"Hours")!==23){minOffset=dMin.getTimezoneOffset();maxOffset=dMax.getTimezoneOffset();if(minOffset!==maxOffset){max+=(maxOffset-minOffset).minutes()}}return max}function updateDate(d,params,reset,advance,prefer){var weekday,specificityIndex;function getParam(key){return isDefined(params[key])?params[key]:params[key+"s"]}function paramExists(key){return isDefined(getParam(key))}function uniqueParamExists(key,isDay){return paramExists(key)||isDay&&paramExists("weekday")}function canDisambiguate(){switch(prefer){case-1:return d>getNewDate();case 1:return d<getNewDate()}}if(isNumber(params)&&advance){params={milliseconds:params}}else if(isNumber(params)){d.setTime(params);return d}if(isDefined(params["date"])){params["day"]=params["date"]}iterateOverDateUnits(function(name,unit,i){var isDay=name==="day";if(uniqueParamExists(name,isDay)){params.specificity=name;specificityIndex=+i;return false}else if(reset&&name!=="week"&&(!isDay||!paramExists("week"))){callDateSet(d,unit.method,isDay?1:0)}});DateUnits.forEach(function(u,i){var name=u.name,method=u.method,higherUnit=DateUnits[i-1],value;value=getParam(name);if(isUndefined(value))return;if(advance){if(name==="week"){value=(params["day"]||0)+value*7;method="Date"}value=value*advance+callDateGet(d,method)}else if(name==="month"&&paramExists("day")){callDateSet(d,"Date",15)}callDateSet(d,method,value);if(advance&&name==="month"){checkMonthTraversal(d,value)}});if(!advance&&!paramExists("day")&&paramExists("weekday")){var weekday=getParam("weekday"),isAhead,futurePreferred;d.setWeekday(weekday)}if(canDisambiguate()){iterateOverDateUnits(function(name,unit){var ambiguous=unit.ambiguous||name==="week"&&paramExists("weekday");if(ambiguous&&!uniqueParamExists(name,name==="day")){d[unit.addMethod](prefer);return false}},specificityIndex+1)}return d}function prepareTime(format,loc,iso){var timeSuffixMapping={h:0,m:1,s:2},add;loc=loc||English;return format.replace(/{([a-z])}/g,function(full,token){var separators=[],isHours=token==="h",tokenIsRequired=isHours&&!iso;if(token==="t"){return loc["ampm"].join("|")}else{if(isHours){separators.push(":")}if(add=loc["timeSuffixes"][timeSuffixMapping[token]]){separators.push(add+"\\s*")}return separators.length===0?"":"(?:"+separators.join("|")+")"+(tokenIsRequired?"":"?")}})}function checkMonthTraversal(date,targetMonth){if(targetMonth<0){targetMonth=targetMonth%12+12}if(targetMonth%12!=callDateGet(date,"Month")){callDateSet(date,"Date",0)}}function createDate(args,prefer,forceUTC){var f,localeCode;if(isNumber(args[1])){f=collectDateArguments(args)[0]}else{f=args[0];localeCode=args[1]}return getExtendedDate(f,localeCode,prefer,forceUTC).date}function invalidateDate(d){d.setTime(NaN)}function buildDateUnits(){DateUnitsReversed=DateUnits.concat().reverse();DateArgumentUnits=DateUnits.concat();DateArgumentUnits.splice(2,1)}function buildDateMethods(){extendSimilar(date,true,true,DateUnits,function(methods,u,i){var name=u.name,caps=simpleCapitalize(name),multiplier=u.multiplier(),since,until;u.addMethod="add"+caps+"s";function applyErrorMargin(ms){var num=ms/multiplier,fraction=num%1,error=u.error||.999;if(fraction&&abs(fraction%1)>error){num=round(num)}return num<0?ceil(num):floor(num)}since=function(f,localeCode){return applyErrorMargin(this.getTime()-date.create(f,localeCode).getTime())};until=function(f,localeCode){return applyErrorMargin(date.create(f,localeCode).getTime()-this.getTime())};methods[name+"sAgo"]=until;methods[name+"sUntil"]=until;methods[name+"sSince"]=since;methods[name+"sFromNow"]=since;methods[u.addMethod]=function(num,reset){var set={};set[name]=num;return this.advance(set,reset)};buildNumberToDateAlias(u,multiplier);if(i<3){["Last","This","Next"].forEach(function(shift){methods["is"+shift+caps]=function(){return compareDate(this,shift+" "+name,"en")}})}if(i<4){methods["beginningOf"+caps]=function(){var set={};switch(name){case"year":set["year"]=callDateGet(this,"FullYear");break;case"month":set["month"]=callDateGet(this,"Month");break;case"day":set["day"]=callDateGet(this,"Date");break;case"week":set["weekday"]=0;break}return this.set(set,true)};methods["endOf"+caps]=function(){var set={hours:23,minutes:59,seconds:59,milliseconds:999};switch(name){case"year":set["month"]=11;set["day"]=31;break;case"month":set["day"]=this.daysInMonth();break;case"week":set["weekday"]=6;break}return this.set(set,true)}}})}function buildCoreInputFormats(){English.addFormat("([+-])?(\\d{4,4})[-.]?{full_month}[-.]?(\\d{1,2})?",true,["year_sign","year","month","date"],false,true);English.addFormat("(\\d{1,2})[-.\\/]{full_month}(?:[-.\\/](\\d{2,4}))?",true,["date","month","year"],true);English.addFormat("{full_month}[-.](\\d{4,4})",false,["month","year"]);English.addFormat("\\/Date\\((\\d+(?:[+-]\\d{4,4})?)\\)\\/",false,["timestamp"]);English.addFormat(prepareTime(RequiredTime,English),false,TimeFormat);CoreDateFormats=English.compiledFormats.slice(0,7).reverse();English.compiledFormats=English.compiledFormats.slice(7).concat(CoreDateFormats)}function buildFormatTokens(){createPaddedToken("f",function(d){return callDateGet(d,"Milliseconds")},true);createPaddedToken("s",function(d){return callDateGet(d,"Seconds")});createPaddedToken("m",function(d){return callDateGet(d,"Minutes")});createPaddedToken("h",function(d){return callDateGet(d,"Hours")%12||12});createPaddedToken("H",function(d){return callDateGet(d,"Hours")});createPaddedToken("d",function(d){return callDateGet(d,"Date")});createPaddedToken("M",function(d){return callDateGet(d,"Month")+1});createMeridianTokens();createWeekdayTokens();createMonthTokens();DateFormatTokens["ms"]=DateFormatTokens["f"];DateFormatTokens["milliseconds"]=DateFormatTokens["f"];DateFormatTokens["seconds"]=DateFormatTokens["s"];DateFormatTokens["minutes"]=DateFormatTokens["m"];DateFormatTokens["hours"]=DateFormatTokens["h"];DateFormatTokens["24hr"]=DateFormatTokens["H"];DateFormatTokens["12hr"]=DateFormatTokens["h"];DateFormatTokens["date"]=DateFormatTokens["d"];DateFormatTokens["day"]=DateFormatTokens["d"];DateFormatTokens["year"]=DateFormatTokens["yyyy"]}function buildFormatShortcuts(){extendSimilar(date,true,true,"short,long,full",function(methods,name){methods[name]=function(localeCode){return formatDate(this,name,false,localeCode)}})}function buildAsianDigits(){KanjiDigits.split("").forEach(function(digit,value){var holder;if(value>9){value=pow(10,value-9)}AsianDigitMap[digit]=value});simpleMerge(AsianDigitMap,NumberNormalizeMap);AsianDigitReg=regexp("([])?(["+KanjiDigits+FullWidthDigits+"]+)(?!)","g")}function buildRelativeAliases(){var special="today,yesterday,tomorrow,weekday,weekend,future,past".split(",");var weekdays=English["weekdays"].slice(0,7);var months=English["months"].slice(0,12);extendSimilar(date,true,true,special.concat(weekdays).concat(months),function(methods,name){methods["is"+simpleCapitalize(name)]=function(utc){return this.is(name,0,utc)}})}function buildUTCAliases(){if(date["utc"])return;date["utc"]={create:function(){return createDate(arguments,0,true)},past:function(){return createDate(arguments,-1,true)},future:function(){return createDate(arguments,1,true)}}}function setDateProperties(){extend(date,false,true,{RFC1123:"{Dow}, {dd} {Mon} {yyyy} {HH}:{mm}:{ss} {tz}",RFC1036:"{Weekday}, {dd}-{Mon}-{yy} {HH}:{mm}:{ss} {tz}",ISO8601_DATE:"{yyyy}-{MM}-{dd}",ISO8601_DATETIME:"{yyyy}-{MM}-{dd}T{HH}:{mm}:{ss}.{fff}{isotz}"})}extend(date,false,true,{create:function(){return createDate(arguments)},past:function(){return createDate(arguments,-1)},future:function(){return createDate(arguments,1)},addLocale:function(localeCode,set){return setLocalization(localeCode,set)},setLocale:function(localeCode,set){var loc=getLocalization(localeCode,false);CurrentLocalization=loc;if(localeCode&&localeCode!=loc["code"]){loc["code"]=localeCode}return loc},getLocale:function(localeCode){return!localeCode?CurrentLocalization:getLocalization(localeCode,false)},addFormat:function(format,match,localeCode){addDateInputFormat(getLocalization(localeCode),format,match)}});extend(date,true,true,{set:function(){var args=collectDateArguments(arguments);return updateDate(this,args[0],args[1])},setWeekday:function(dow){if(isUndefined(dow))return;return callDateSet(this,"Date",callDateGet(this,"Date")+dow-callDateGet(this,"Day"))},setISOWeek:function(week){var weekday=callDateGet(this,"Day")||7;if(isUndefined(week))return;this.set({month:0,date:4});this.set({weekday:1});if(week>1){this.addWeeks(week-1)}if(weekday!==1){this.advance({days:weekday-1})}return this.getTime()},getISOWeek:function(){return getWeekNumber(this)},beginningOfISOWeek:function(){var day=this.getDay();if(day===0){day=-6}else if(day!==1){day=1}this.setWeekday(day);return this.reset()},endOfISOWeek:function(){if(this.getDay()!==0){this.setWeekday(7)}return this.endOfDay()},getUTCOffset:function(iso){var offset=this._utc?0:this.getTimezoneOffset();var colon=iso===true?":":"";if(!offset&&iso)return"Z";return padNumber(floor(-offset/60),2,true)+colon+padNumber(abs(offset%60),2)},utc:function(set){defineProperty(this,"_utc",set===true||arguments.length===0);return this},isUTC:function(){return!!this._utc||this.getTimezoneOffset()===0},advance:function(){var args=collectDateArguments(arguments,true);return updateDate(this,args[0],args[1],1)},rewind:function(){var args=collectDateArguments(arguments,true);return updateDate(this,args[0],args[1],-1)},isValid:function(){return!isNaN(this.getTime())},isAfter:function(d,margin,utc){return this.getTime()>date.create(d).getTime()-(margin||0)},isBefore:function(d,margin){return this.getTime()<date.create(d).getTime()+(margin||0)},isBetween:function(d1,d2,margin){var t=this.getTime();var t1=date.create(d1).getTime();var t2=date.create(d2).getTime();var lo=min(t1,t2);var hi=max(t1,t2);margin=margin||0;return lo-margin<t&&hi+margin>t},isLeapYear:function(){var year=callDateGet(this,"FullYear");return year%4===0&&year%100!==0||year%400===0},daysInMonth:function(){return 32-callDateGet(new date(callDateGet(this,"FullYear"),callDateGet(this,"Month"),32),"Date")},format:function(f,localeCode){return formatDate(this,f,false,localeCode)},relative:function(fn,localeCode){if(isString(fn)){localeCode=fn;fn=null}return formatDate(this,fn,true,localeCode)},is:function(d,margin,utc){var tmp,comp;if(!this.isValid())return;if(isString(d)){d=d.trim().toLowerCase();comp=this.clone().utc(utc);switch(true){case d==="future":return this.getTime()>getNewDate().getTime();case d==="past":return this.getTime()<getNewDate().getTime();case d==="weekday":return callDateGet(comp,"Day")>0&&callDateGet(comp,"Day")<6;case d==="weekend":return callDateGet(comp,"Day")===0||callDateGet(comp,"Day")===6;case(tmp=English["weekdays"].indexOf(d)%7)>-1:return callDateGet(comp,"Day")===tmp;case(tmp=English["months"].indexOf(d)%12)>-1:return callDateGet(comp,"Month")===tmp}}return compareDate(this,d,null,margin,utc)},reset:function(unit){var params={},recognized;unit=unit||"hours";if(unit==="date")unit="days";recognized=DateUnits.some(function(u){return unit===u.name||unit===u.name+"s"});params[unit]=unit.match(/^days?/)?1:0;return recognized?this.set(params,true):this},clone:function(){var d=new date(this.getTime());d.utc(!!this._utc);return d}});extend(date,true,true,{iso:function(){return this.toISOString()},getWeekday:date.prototype.getDay,getUTCWeekday:date.prototype.getUTCDay});function buildNumberToDateAlias(u,multiplier){var name=u.name,methods={};function base(){return round(this*multiplier)}function after(){return createDate(arguments)[u.addMethod](this)}function before(){return createDate(arguments)[u.addMethod](-this)}methods[name]=base;methods[name+"s"]=base;methods[name+"Before"]=before;methods[name+"sBefore"]=before;methods[name+"Ago"]=before;methods[name+"sAgo"]=before;methods[name+"After"]=after;methods[name+"sAfter"]=after;methods[name+"FromNow"]=after;methods[name+"sFromNow"]=after;number.extend(methods)}extend(number,true,true,{duration:function(localeCode){return getLocalization(localeCode).getDuration(this)}});English=CurrentLocalization=date.addLocale("en",{plural:true,timeMarker:"at",ampm:"am,pm",months:"January,February,March,April,May,June,July,August,September,October,November,December",weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",units:"millisecond:|s,second:|s,minute:|s,hour:|s,day:|s,week:|s,month:|s,year:|s",numbers:"one,two,three,four,five,six,seven,eight,nine,ten",articles:"a,an,the",tokens:"the,st|nd|rd|th,of","short":"{Month} {d}, {yyyy}","long":"{Month} {d}, {yyyy} {h}:{mm}{tt}",full:"{Weekday} {Month} {d}, {yyyy} {h}:{mm}:{ss}{tt}",past:"{num} {unit} {sign}",future:"{num} {unit} {sign}",duration:"{num} {unit}",modifiers:[{name:"sign",src:"ago|before",value:-1},{name:"sign",src:"from now|after|from|in|later",value:1},{name:"edge",src:"last day",value:-2},{name:"edge",src:"end",value:-1},{name:"edge",src:"first day|beginning",value:1},{name:"shift",src:"last",value:-1},{name:"shift",src:"the|this",value:0},{name:"shift",src:"next",value:1}],dateParse:["{month} {year}","{shift} {unit=5-7}","{0?} {date}{1}","{0?} {edge} of {shift?} {unit=4-7?}{month?}{year?}"],timeParse:["{num} {unit} {sign}","{sign} {num} {unit}","{0} {num}{1} {day} of {month} {year?}","{weekday?} {month} {date}{1?} {year?}","{date} {month} {year}","{date} {month}","{shift} {weekday}","{shift} week {weekday}","{weekday} {2?} {shift} week","{num} {unit=4-5} {sign} {day}","{0?} {date}{1} of {month}","{0?}{month?} {date?}{1?} of {shift} {unit=6-7}"]});buildDateUnits();buildDateMethods();buildCoreInputFormats();buildFormatTokens();buildFormatShortcuts();buildAsianDigits();buildRelativeAliases();buildUTCAliases();setDateProperties();function Range(start,end){this.start=cloneRangeMember(start);this.end=cloneRangeMember(end)}function getRangeMemberNumericValue(m){return isString(m)?m.charCodeAt(0):m}function getRangeMemberPrimitiveValue(m){if(m==null)return m;return isDate(m)?m.getTime():m.valueOf()}function cloneRangeMember(m){if(isDate(m)){return new date(m.getTime())}else{return getRangeMemberPrimitiveValue(m)}}function isValidRangeMember(m){var val=getRangeMemberPrimitiveValue(m);return!!val||val===0}function getDuration(amt){var match,val,unit;if(isNumber(amt)){return amt}match=amt.toLowerCase().match(/^(\d+)?\s?(\w+?)s?$/i);val=parseInt(match[1])||1;unit=match[2].slice(0,1).toUpperCase()+match[2].slice(1);if(unit.match(/hour|minute|second/i)){unit+="s"}else if(unit==="Year"){unit="FullYear"}else if(unit==="Day"){unit="Date"}return[val,unit]}function incrementDate(current,amount){var num,unit,val,d;if(isNumber(amount)){return new date(current.getTime()+amount)}num=amount[0];unit=amount[1];val=callDateGet(current,unit);d=new date(current.getTime());callDateSet(d,unit,val+num);return d}function incrementString(current,amount){return string.fromCharCode(current.charCodeAt(0)+amount)}function incrementNumber(current,amount){return current+amount}Range.prototype.toString=function(){return this.isValid()?this.start+".."+this.end:"Invalid Range"};extend(Range,true,true,{isValid:function(){return isValidRangeMember(this.start)&&isValidRangeMember(this.end)&&typeof this.start===typeof this.end},span:function(){return this.isValid()?abs(getRangeMemberNumericValue(this.end)-getRangeMemberNumericValue(this.start))+1:NaN},contains:function(obj){var self=this,arr;if(obj==null)return false;if(obj.start&&obj.end){return obj.start>=this.start&&obj.start<=this.end&&obj.end>=this.start&&obj.end<=this.end}else{return obj>=this.start&&obj<=this.end}},every:function(amount,fn){var increment,start=this.start,end=this.end,inverse=end<start,current=start,index=0,result=[];if(isFunction(amount)){fn=amount;amount=null}amount=amount||1;if(isNumber(start)){increment=incrementNumber}else if(isString(start)){increment=incrementString}else if(isDate(start)){amount=getDuration(amount);increment=incrementDate}if(inverse&&amount>0){amount*=-1}while(inverse?current>=end:current<=end){result.push(current);if(fn){fn(current,index)}current=increment(current,amount);index++}return result},union:function(range){return new Range(this.start<range.start?this.start:range.start,this.end>range.end?this.end:range.end)},intersect:function(range){if(range.start>this.end||range.end<this.start){return new Range(NaN,NaN)}return new Range(this.start>range.start?this.start:range.start,this.end<range.end?this.end:range.end)},clone:function(range){return new Range(this.start,this.end)},clamp:function(obj){var clamped,start=this.start,end=this.end,min=end<start?end:start,max=start>end?start:end;if(obj<min){clamped=min}else if(obj>max){clamped=max}else{clamped=obj}return cloneRangeMember(clamped)}});[number,string,date].forEach(function(klass){extend(klass,false,true,{range:function(start,end){if(klass.create){start=klass.create(start);end=klass.create(end)}return new Range(start,end)}})});extend(number,true,true,{upto:function(num,fn,step){return number.range(this,num).every(step,fn)},clamp:function(start,end){return new Range(start,end).clamp(this)},cap:function(max){return this.clamp(Undefined,max)}});extend(number,true,true,{downto:number.prototype.upto});extend(array,false,function(a){return a instanceof Range},{create:function(range){return range.every()}});function setDelay(fn,ms,after,scope,args){if(ms===Infinity)return;if(!fn.timers)fn.timers=[];if(!isNumber(ms))ms=1;fn._canceled=false;fn.timers.push(setTimeout(function(){if(!fn._canceled){after.apply(scope,args||[])}},ms))}extend(Function,true,true,{lazy:function(ms,immediate,limit){var fn=this,queue=[],locked=false,execute,rounded,perExecution,result;ms=ms||1;limit=limit||Infinity;rounded=ceil(ms);perExecution=round(rounded/ms)||1;execute=function(){var queueLength=queue.length,maxPerRound;if(queueLength==0)return;maxPerRound=max(queueLength-perExecution,0);while(queueLength>maxPerRound){result=Function.prototype.apply.apply(fn,queue.shift());queueLength--}setDelay(lazy,rounded,function(){locked=false;execute()})};function lazy(){if(queue.length<limit-(locked&&immediate?1:0)){queue.push([this,arguments])}if(!locked){locked=true;if(immediate){execute()}else{setDelay(lazy,rounded,execute)}}return result}return lazy},throttle:function(ms){return this.lazy(ms,true,1)},debounce:function(ms){var fn=this;function debounced(){debounced.cancel();setDelay(debounced,ms,fn,this,arguments)}return debounced},delay:function(ms){var fn=this;var args=multiArgs(arguments,null,1);setDelay(fn,ms,fn,fn,args);return fn},every:function(ms){var fn=this,args=arguments;args=args.length>1?multiArgs(args,null,1):[];function execute(){fn.apply(fn,args);setDelay(fn,ms,execute)}setDelay(fn,ms,execute);return fn},cancel:function(){var timers=this.timers,timer;if(isArray(timers)){while(timer=timers.shift()){clearTimeout(timer)}}this._canceled=true;return this},after:function(num){var fn=this,counter=0,storedArguments=[];if(!isNumber(num)){num=1}else if(num===0){fn.call();return fn}return function(){var ret;storedArguments.push(multiArgs(arguments));counter++;if(counter==num){ret=fn.call(this,storedArguments);counter=0;storedArguments=[];return ret}}},once:function(){return this.throttle(Infinity,true)},fill:function(){var fn=this,curried=multiArgs(arguments);return function(){var args=multiArgs(arguments);curried.forEach(function(arg,index){if(arg!=null||index>=args.length)args.splice(index,0,arg)});return fn.apply(this,args)}}});function abbreviateNumber(num,roundTo,str,mid,limit,bytes){var fixed=num.toFixed(20),decimalPlace=fixed.search(/\./),numeralPlace=fixed.search(/[1-9]/),significant=decimalPlace-numeralPlace,unit,i,divisor;if(significant>0){significant-=1}i=max(min(floor(significant/3),limit===false?str.length:limit),-mid);unit=str.charAt(i+mid-1);if(significant<-9){i=-3;roundTo=abs(significant)-9;unit=str.slice(0,1)}divisor=bytes?pow(2,10*i):pow(10,i*3);return withPrecision(num/divisor,roundTo||0).format()+unit.trim()}extend(number,false,true,{random:function(n1,n2){var minNum,maxNum;if(arguments.length==1)n2=n1,n1=0;minNum=min(n1||0,isUndefined(n2)?1:n2);maxNum=max(n1||0,isUndefined(n2)?1:n2)+1;return floor(math.random()*(maxNum-minNum)+minNum)}});extend(number,true,true,{log:function(base){return math.log(this)/(base?math.log(base):1)},abbr:function(precision){return abbreviateNumber(this,precision,"kmbt",0,4)},metric:function(precision,limit){return abbreviateNumber(this,precision,"nm kMGTPE",4,isUndefined(limit)?1:limit)},bytes:function(precision,limit){return abbreviateNumber(this,precision,"kMGTPE",0,isUndefined(limit)?4:limit,true)+"B"},isInteger:function(){return this%1==0},isOdd:function(){return!isNaN(this)&&!this.isMultipleOf(2)},isEven:function(){return this.isMultipleOf(2)},isMultipleOf:function(num){return this%num===0},format:function(place,thousands,decimal){var i,str,split,integer,fraction,result="";if(isUndefined(thousands)){thousands=","}if(isUndefined(decimal)){decimal="."}str=(isNumber(place)?withPrecision(this,place||0).toFixed(max(place,0)):this.toString()).replace(/^-/,"");split=str.split(".");integer=split[0];fraction=split[1];for(i=integer.length;i>0;i-=3){if(i<integer.length){result=thousands+result}result=integer.slice(max(0,i-3),i)+result}if(fraction){result+=decimal+repeatString("0",(place||0)-fraction.length)+fraction}return(this<0?"-":"")+result},hex:function(pad){return this.pad(pad||1,false,16)},times:function(fn){if(fn){for(var i=0;i<this;i++){fn.call(this,i)}}return this.toNumber()},chr:function(){return string.fromCharCode(this)},pad:function(place,sign,base){return padNumber(this,place,sign,base)},ordinalize:function(){var suffix,num=abs(this),last=parseInt(num.toString().slice(-2));return this+getOrdinalizedSuffix(last)},toNumber:function(){return parseFloat(this,10)}});function buildNumber(){function createRoundingFunction(fn){return function(precision){return precision?withPrecision(this,precision,fn):fn(this)}}extend(number,true,true,{ceil:createRoundingFunction(ceil),round:createRoundingFunction(round),floor:createRoundingFunction(floor)});extendSimilar(number,true,true,"abs,pow,sin,asin,cos,acos,tan,atan,exp,pow,sqrt",function(methods,name){methods[name]=function(a,b){return math[name](this,a,b)}})}buildNumber();var ObjectTypeMethods="isObject,isNaN".split(",");var ObjectHashMethods="keys,values,select,reject,each,merge,clone,equal,watch,tap,has,toQueryString".split(",");function setParamsObject(obj,param,value,castBoolean){var reg=/^(.+?)(\[.*\])$/,paramIsArray,match,allKeys,key;if(match=param.match(reg)){key=match[1];allKeys=match[2].replace(/^\[|\]$/g,"").split("][");allKeys.forEach(function(k){paramIsArray=!k||k.match(/^\d+$/);if(!key&&isArray(obj))key=obj.length;if(!hasOwnProperty(obj,key)){obj[key]=paramIsArray?[]:{}}obj=obj[key];key=k});if(!key&&paramIsArray)key=obj.length.toString();setParamsObject(obj,key,value,castBoolean)}else if(castBoolean&&value==="true"){obj[param]=true}else if(castBoolean&&value==="false"){obj[param]=false}else{obj[param]=value}}function objectToQueryString(base,obj){var tmp;if(isArray(obj)||isObjectType(obj)&&obj.toString===internalToString){tmp=[];iterateOverObject(obj,function(key,value){if(base){key=base+"["+key+"]"}tmp.push(objectToQueryString(key,value))});return tmp.join("&")}else{if(!base)return"";return sanitizeURIComponent(base)+"="+(isDate(obj)?obj.getTime():sanitizeURIComponent(obj))}}function sanitizeURIComponent(obj){return!obj&&obj!==false&&obj!==0?"":encodeURIComponent(obj).replace(/%20/g,"+")}function matchInObject(match,key,value){if(isRegExp(match)){return match.test(key)}else if(isObjectType(match)){return match[key]===value}else{return key===string(match)}}function selectFromObject(obj,args,select){var match,result=obj instanceof Hash?new Hash:{};iterateOverObject(obj,function(key,value){match=false;flattenedArgs(args,function(arg){if(matchInObject(arg,key,value)){match=true}},1);if(match===select){result[key]=value}});return result}function buildTypeMethods(){extendSimilar(object,false,true,ClassNames,function(methods,name){var method="is"+name;ObjectTypeMethods.push(method);methods[method]=typeChecks[name]})}function buildObjectExtend(){extend(object,false,function(){return arguments.length===0},{extend:function(){var methods=ObjectTypeMethods.concat(ObjectHashMethods);if(typeof EnumerableMethods!=="undefined"){methods=methods.concat(EnumerableMethods)}buildObjectInstanceMethods(methods,object)}})}extend(object,false,true,{watch:function(obj,prop,fn){if(!definePropertySupport)return;var value=obj[prop];object.defineProperty(obj,prop,{enumerable:true,configurable:true,get:function(){return value},set:function(to){value=fn.call(obj,prop,value,to)}})}});extend(object,false,function(){return arguments.length>1},{keys:function(obj,fn){var keys=object.keys(obj);keys.forEach(function(key){fn.call(obj,key,obj[key])});return keys}});extend(object,false,true,{isObject:function(obj){return isPlainObject(obj)},isNaN:function(obj){return isNumber(obj)&&obj.valueOf()!==obj.valueOf()},equal:function(a,b){return isEqual(a,b)},extended:function(obj){return new Hash(obj)},merge:function(target,source,deep,resolve){var key,sourceIsObject,targetIsObject,sourceVal,targetVal,conflict,result;if(target&&typeof source!=="string"){for(key in source){if(!hasOwnProperty(source,key)||!target)continue;sourceVal=source[key];targetVal=target[key];conflict=isDefined(targetVal);sourceIsObject=isObjectType(sourceVal);targetIsObject=isObjectType(targetVal);result=conflict&&resolve===false?targetVal:sourceVal;if(conflict){if(isFunction(resolve)){result=resolve.call(source,key,targetVal,sourceVal)}}if(deep&&(sourceIsObject||targetIsObject)){if(isDate(sourceVal)){result=new date(sourceVal.getTime())}else if(isRegExp(sourceVal)){result=new regexp(sourceVal.source,getRegExpFlags(sourceVal))}else{if(!targetIsObject)target[key]=array.isArray(sourceVal)?[]:{};object.merge(target[key],sourceVal,deep,resolve);continue}}target[key]=result}}return target},values:function(obj,fn){var values=[];iterateOverObject(obj,function(k,v){values.push(v);if(fn)fn.call(obj,v)});return values},clone:function(obj,deep){var target,klass;if(!isObjectType(obj)){return obj}klass=className(obj);if(isDate(obj,klass)&&obj.clone){return obj.clone()}else if(isDate(obj,klass)||isRegExp(obj,klass)){return new obj.constructor(obj)}else if(obj instanceof Hash){target=new Hash}else if(isArray(obj,klass)){target=[]}else if(isPlainObject(obj,klass)){target={}}else{throw new TypeError("Clone must be a basic data type.")}return object.merge(target,obj,deep)},fromQueryString:function(str,castBoolean){var result=object.extended(),split;str=str&&str.toString?str.toString():"";str.replace(/^.*?\?/,"").split("&").forEach(function(p){var split=p.split("=");if(split.length!==2)return;setParamsObject(result,split[0],decodeURIComponent(split[1]),castBoolean)});return result},toQueryString:function(obj,namespace){return objectToQueryString(namespace,obj)},tap:function(obj,arg){var fn=arg;if(!isFunction(arg)){fn=function(){if(arg)obj[arg]()}}fn.call(obj,obj);return obj},has:function(obj,key){return hasOwnProperty(obj,key)},select:function(obj){return selectFromObject(obj,arguments,true)},reject:function(obj){return selectFromObject(obj,arguments,false)}});buildTypeMethods();buildObjectExtend();buildObjectInstanceMethods(ObjectHashMethods,Hash);extend(regexp,false,true,{escape:function(str){return escapeRegExp(str)}});extend(regexp,true,true,{getFlags:function(){return getRegExpFlags(this)},setFlags:function(flags){return regexp(this.source,flags)},addFlag:function(flag){return this.setFlags(getRegExpFlags(this,flag))},removeFlag:function(flag){return this.setFlags(getRegExpFlags(this).replace(flag,""))}});function getAcronym(word){var inflector=string.Inflector;var word=inflector&&inflector.acronyms[word];if(isString(word)){return word}}function checkRepeatRange(num){num=+num;if(num<0||num===Infinity){throw new RangeError("Invalid number")}return num}function padString(num,padding){return repeatString(isDefined(padding)?padding:" ",num)}function truncateString(str,length,from,ellipsis,split){var str1,str2,len1,len2;if(str.length<=length){return str.toString()}ellipsis=isUndefined(ellipsis)?"...":ellipsis;switch(from){case"left":str2=split?truncateOnWord(str,length,true):str.slice(str.length-length);return ellipsis+str2;case"middle":len1=ceil(length/2);len2=floor(length/2);
str1=split?truncateOnWord(str,len1):str.slice(0,len1);str2=split?truncateOnWord(str,len2,true):str.slice(str.length-len2);return str1+ellipsis+str2;default:str1=split?truncateOnWord(str,length):str.slice(0,length);return str1+ellipsis}}function truncateOnWord(str,limit,fromLeft){if(fromLeft){return truncateOnWord(str.reverse(),limit).reverse()}var reg=regexp("(?=["+getTrimmableCharacters()+"])");var words=str.split(reg);var count=0;return words.filter(function(word){count+=word.length;return count<=limit}).join("")}function numberOrIndex(str,n,from){if(isString(n)){n=str.indexOf(n);if(n===-1){n=from?str.length:0}}return n}var btoa,atob;function buildBase64(key){if(globalContext.btoa){btoa=globalContext.btoa;atob=globalContext.atob;return}var base64reg=/[^A-Za-z0-9\+\/\=]/g;btoa=function(str){var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;do{chr1=str.charCodeAt(i++);chr2=str.charCodeAt(i++);chr3=str.charCodeAt(i++);enc1=chr1>>2;enc2=(chr1&3)<<4|chr2>>4;enc3=(chr2&15)<<2|chr3>>6;enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else if(isNaN(chr3)){enc4=64}output=output+key.charAt(enc1)+key.charAt(enc2)+key.charAt(enc3)+key.charAt(enc4);chr1=chr2=chr3="";enc1=enc2=enc3=enc4=""}while(i<str.length);return output};atob=function(input){var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;if(input.match(base64reg)){throw new Error("String contains invalid base64 characters")}input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{enc1=key.indexOf(input.charAt(i++));enc2=key.indexOf(input.charAt(i++));enc3=key.indexOf(input.charAt(i++));enc4=key.indexOf(input.charAt(i++));chr1=enc1<<2|enc2>>4;chr2=(enc2&15)<<4|enc3>>2;chr3=(enc3&3)<<6|enc4;output=output+chr(chr1);if(enc3!=64){output=output+chr(chr2)}if(enc4!=64){output=output+chr(chr3)}chr1=chr2=chr3="";enc1=enc2=enc3=enc4=""}while(i<input.length);return output}}extend(string,true,false,{repeat:function(num){num=checkRepeatRange(num);return repeatString(this,num)}});extend(string,true,function(reg){return isRegExp(reg)||arguments.length>2},{startsWith:function(reg){var args=arguments,pos=args[1],c=args[2],str=this,source;if(pos)str=str.slice(pos);if(isUndefined(c))c=true;source=isRegExp(reg)?reg.source.replace("^",""):escapeRegExp(reg);return regexp("^"+source,c?"":"i").test(str)},endsWith:function(reg){var args=arguments,pos=args[1],c=args[2],str=this,source;if(isDefined(pos))str=str.slice(0,pos);if(isUndefined(c))c=true;source=isRegExp(reg)?reg.source.replace("$",""):escapeRegExp(reg);return regexp(source+"$",c?"":"i").test(str)}});extend(string,true,true,{escapeRegExp:function(){return escapeRegExp(this)},escapeURL:function(param){return param?encodeURIComponent(this):encodeURI(this)},unescapeURL:function(param){return param?decodeURI(this):decodeURIComponent(this)},escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2f;")},unescapeHTML:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&#x2f;/g,"/").replace(/&amp;/g,"&")},encodeBase64:function(){return btoa(unescape(encodeURIComponent(this)))},decodeBase64:function(){return decodeURIComponent(escape(atob(this)))},each:function(search,fn){var match,i,len;if(isFunction(search)){fn=search;search=/[\s\S]/g}else if(!search){search=/[\s\S]/g}else if(isString(search)){search=regexp(escapeRegExp(search),"gi")}else if(isRegExp(search)){search=regexp(search.source,getRegExpFlags(search,"g"))}match=this.match(search)||[];if(fn){for(i=0,len=match.length;i<len;i++){match[i]=fn.call(this,match[i],i,match)||match[i]}}return match},shift:function(n){var result="";n=n||0;this.codes(function(c){result+=chr(c+n)});return result},codes:function(fn){var codes=[],i,len;for(i=0,len=this.length;i<len;i++){var code=this.charCodeAt(i);codes.push(code);if(fn)fn.call(this,code,i)}return codes},chars:function(fn){return this.each(fn)},words:function(fn){return this.trim().each(/\S+/g,fn)},lines:function(fn){return this.trim().each(/^.*$/gm,fn)},paragraphs:function(fn){var paragraphs=this.trim().split(/[\r\n]{2,}/);paragraphs=paragraphs.map(function(p){if(fn)var s=fn.call(p);return s?s:p});return paragraphs},isBlank:function(){return this.trim().length===0},has:function(find){return this.search(isRegExp(find)?find:escapeRegExp(find))!==-1},add:function(str,index){index=isUndefined(index)?this.length:index;return this.slice(0,index)+str+this.slice(index)},remove:function(f){return this.replace(f,"")},reverse:function(){return this.split("").reverse().join("")},compact:function(){return this.trim().replace(/([\r\n\s])+/g,function(match,whitespace){return whitespace===""?whitespace:" "})},at:function(){return getEntriesForIndexes(this,arguments,true)},from:function(from){return this.slice(numberOrIndex(this,from,true))},to:function(to){if(isUndefined(to))to=this.length;return this.slice(0,numberOrIndex(this,to))},dasherize:function(){return this.underscore().replace(/_/g,"-")},underscore:function(){return this.replace(/[-\s]+/g,"_").replace(string.Inflector&&string.Inflector.acronymRegExp,function(acronym,index){return(index>0?"_":"")+acronym.toLowerCase()}).replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase()},camelize:function(first){return this.underscore().replace(/(^|_)([^_]+)/g,function(match,pre,word,index){var acronym=getAcronym(word),capitalize=first!==false||index>0;if(acronym)return capitalize?acronym:acronym.toLowerCase();return capitalize?word.capitalize():word})},spacify:function(){return this.underscore().replace(/_/g," ")},stripTags:function(){var str=this,args=arguments.length>0?arguments:[""];flattenedArgs(args,function(tag){str=str.replace(regexp("</?"+escapeRegExp(tag)+"[^<>]*>","gi"),"")});return str},removeTags:function(){var str=this,args=arguments.length>0?arguments:["\\S+"];flattenedArgs(args,function(t){var reg=regexp("<("+t+")[^<>]*(?:\\/>|>.*?<\\/\\1>)","gi");str=str.replace(reg,"")});return str},truncate:function(length,from,ellipsis){return truncateString(this,length,from,ellipsis)},truncateOnWord:function(length,from,ellipsis){return truncateString(this,length,from,ellipsis,true)},pad:function(num,padding){var half,front,back;num=checkRepeatRange(num);half=max(0,num-this.length)/2;front=floor(half);back=ceil(half);return padString(front,padding)+this+padString(back,padding)},padLeft:function(num,padding){num=checkRepeatRange(num);return padString(max(0,num-this.length),padding)+this},padRight:function(num,padding){num=checkRepeatRange(num);return this+padString(max(0,num-this.length),padding)},first:function(num){if(isUndefined(num))num=1;return this.substr(0,num)},last:function(num){if(isUndefined(num))num=1;var start=this.length-num<0?0:this.length-num;return this.substr(start)},toNumber:function(base){return stringToNumber(this,base)},capitalize:function(all){var lastResponded;return this.toLowerCase().replace(all?/[^']/g:/^\S/,function(lower){var upper=lower.toUpperCase(),result;result=lastResponded?lower:upper;lastResponded=upper!==lower;return result})},assign:function(){var assign={};flattenedArgs(arguments,function(a,i){if(isObjectType(a)){simpleMerge(assign,a)}else{assign[i+1]=a}});return this.replace(/\{([^{]+?)\}/g,function(m,key){return hasOwnProperty(assign,key)?assign[key]:m})}});extend(string,true,true,{insert:string.prototype.add});buildBase64("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=");var plurals=[],singulars=[],uncountables=[],humans=[],acronyms={},Downcased,Inflector;function removeFromArray(arr,find){var index=arr.indexOf(find);if(index>-1){arr.splice(index,1)}}function removeFromUncountablesAndAddTo(arr,rule,replacement){if(isString(rule)){removeFromArray(uncountables,rule)}removeFromArray(uncountables,replacement);arr.unshift({rule:rule,replacement:replacement})}function paramMatchesType(param,type){return param==type||param=="all"||!param}function isUncountable(word){return uncountables.some(function(uncountable){return new regexp("\\b"+uncountable+"$","i").test(word)})}function inflect(word,pluralize){word=isString(word)?word.toString():"";if(word.isBlank()||isUncountable(word)){return word}else{return runReplacements(word,pluralize?plurals:singulars)}}function runReplacements(word,table){iterateOverObject(table,function(i,inflection){if(word.match(inflection.rule)){word=word.replace(inflection.rule,inflection.replacement);return false}});return word}function capitalize(word){return word.replace(/^\W*[a-z]/,function(w){return w.toUpperCase()})}Inflector={acronym:function(word){acronyms[word.toLowerCase()]=word;var all=object.keys(acronyms).map(function(key){return acronyms[key]});Inflector.acronymRegExp=regexp(all.join("|"),"g")},plural:function(rule,replacement){removeFromUncountablesAndAddTo(plurals,rule,replacement)},singular:function(rule,replacement){removeFromUncountablesAndAddTo(singulars,rule,replacement)},irregular:function(singular,plural){var singularFirst=singular.first(),singularRest=singular.from(1),pluralFirst=plural.first(),pluralRest=plural.from(1),pluralFirstUpper=pluralFirst.toUpperCase(),pluralFirstLower=pluralFirst.toLowerCase(),singularFirstUpper=singularFirst.toUpperCase(),singularFirstLower=singularFirst.toLowerCase();removeFromArray(uncountables,singular);removeFromArray(uncountables,plural);if(singularFirstUpper==pluralFirstUpper){Inflector.plural(new regexp("({1}){2}$".assign(singularFirst,singularRest),"i"),"$1"+pluralRest);Inflector.plural(new regexp("({1}){2}$".assign(pluralFirst,pluralRest),"i"),"$1"+pluralRest);Inflector.singular(new regexp("({1}){2}$".assign(pluralFirst,pluralRest),"i"),"$1"+singularRest)}else{Inflector.plural(new regexp("{1}{2}$".assign(singularFirstUpper,singularRest)),pluralFirstUpper+pluralRest);Inflector.plural(new regexp("{1}{2}$".assign(singularFirstLower,singularRest)),pluralFirstLower+pluralRest);Inflector.plural(new regexp("{1}{2}$".assign(pluralFirstUpper,pluralRest)),pluralFirstUpper+pluralRest);Inflector.plural(new regexp("{1}{2}$".assign(pluralFirstLower,pluralRest)),pluralFirstLower+pluralRest);Inflector.singular(new regexp("{1}{2}$".assign(pluralFirstUpper,pluralRest)),singularFirstUpper+singularRest);Inflector.singular(new regexp("{1}{2}$".assign(pluralFirstLower,pluralRest)),singularFirstLower+singularRest)}},uncountable:function(first){var add=array.isArray(first)?first:multiArgs(arguments);uncountables=uncountables.concat(add)},human:function(rule,replacement){humans.unshift({rule:rule,replacement:replacement})},clear:function(type){if(paramMatchesType(type,"singulars"))singulars=[];if(paramMatchesType(type,"plurals"))plurals=[];if(paramMatchesType(type,"uncountables"))uncountables=[];if(paramMatchesType(type,"humans"))humans=[];if(paramMatchesType(type,"acronyms"))acronyms={}}};Downcased=["and","or","nor","a","an","the","so","but","to","of","at","by","from","into","on","onto","off","out","in","over","with","for"];Inflector.plural(/$/,"s");Inflector.plural(/s$/gi,"s");Inflector.plural(/(ax|test)is$/gi,"$1es");Inflector.plural(/(octop|vir|fung|foc|radi|alumn)(i|us)$/gi,"$1i");Inflector.plural(/(census|alias|status)$/gi,"$1es");Inflector.plural(/(bu)s$/gi,"$1ses");Inflector.plural(/(buffal|tomat)o$/gi,"$1oes");Inflector.plural(/([ti])um$/gi,"$1a");Inflector.plural(/([ti])a$/gi,"$1a");Inflector.plural(/sis$/gi,"ses");Inflector.plural(/f+e?$/gi,"ves");Inflector.plural(/(cuff|roof)$/gi,"$1s");Inflector.plural(/([ht]ive)$/gi,"$1s");Inflector.plural(/([^aeiouy]o)$/gi,"$1es");Inflector.plural(/([^aeiouy]|qu)y$/gi,"$1ies");Inflector.plural(/(x|ch|ss|sh)$/gi,"$1es");Inflector.plural(/(matr|vert|ind)(?:ix|ex)$/gi,"$1ices");Inflector.plural(/([ml])ouse$/gi,"$1ice");Inflector.plural(/([ml])ice$/gi,"$1ice");Inflector.plural(/^(ox)$/gi,"$1en");Inflector.plural(/^(oxen)$/gi,"$1");Inflector.plural(/(quiz)$/gi,"$1zes");Inflector.plural(/(phot|cant|hom|zer|pian|portic|pr|quart|kimon)o$/gi,"$1os");Inflector.plural(/(craft)$/gi,"$1");Inflector.plural(/([ft])[eo]{2}(th?)$/gi,"$1ee$2");Inflector.singular(/s$/gi,"");Inflector.singular(/([pst][aiu]s)$/gi,"$1");Inflector.singular(/([aeiouy])ss$/gi,"$1ss");Inflector.singular(/(n)ews$/gi,"$1ews");Inflector.singular(/([ti])a$/gi,"$1um");Inflector.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/gi,"$1$2sis");Inflector.singular(/(^analy)ses$/gi,"$1sis");Inflector.singular(/(i)(f|ves)$/i,"$1fe");Inflector.singular(/([aeolr]f?)(f|ves)$/i,"$1f");Inflector.singular(/([ht]ive)s$/gi,"$1");Inflector.singular(/([^aeiouy]|qu)ies$/gi,"$1y");Inflector.singular(/(s)eries$/gi,"$1eries");Inflector.singular(/(m)ovies$/gi,"$1ovie");Inflector.singular(/(x|ch|ss|sh)es$/gi,"$1");Inflector.singular(/([ml])(ous|ic)e$/gi,"$1ouse");Inflector.singular(/(bus)(es)?$/gi,"$1");Inflector.singular(/(o)es$/gi,"$1");Inflector.singular(/(shoe)s?$/gi,"$1");Inflector.singular(/(cris|ax|test)[ie]s$/gi,"$1is");Inflector.singular(/(octop|vir|fung|foc|radi|alumn)(i|us)$/gi,"$1us");Inflector.singular(/(census|alias|status)(es)?$/gi,"$1");Inflector.singular(/^(ox)(en)?/gi,"$1");Inflector.singular(/(vert|ind)(ex|ices)$/gi,"$1ex");Inflector.singular(/(matr)(ix|ices)$/gi,"$1ix");Inflector.singular(/(quiz)(zes)?$/gi,"$1");Inflector.singular(/(database)s?$/gi,"$1");Inflector.singular(/ee(th?)$/gi,"oo$1");Inflector.irregular("person","people");Inflector.irregular("man","men");Inflector.irregular("child","children");Inflector.irregular("sex","sexes");Inflector.irregular("move","moves");Inflector.irregular("save","saves");Inflector.irregular("cow","kine");Inflector.irregular("goose","geese");Inflector.irregular("zombie","zombies");Inflector.uncountable("equipment,information,rice,money,species,series,fish,sheep,jeans".split(","));extend(string,true,true,{pluralize:function(){return inflect(this,true)},singularize:function(){return inflect(this,false)},humanize:function(){var str=runReplacements(this,humans),acronym;str=str.replace(/_id$/g,"");str=str.replace(/(_)?([a-z\d]*)/gi,function(match,_,word){acronym=hasOwnProperty(acronyms,word)?acronyms[word]:null;return(_?" ":"")+(acronym||word.toLowerCase())});return capitalize(str)},titleize:function(){var fullStopPunctuation=/[.:;!]$/,hasPunctuation,lastHadPunctuation,isFirstOrLast;return this.spacify().humanize().words(function(word,index,words){hasPunctuation=fullStopPunctuation.test(word);isFirstOrLast=index==0||index==words.length-1||hasPunctuation||lastHadPunctuation;lastHadPunctuation=hasPunctuation;if(isFirstOrLast||Downcased.indexOf(word)===-1){return capitalize(word)}else{return word}}).join(" ")},parameterize:function(separator){var str=this;if(separator===undefined)separator="-";if(str.normalize){str=str.normalize()}str=str.replace(/[^a-z0-9\-_]+/gi,separator);if(separator){str=str.replace(new regexp("^{sep}+|{sep}+$|({sep}){sep}+".assign({sep:escapeRegExp(separator)}),"g"),"$1")}return encodeURI(str.toLowerCase())}});string.Inflector=Inflector;string.Inflector.acronyms=acronyms;var unicodeScripts=[{names:["Arabic"],source:"-"},{names:["Cyrillic"],source:"-"},{names:["Devanagari"],source:"-"},{names:["Greek"],source:"-"},{names:["Hangul"],source:"--"},{names:["Han","Kanji"],source:"--"},{names:["Hebrew"],source:"-"},{names:["Hiragana"],source:"--"},{names:["Kana"],source:"--"},{names:["Katakana"],source:"--"},{names:["Latin"],source:"----"},{names:["Thai"],source:"-"}];function buildUnicodeScripts(){unicodeScripts.forEach(function(s){var is=regexp("^["+s.source+"\\s]+$");var has=regexp("["+s.source+"]");s.names.forEach(function(name){defineProperty(string.prototype,"is"+name,function(){return is.test(this.trim())});defineProperty(string.prototype,"has"+name,function(){return has.test(this)})})})}var HALF_WIDTH_TO_FULL_WIDTH_TRAVERSAL=65248;var widthConversionRanges=[{type:"a",start:65,end:90},{type:"a",start:97,end:122},{type:"n",start:48,end:57},{type:"p",start:33,end:47},{type:"p",start:58,end:64},{type:"p",start:91,end:96},{type:"p",start:123,end:126}];var WidthConversionTable;var allHankaku=/[\u0020-\u00A5]|[\uFF61-\uFF9F][]?/g;var allZenkaku=/[\u3000-\u301C]|[\u301A-\u30FC]|[\uFF01-\uFF60]|[\uFFE0-\uFFE6]/g;var hankakuPunctuation="";var zenkakuPunctuation="";var voicedKatakana=/[]/;var semiVoicedKatakana=/[]/;var hankakuKatakana="";var zenkakuKatakana="";function convertCharacterWidth(str,args,reg,type){if(!WidthConversionTable){buildWidthConversionTables()}var mode=multiArgs(args).join(""),table=WidthConversionTable[type];mode=mode.replace(/all/,"").replace(/(\w)lphabet|umbers?|atakana|paces?|unctuation/g,"$1");return str.replace(reg,function(c){if(table[c]&&(!mode||mode.has(table[c].type))){return table[c].to}else{return c}})}function buildWidthConversionTables(){var hankaku;WidthConversionTable={zenkaku:{},hankaku:{}};widthConversionRanges.forEach(function(r){simpleRepeat(r.end-r.start+1,function(n){n+=r.start;setWidthConversion(r.type,chr(n),chr(n+HALF_WIDTH_TO_FULL_WIDTH_TRAVERSAL))})});zenkakuKatakana.each(function(c,i){hankaku=hankakuKatakana.charAt(i);setWidthConversion("k",hankaku,c);if(c.match(voicedKatakana)){setWidthConversion("k",hankaku+"",c.shift(1))}if(c.match(semiVoicedKatakana)){setWidthConversion("k",hankaku+"",c.shift(2))}});zenkakuPunctuation.each(function(c,i){setWidthConversion("p",hankakuPunctuation.charAt(i),c)});setWidthConversion("k","","");setWidthConversion("k","","");setWidthConversion("s"," ","")}function setWidthConversion(type,half,full){WidthConversionTable["zenkaku"][half]={type:type,to:full};WidthConversionTable["hankaku"][full]={type:type,to:half}}extend(string,true,true,{hankaku:function(){return convertCharacterWidth(this,arguments,allZenkaku,"hankaku")},zenkaku:function(){return convertCharacterWidth(this,arguments,allHankaku,"zenkaku")},hiragana:function(all){var str=this;if(all!==false){str=str.zenkaku("k")}return str.replace(/[\u30A1-\u30F6]/g,function(c){return c.shift(-96)})},katakana:function(){return this.replace(/[\u3041-\u3096]/g,function(c){return c.shift(96)})}});buildUnicodeScripts();Date.addLocale("da",{plural:true,months:"januar,februar,marts,april,maj,juni,juli,august,september,oktober,november,december",weekdays:"sndag|sondag,mandag,tirsdag,onsdag,torsdag,fredag,lrdag|lordag",units:"millisekund:|er,sekund:|er,minut:|ter,tim:e|er,dag:|e,ug:e|er|en,mned:|er|en+maaned:|er|en,r:||et+aar:||et",numbers:"en|et,to,tre,fire,fem,seks,syv,otte,ni,ti",tokens:"den,for",articles:"den","short":"d. {d}. {month} {yyyy}","long":"den {d}. {month} {yyyy} {H}:{mm}",full:"{Weekday} den {d}. {month} {yyyy} {H}:{mm}:{ss}",past:"{num} {unit} {sign}",future:"{sign} {num} {unit}",duration:"{num} {unit}",ampm:"am,pm",modifiers:[{name:"day",src:"forgrs|i forgrs|forgaars|i forgaars",value:-2},{name:"day",src:"i gr|igr|i gaar|igaar",value:-1},{name:"day",src:"i dag|idag",value:0},{name:"day",src:"i morgen|imorgen",value:1},{name:"day",src:"over morgon|overmorgen|i over morgen|i overmorgen|iovermorgen",value:2},{name:"sign",src:"siden",value:-1},{name:"sign",src:"om",value:1},{name:"shift",src:"i sidste|sidste",value:-1},{name:"shift",src:"denne",value:0},{name:"shift",src:"nste|naeste",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{1?} {num} {unit} {sign}","{shift} {unit=5-7}"],timeParse:["{0?} {weekday?} {date?} {month} {year}","{date} {month}","{shift} {weekday}"]});Date.addLocale("de",{plural:true,capitalizeUnit:true,months:"Januar,Februar,Mrz|Marz,April,Mai,Juni,Juli,August,September,Oktober,November,Dezember",weekdays:"Sonntag,Montag,Dienstag,Mittwoch,Donnerstag,Freitag,Samstag",units:"Millisekunde:|n,Sekunde:|n,Minute:|n,Stunde:|n,Tag:|en,Woche:|n,Monat:|en,Jahr:|en",numbers:"ein:|e|er|en|em,zwei,drei,vier,fuenf,sechs,sieben,acht,neun,zehn",tokens:"der","short":"{d}. {Month} {yyyy}","long":"{d}. {Month} {yyyy} {H}:{mm}",full:"{Weekday} {d}. {Month} {yyyy} {H}:{mm}:{ss}",past:"{sign} {num} {unit}",future:"{sign} {num} {unit}",duration:"{num} {unit}",timeMarker:"um",ampm:"am,pm",modifiers:[{name:"day",src:"vorgestern",value:-2},{name:"day",src:"gestern",value:-1},{name:"day",src:"heute",value:0},{name:"day",src:"morgen",value:1},{name:"day",src:"bermorgen|ubermorgen|uebermorgen",value:2},{name:"sign",src:"vor:|her",value:-1},{name:"sign",src:"in",value:1},{name:"shift",src:"letzte:|r|n|s",value:-1},{name:"shift",src:"nchste:|r|n|s+nachste:|r|n|s+naechste:|r|n|s+kommende:n|r",value:1}],dateParse:["{sign} {num} {unit}","{num} {unit} {sign}","{shift} {unit=5-7}"],timeParse:["{weekday?} {date?} {month} {year?}","{shift} {weekday}"]});Date.addLocale("es",{plural:true,months:"enero,febrero,marzo,abril,mayo,junio,julio,agosto,septiembre,octubre,noviembre,diciembre",weekdays:"domingo,lunes,martes,mircoles|miercoles,jueves,viernes,sbado|sabado",units:"milisegundo:|s,segundo:|s,minuto:|s,hora:|s,da|das|dia|dias,semana:|s,mes:|es,ao|aos|ano|anos",numbers:"uno,dos,tres,cuatro,cinco,seis,siete,ocho,nueve,diez",tokens:"el,la,de","short":"{d} {month} {yyyy}","long":"{d} {month} {yyyy} {H}:{mm}",full:"{Weekday} {d} {month} {yyyy} {H}:{mm}:{ss}",past:"{sign} {num} {unit}",future:"{sign} {num} {unit}",duration:"{num} {unit}",timeMarker:"a las",ampm:"am,pm",modifiers:[{name:"day",src:"anteayer",value:-2},{name:"day",src:"ayer",value:-1},{name:"day",src:"hoy",value:0},{name:"day",src:"maana|manana",value:1},{name:"sign",src:"hace",value:-1},{name:"sign",src:"dentro de",value:1},{name:"shift",src:"pasad:o|a",value:-1},{name:"shift",src:"prximo|prxima|proximo|proxima",value:1}],dateParse:["{sign} {num} {unit}","{num} {unit} {sign}","{0?}{1?} {unit=5-7} {shift}","{0?}{1?} {shift} {unit=5-7}"],timeParse:["{shift} {weekday}","{weekday} {shift}","{date?} {2?} {month} {2?} {year?}"]});Date.addLocale("fi",{plural:true,timeMarker:"kello",ampm:",",months:"tammikuu,helmikuu,maaliskuu,huhtikuu,toukokuu,keskuu,heinkuu,elokuu,syyskuu,lokakuu,marraskuu,joulukuu",weekdays:"sunnuntai,maanantai,tiistai,keskiviikko,torstai,perjantai,lauantai",units:"millisekun:ti|tia|teja|tina|nin,sekun:ti|tia|teja|tina|nin,minuut:ti|tia|teja|tina|in,tun:ti|tia|teja|tina|nin,piv:||i|n|n,viik:ko|koa|koja|on|kona,kuukau:si|sia|tta|den|tena,vuo:si|sia|tta|den|tena",numbers:"yksi|ensimminen,kaksi|toinen,kolm:e|as,nelj:s,vii:si|des,kuu:si|des,seitsem:n|s,kahdeksa:n|s,yhdeks:n|s,kymmene:n|s",articles:"",optionals:"","short":"{d}. {month}ta {yyyy}","long":"{d}. {month}ta {yyyy} kello {H}.{mm}",full:"{Weekday}na {d}. {month}ta {yyyy} kello {H}.{mm}",relative:function(num,unit,ms,format){var units=this["units"];function numberWithUnit(mult){return(num===1?"":num+" ")+units[8*mult+unit]}switch(format){case"duration":return numberWithUnit(0);case"past":return numberWithUnit(num>1?1:0)+" sitten";case"future":return numberWithUnit(4)+" pst"}},modifiers:[{name:"day",src:"toissa pivn|toissa pivist",value:-2},{name:"day",src:"eilen|eilist",value:-1},{name:"day",src:"tnn",value:0},{name:"day",src:"huomenna|huomista",value:1},{name:"day",src:"ylihuomenna|ylihuomista",value:2},{name:"sign",src:"sitten|aiemmin",value:-1},{name:"sign",src:"pst|kuluttua|myhemmin",value:1},{name:"edge",src:"viimeinen|viimeisen",value:-2},{name:"edge",src:"lopussa",value:-1},{name:"edge",src:"ensimminen|ensimmisen",value:1},{name:"shift",src:"edellinen|edellisen|edeltv|edeltvn|viime|toissa",value:-1},{name:"shift",src:"tn|tmn",value:0},{name:"shift",src:"seuraava|seuraavana|tuleva|tulevana|ensi",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{num} {unit=4-5} {sign} {day}","{month} {year}","{shift} {unit=5-7}"],timeParse:["{0} {num}{1} {day} of {month} {year?}","{weekday?} {month} {date}{1} {year?}","{date} {month} {year}","{shift} {weekday}","{shift} week {weekday}","{weekday} {2} {shift} week","{0} {date}{1} of {month}","{0}{month?} {date?}{1} of {shift} {unit=6-7}"]});Date.addLocale("fr",{plural:true,months:"janvier,fvrier|fevrier,mars,avril,mai,juin,juillet,aot,septembre,octobre,novembre,dcembre|decembre",weekdays:"dimanche,lundi,mardi,mercredi,jeudi,vendredi,samedi",units:"milliseconde:|s,seconde:|s,minute:|s,heure:|s,jour:|s,semaine:|s,mois,an:|s|ne|nee",numbers:"un:|e,deux,trois,quatre,cinq,six,sept,huit,neuf,dix",tokens:"l'|la|le","short":"{d} {month} {yyyy}","long":"{d} {month} {yyyy} {H}:{mm}",full:"{Weekday} {d} {month} {yyyy} {H}:{mm}:{ss}",past:"{sign} {num} {unit}",future:"{sign} {num} {unit}",duration:"{num} {unit}",timeMarker:"",ampm:"am,pm",modifiers:[{name:"day",src:"hier",value:-1},{name:"day",src:"aujourd'hui",value:0},{name:"day",src:"demain",value:1},{name:"sign",src:"il y a",value:-1},{name:"sign",src:"dans|d'ici",value:1},{name:"shift",src:"derni:r|er|re|ere",value:-1},{name:"shift",src:"prochain:|e",value:1}],dateParse:["{sign} {num} {unit}","{sign} {num} {unit}","{0?} {unit=5-7} {shift}"],timeParse:["{weekday?} {0?} {date?} {month} {year?}","{0?} {weekday} {shift}"]});Date.addLocale("it",{plural:true,months:"Gennaio,Febbraio,Marzo,Aprile,Maggio,Giugno,Luglio,Agosto,Settembre,Ottobre,Novembre,Dicembre",weekdays:"Domenica,Luned:|i,Marted:|i,Mercoled:|i,Gioved:|i,Venerd:|i,Sabato",units:"millisecond:o|i,second:o|i,minut:o|i,or:a|e,giorn:o|i,settiman:a|e,mes:e|i,ann:o|i",numbers:"un:|a|o|',due,tre,quattro,cinque,sei,sette,otto,nove,dieci",tokens:"l'|la|il","short":"{d} {Month} {yyyy}","long":"{d} {Month} {yyyy} {H}:{mm}",full:"{Weekday} {d} {Month} {yyyy} {H}:{mm}:{ss}",past:"{num} {unit} {sign}",future:"{num} {unit} {sign}",duration:"{num} {unit}",timeMarker:"alle",ampm:"am,pm",modifiers:[{name:"day",src:"ieri",value:-1},{name:"day",src:"oggi",value:0},{name:"day",src:"domani",value:1},{name:"day",src:"dopodomani",value:2},{name:"sign",src:"fa",value:-1},{name:"sign",src:"da adesso",value:1},{name:"shift",src:"scors:o|a",value:-1},{name:"shift",src:"prossim:o|a",value:1}],dateParse:["{num} {unit} {sign}","{0?} {unit=5-7} {shift}","{0?} {shift} {unit=5-7}"],timeParse:["{weekday?} {date?} {month} {year?}","{shift} {weekday}"]});Date.addLocale("ja",{monthSuffix:"",weekdays:",,,,,,",units:",,,,,|,||,","short":"{yyyy}{M}{d}","long":"{yyyy}{M}{d} {H}{mm}",full:"{yyyy}{M}{d} {Weekday} {H}{mm}{ss}",past:"{num}{unit}{sign}",future:"{num}{unit}{sign}",duration:"{num}{unit}",timeSuffixes:",,",ampm:",",modifiers:[{name:"day",src:"",value:-2},{name:"day",src:"",value:-1},{name:"day",src:"",value:0},{name:"day",src:"",value:1},{name:"day",src:"",value:2},{name:"sign",src:"",value:-1},{name:"sign",src:"",value:1},{name:"shift",src:"|",value:-1},{name:"shift",src:"",value:1}],dateParse:["{num}{unit}{sign}"],timeParse:["{shift}{unit=5-7}{weekday?}","{year}{month?}?{date?}?","{month}{date?}?","{date}"]});Date.addLocale("ko",{digitDate:true,monthSuffix:"",weekdays:",,,,,,",units:",,,,,,|,",numbers:"|,,,,,,,,,","short":"{yyyy}{M}{d}","long":"{yyyy}{M}{d} {H}{mm}",full:"{yyyy}{M}{d} {Weekday} {H}{mm}{ss}",past:"{num}{unit} {sign}",future:"{num}{unit} {sign}",duration:"{num}{unit}",timeSuffixes:",,",ampm:",",modifiers:[{name:"day",src:"",value:-2},{name:"day",src:"",value:-1},{name:"day",src:"",value:0},{name:"day",src:"",value:1},{name:"day",src:"",value:2},{name:"sign",src:"",value:-1},{name:"sign",src:"",value:1},{name:"shift",src:"|",value:-1},{name:"shift",src:"",value:0},{name:"shift",src:"|",value:1}],dateParse:["{num}{unit} {sign}","{shift?} {unit=5-7}"],timeParse:["{shift} {unit=5?} {weekday}","{year}{month?}?{date?}?","{month}{date?}?","{date}"]});Date.addLocale("nl",{plural:true,months:"januari,februari,maart,april,mei,juni,juli,augustus,september,oktober,november,december",weekdays:"zondag|zo,maandag|ma,dinsdag|di,woensdag|woe|wo,donderdag|do,vrijdag|vrij|vr,zaterdag|za",units:"milliseconde:|n,seconde:|n,minu:ut|ten,uur,dag:|en,we:ek|ken,maand:|en,jaar",numbers:"een,twee,drie,vier,vijf,zes,zeven,acht,negen",tokens:"","short":"{d} {Month} {yyyy}","long":"{d} {Month} {yyyy} {H}:{mm}",full:"{Weekday} {d} {Month} {yyyy} {H}:{mm}:{ss}",past:"{num} {unit} {sign}",future:"{num} {unit} {sign}",duration:"{num} {unit}",timeMarker:"'s|om",modifiers:[{name:"day",src:"gisteren",value:-1},{name:"day",src:"vandaag",value:0},{name:"day",src:"morgen",value:1},{name:"day",src:"overmorgen",value:2},{name:"sign",src:"geleden",value:-1},{name:"sign",src:"vanaf nu",value:1},{name:"shift",src:"laatste|vorige|afgelopen",value:-1},{name:"shift",src:"volgend:|e",value:1}],dateParse:["{num} {unit} {sign}","{0?} {unit=5-7} {shift}","{0?} {shift} {unit=5-7}"],timeParse:["{weekday?} {date?} {month} {year?}","{shift} {weekday}"]});Date.addLocale("pl",{plural:true,months:"Stycze|Stycznia,Luty|Lutego,Marzec|Marca,Kwiecie|Kwietnia,Maj|Maja,Czerwiec|Czerwca,Lipiec|Lipca,Sierpie|Sierpnia,Wrzesie|Wrzenia,Padziernik|Padziernika,Listopad|Listopada,Grudzie|Grudnia",weekdays:"Niedziela|Niedziel,Poniedziaek,Wtorek,rod:a|,Czwartek,Pitek,Sobota|Sobot",units:"milisekund:a|y|,sekund:a|y|,minut:a|y|,godzin:a|y|,dzie|dni,tydzie|tygodnie|tygodni,miesice|miesice|miesicy,rok|lata|lat",numbers:"jeden|jedn,dwa|dwie,trzy,cztery,pi,sze,siedem,osiem,dziewi,dziesi",optionals:"w|we,roku","short":"{d} {Month} {yyyy}","long":"{d} {Month} {yyyy} {H}:{mm}",full:"{Weekday}, {d} {Month} {yyyy} {H}:{mm}:{ss}",past:"{num} {unit} {sign}",future:"{sign} {num} {unit}",duration:"{num} {unit}",timeMarker:"o",ampm:"am,pm",modifiers:[{name:"day",src:"przedwczoraj",value:-2},{name:"day",src:"wczoraj",value:-1},{name:"day",src:"dzisiaj|dzi",value:0},{name:"day",src:"jutro",value:1},{name:"day",src:"pojutrze",value:2},{name:"sign",src:"temu|przed",value:-1},{name:"sign",src:"za",value:1},{name:"shift",src:"zeszy|zesza|ostatni|ostatnia",value:-1},{name:"shift",src:"nastpny|nastpna|nastpnego|przyszy|przysza|przyszego",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{month} {year}","{shift} {unit=5-7}","{0} {shift?} {weekday}"],timeParse:["{date} {month} {year?} {1}","{0} {shift?} {weekday}"]});Date.addLocale("pt",{plural:true,months:"janeiro,fevereiro,maro,abril,maio,junho,julho,agosto,setembro,outubro,novembro,dezembro",weekdays:"domingo,segunda-feira,tera-feira,quarta-feira,quinta-feira,sexta-feira,sbado|sabado",units:"milisegundo:|s,segundo:|s,minuto:|s,hora:|s,dia:|s,semana:|s,ms|mses|mes|meses,ano:|s",numbers:"um,dois,trs|tres,quatro,cinco,seis,sete,oito,nove,dez,uma,duas",tokens:"a,de","short":"{d} de {month} de {yyyy}","long":"{d} de {month} de {yyyy} {H}:{mm}",full:"{Weekday}, {d} de {month} de {yyyy} {H}:{mm}:{ss}",past:"{num} {unit} {sign}",future:"{sign} {num} {unit}",duration:"{num} {unit}",timeMarker:"s",ampm:"am,pm",modifiers:[{name:"day",src:"anteontem",value:-2},{name:"day",src:"ontem",value:-1},{name:"day",src:"hoje",value:0},{name:"day",src:"amanh:|a",value:1},{name:"sign",src:"atrs|atras|h|ha",value:-1},{name:"sign",src:"daqui a",value:1},{name:"shift",src:"passad:o|a",value:-1},{name:"shift",src:"prximo|prxima|proximo|proxima",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{0?} {unit=5-7} {shift}","{0?} {shift} {unit=5-7}"],timeParse:["{date?} {1?} {month} {1?} {year?}","{0?} {shift} {weekday}"]});Date.addLocale("ru",{months:":|,:|,:|,:|,:|,:|,:|,:|,:|,:|,:|,:|",weekdays:",,,,,,",units:":|||,:|||,:|||,:|||,|||,:||||,:||||,||||",numbers:":|,:|,,,,,,,,",tokens:"|,","short":"{d} {month} {yyyy} ","long":"{d} {month} {yyyy}  {H}:{mm}",full:"{Weekday} {d} {month} {yyyy}  {H}:{mm}:{ss}",relative:function(num,unit,ms,format){var numberWithUnit,last=num.toString().slice(-1),mult;
switch(true){case num>=11&&num<=15:mult=3;break;case last==1:mult=1;break;case last>=2&&last<=4:mult=2;break;default:mult=3}numberWithUnit=num+" "+this["units"][mult*8+unit];switch(format){case"duration":return numberWithUnit;case"past":return numberWithUnit+" ";case"future":return" "+numberWithUnit}},timeMarker:"",ampm:" , ",modifiers:[{name:"day",src:"",value:-2},{name:"day",src:"",value:-1},{name:"day",src:"",value:0},{name:"day",src:"",value:1},{name:"day",src:"",value:2},{name:"sign",src:"",value:-1},{name:"sign",src:"",value:1},{name:"shift",src:":||",value:-1},{name:"shift",src:":||",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{month} {year}","{0?} {shift} {unit=5-7}"],timeParse:["{date} {month} {year?} {1?}","{0?} {shift} {weekday}"]});Date.addLocale("sv",{plural:true,months:"januari,februari,mars,april,maj,juni,juli,augusti,september,oktober,november,december",weekdays:"sndag|sondag,mndag:|en+mandag:|en,tisdag,onsdag,torsdag,fredag,lrdag|lordag",units:"millisekund:|er,sekund:|er,minut:|er,timm:e|ar,dag:|ar,veck:a|or|an,mnad:|er|en+manad:|er|en,r:||et+ar:||et",numbers:"en|ett,tv|tva,tre,fyra,fem,sex,sju,tta|atta,nio,tio",tokens:"den,fr|for",articles:"den","short":"den {d} {month} {yyyy}","long":"den {d} {month} {yyyy} {H}:{mm}",full:"{Weekday} den {d} {month} {yyyy} {H}:{mm}:{ss}",past:"{num} {unit} {sign}",future:"{sign} {num} {unit}",duration:"{num} {unit}",ampm:"am,pm",modifiers:[{name:"day",src:"frrgr|i frrgr|ifrrgr|forrgar|i forrgar|iforrgar",value:-2},{name:"day",src:"gr|i gr|igr|gar|i gar|igar",value:-1},{name:"day",src:"dag|i dag|idag",value:0},{name:"day",src:"morgon|i morgon|imorgon",value:1},{name:"day",src:"ver morgon|vermorgon|i ver morgon|i vermorgon|ivermorgon|over morgon|overmorgon|i over morgon|i overmorgon|iovermorgon",value:2},{name:"sign",src:"sedan|sen",value:-1},{name:"sign",src:"om",value:1},{name:"shift",src:"i frra|frra|i forra|forra",value:-1},{name:"shift",src:"denna",value:0},{name:"shift",src:"nsta|nasta",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{1?} {num} {unit} {sign}","{shift} {unit=5-7}"],timeParse:["{0?} {weekday?} {date?} {month} {year}","{date} {month}","{shift} {weekday}"]});Date.addLocale("zh-CN",{variant:true,monthSuffix:"",weekdays:"|,|,|,|,|,|,|",units:",,,,,|,,",tokens:"|","short":"{yyyy}{M}{d}","long":"{yyyy}{M}{d} {tt}{h}:{mm}",full:"{yyyy}{M}{d} {weekday} {tt}{h}:{mm}:{ss}",past:"{num}{unit}{sign}",future:"{num}{unit}{sign}",duration:"{num}{unit}",timeSuffixes:"|,?,",ampm:",",modifiers:[{name:"day",src:"",value:-2},{name:"day",src:"",value:-1},{name:"day",src:"",value:0},{name:"day",src:"",value:1},{name:"day",src:"",value:2},{name:"sign",src:"",value:-1},{name:"sign",src:"",value:1},{name:"shift",src:"|",value:-1},{name:"shift",src:"",value:0},{name:"shift",src:"|",value:1}],dateParse:["{num}{unit}{sign}","{shift}{unit=5-7}"],timeParse:["{shift}{weekday}","{year}{month?}?{date?}{0?}","{month}{date?}{0?}","{date}[]"]});Date.addLocale("zh-TW",{monthSuffix:"",weekdays:"|,|,|,|,|,|,|",units:",,,,,|,,",tokens:"|","short":"{yyyy}{M}{d}","long":"{yyyy}{M}{d} {tt}{h}:{mm}",full:"{yyyy}{M}{d} {Weekday} {tt}{h}:{mm}:{ss}",past:"{num}{unit}{sign}",future:"{num}{unit}{sign}",duration:"{num}{unit}",timeSuffixes:"|,?,",ampm:",",modifiers:[{name:"day",src:"",value:-2},{name:"day",src:"",value:-1},{name:"day",src:"",value:0},{name:"day",src:"",value:1},{name:"day",src:"",value:2},{name:"sign",src:"",value:-1},{name:"sign",src:"",value:1},{name:"shift",src:"|",value:-1},{name:"shift",src:"",value:0},{name:"shift",src:"|",value:1}],dateParse:["{num}{unit}{sign}","{shift}{unit=5-7}"],timeParse:["{shift}{weekday}","{year}{month?}?{date?}{0?}","{month}{date?}{0?}","{date}[]"]})}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],48:[function(require,module,exports){"use strict";var assert=require("chai").assert;var E=require("linq");var moment=require("moment");var ArrayEnumerator=require("./enumerators/array");var validateEnumerator=function(enumerator){assert.isObject(enumerator,"Expected an 'enumerator' object.");assert.isFunction(enumerator.moveNext,"Expected enumerator to have function 'moveNext'.");assert.isFunction(enumerator.getCurrent,"Expected enumerator to have function 'getCurrent'.")};var BaseColumn=function(){};BaseColumn.prototype.skip=function(numRows){assert.isNumber(numRows,"Expected 'numRows' parameter to 'skip' function to be a number.");var LazyColumn=require("./lazycolumn");var self=this;return new LazyColumn(self.getName(),function(){return new ArrayEnumerator(E.from(self.toValues()).skip(numRows).toArray())},function(){return self.getIndex().skip(numRows)})};BaseColumn.prototype.take=function(numRows){assert.isNumber(numRows,"Expected 'numRows' parameter to 'take' function to be a number.");var LazyColumn=require("./lazycolumn");var self=this;return new LazyColumn(self.getName(),function(){return new ArrayEnumerator(E.from(self.toValues()).take(numRows).toArray())},function(){return self.getIndex().take(numRows)})};BaseColumn.prototype.where=function(filterSelectorPredicate){assert.isFunction(filterSelectorPredicate,"Expected 'filterSelectorPredicate' parameter to 'where' function to be a function.");var self=this;var cachedFilteredIndexAndValues=null;var executeLazyWhere=function(){if(cachedFilteredIndexAndValues){return cachedFilteredIndexAndValues}cachedFilteredIndexAndValues=E.from(self.getIndex().toValues()).zip(self.toValues(),function(index,value){return[index,value]}).where(function(data){var value=data[1];return filterSelectorPredicate(value)}).toArray();return cachedFilteredIndexAndValues};var LazyColumn=require("./lazycolumn");return new LazyColumn(self.getName(),function(){return new ArrayEnumerator(E.from(executeLazyWhere()).select(function(data){return data[1]}).toArray())},function(){var LazyIndex=require("./lazyindex");return new LazyIndex(self.getIndex().getName(),function(){return new ArrayEnumerator(E.from(executeLazyWhere()).select(function(data){return data[0]}).toArray())})})};BaseColumn.prototype.select=function(selector){assert.isFunction(selector,"Expected 'selector' parameter to 'select' function to be a function.");var self=this;var LazyColumn=require("./lazycolumn");return new LazyColumn(self.getName(),function(){return new ArrayEnumerator(E.from(self.toValues()).select(function(value){return selector(value)}).toArray())},function(){return self.getIndex()})};BaseColumn.prototype.selectMany=function(selector){assert.isFunction(selector,"Expected 'selector' parameter to 'selectMany' function to be a function.");var self=this;var newIndexAndNewValues=null;var newValues=null;var lazyEvaluate=function(){if(newIndexAndNewValues){return}newIndexAndNewValues=E.from(self.getIndex().toValues()).zip(self.toValues(),function(index,value){return[index,selector(value)]}).toArray();newValues=E.from(newIndexAndNewValues).selectMany(function(data){return data[1]}).toArray()};var LazyColumn=require("./lazycolumn");return new LazyColumn(self.getName(),function(){lazyEvaluate();return new ArrayEnumerator(newValues)},function(){var LazyIndex=require("./lazyindex");return new LazyIndex(self.getIndex().getName(),function(){lazyEvaluate();var indexValues=E.from(newIndexAndNewValues).selectMany(function(data){var index=data[0];var values=data[1];return E.range(0,values.length).select(function(_){return index}).toArray()}).toArray();return new ArrayEnumerator(indexValues)})})};var validateSortMethod=function(sortMethod){assert.isString(sortMethod);assert(sortMethod==="orderBy"||sortMethod==="orderByDescending"||sortMethod==="thenBy"||sortMethod==="thenByDescending","Expected 'sortMethod' to be one of 'orderBy', 'orderByDescending', 'thenBy' or 'thenByDescending', instead it is '"+sortMethod+"'.")};var executeOrderBy=function(self,batch){assert.isObject(self);assert.isArray(batch);assert(batch.length>0);var cachedSorted=null;var executeLazySort=function(){if(cachedSorted){return cachedSorted}batch.forEach(function(orderCmd){assert.isObject(orderCmd);assert.isFunction(orderCmd.sortSelector);validateSortMethod(orderCmd.sortMethod)});var valuesWithIndex=E.from(self.getIndex().toValues()).zip(self.toValues(),function(index,value){return[index,value]}).toArray();cachedSorted=E.from(batch).aggregate(E.from(valuesWithIndex),function(unsorted,orderCmd){return unsorted[orderCmd.sortMethod](function(row){var value=row[1];return orderCmd.sortSelector(value)})}).toArray();return cachedSorted};var LazyDataFrame=require("./lazydataframe");return new LazyDataFrame(function(){return self.getColumnNames()},function(){return new ArrayEnumerator(E.from(executeLazySort()).select(function(row){return row[1]}).toArray())},function(){var LazyIndex=require("./lazyindex");return new LazyIndex(self.getIndex().getName(),function(){return new ArrayEnumerator(E.from(executeLazySort()).select(function(row){return row[0]}).toArray())})})};var orderBy=function(self,sortMethod,sortSelector){assert.isObject(self);validateSortMethod(sortMethod);assert.isFunction(sortSelector);var batchOrder=[{sortSelector:sortSelector,sortMethod:sortMethod}];var sortedDataFrame=executeOrderBy(self,batchOrder);sortedDataFrame.thenBy=orderThenBy(self,batchOrder,"thenBy");sortedDataFrame.thenByDescending=orderThenBy(self,batchOrder,"thenByDescending");return sortedDataFrame};var orderThenBy=function(self,batch,nextSortMethod){assert.isObject(self);assert.isArray(batch);assert(batch.length>0);validateSortMethod(nextSortMethod);return function(sortSelector){assert.isFunction(sortSelector,"Expected parameter 'sortSelector' to be a function");var extendedBatch=batch.concat([{sortSelector:sortSelector,sortMethod:nextSortMethod}]);var sortedDataFrame=executeOrderBy(self,extendedBatch);sortedDataFrame.thenBy=orderThenBy(self,extendedBatch,"thenBy");sortedDataFrame.thenByDescending=orderThenBy(self,extendedBatch,"thenByDescending");return sortedDataFrame}};BaseColumn.prototype.order=function(){var self=this;return orderBy(self,"orderBy",function(value){return value})};BaseColumn.prototype.orderDescending=function(optionalSortSelector){var self=this;return orderBy(self,"orderByDescending",function(value){return value})};BaseColumn.prototype.orderBy=function(sortSelector){assert.isFunction;var self=this;return orderBy(self,"orderBy",sortSelector)};BaseColumn.prototype.orderByDescending=function(sortSelector){var self=this;return orderBy(self,"orderByDescending",sortSelector)};BaseColumn.prototype.getRowsSubset=function(index,count){assert.isNumber(index,"Expected 'index' parameter to getRowsSubset to be an integer.");assert.isNumber(index,"Expected 'count' parameter to getRowsSubset to be an integer.");var self=this;var LazyColumn=require("./lazycolumn");return new LazyColumn(self.getName(),function(){return new ArrayEnumerator(E.from(self.toValues()).skip(index).take(count).toArray())},function(){return self.getIndex().getRowsSubset(index,count)})};BaseColumn.prototype.rollingWindow=function(period,fn){assert.isNumber(period,"Expected 'period' parameter to 'rollingWindow' to be a number.");assert.isFunction(fn,"Expected 'fn' parameter to 'rollingWindow' to be a function.");var self=this;var index=self.getIndex().toValues();var values=self.toValues();if(values.length==0){var Column=require("./column");return new Column(self.getName(),[])}var newIndexAndValues=E.range(0,values.length-period+1).select(function(rowIndex){var _index=E.from(index).skip(rowIndex).take(period).toArray();var _values=E.from(values).skip(rowIndex).take(period).toArray();return fn(_index,_values,rowIndex)}).toArray();var LazyColumn=require("./lazycolumn");return new LazyColumn(self.getName(),function(){return new ArrayEnumerator(E.from(newIndexAndValues).select(function(indexAndValue){return indexAndValue[1]}).toArray())},function(){var LazyIndex=require("./lazyindex");return new LazyIndex(self.getIndex().getName(),function(){return new ArrayEnumerator(E.from(newIndexAndValues).select(function(indexAndValue){return indexAndValue[0]}).toArray())})})};BaseColumn.prototype.reindex=function(newIndex){assert.isObject(newIndex,"Expected 'newIndex' parameter to 'reindex' function to be an index.");var self=this;var LazyColumn=require("./lazycolumn");return new LazyColumn(self.getName(),function(){var indexMap={};var indexExists={};E.from(self.getIndex().toValues()).zip(self.toValues(),function(indexValue,columnValue){return[indexValue,columnValue]}).toArray().forEach(function(pair){var index=pair[0];var value=pair[1];if(indexExists[index]){throw new Error("Duplicate index detected, failed to 'reindex'")}indexMap[index]=value;indexExists[index]=true});return new ArrayEnumerator(E.from(newIndex.toValues()).select(function(newIndexValue){return indexMap[newIndexValue]}).toArray())},function(){return newIndex})};BaseColumn.prototype.toString=function(){var self=this;var Table=require("easy-table");var index=self.getIndex().toValues();var header=[self.getIndex().getName(),self.getName()];var rows=E.from(self.toValues()).select(function(value,rowIndex){return[index[rowIndex],value]}).toArray();var t=new Table;rows.forEach(function(row,rowIndex){row.forEach(function(cell,cellIndex){t.cell(header[cellIndex],cell)});t.newRow()});return t.toString()};BaseColumn.prototype.percentChange=function(){var self=this;return self.rollingWindow(2,function(index,window){var amountChange=window[1]-window[0];return[index[1],amountChange/window[0]]})};BaseColumn.prototype.parseInts=function(){var self=this;return self.select(function(value,valueIndex){if(value===undefined){return undefined}else{assert.isString(value,"Called parseInt on column '"+self.getName()+"', expected all values in the column to be strings, instead found a '"+typeof value+"' at index "+valueIndex);if(value.length===0){return undefined}return parseInt(value)}})};BaseColumn.prototype.parseFloats=function(){var self=this;return self.select(function(value,valueIndex){if(value===undefined){return undefined}else{assert.isString(value,"Called parseInt on column '"+self.getName()+"', expected all values in the column to be strings, instead found a '"+typeof value+"' at index "+valueIndex);if(value.length===0){return undefined}return parseFloat(value)}})};BaseColumn.prototype.parseDates=function(){var self=this;return self.select(function(value,valueIndex){if(value===undefined){return undefined}else{assert.isString(value,"Called parseInt on column '"+self.getName()+"', expected all values in the column to be strings, instead found a '"+typeof value+"' at index "+valueIndex);if(value.length===0){return undefined}return moment(value).toDate()}})};BaseColumn.prototype.toStrings=function(){var self=this;return self.select(function(value){if(value===undefined){return undefined}else if(value===null){return null}else{return value.toString()}})};BaseColumn.prototype.detectTypes=function(){var self=this;var LazyDataFrame=require("./lazydataframe");return new LazyDataFrame(function(){return["type","frequency"]},function(){var values=self.toValues();var totalValues=values.length;var typeFrequencies=E.from(values).select(function(value){var valueType=typeof value;if(valueType==="object"){if(Object.isDate(value)){valueType="date"}}return valueType}).aggregate({},function(accumulated,valueType){var typeInfo=accumulated[valueType];if(!typeInfo){typeInfo={count:0};accumulated[valueType]=typeInfo}++typeInfo.count;return accumulated});return new ArrayEnumerator(E.from(Object.keys(typeFrequencies)).select(function(valueType){return[valueType,typeFrequencies[valueType].count/totalValues*100]}).toArray())})};BaseColumn.prototype.truncateStrings=function(maxLength){assert.isNumber(maxLength,"Expected 'maxLength' parameter to 'truncateStrings' to be an integer.");var self=this;return self.select(function(value){if(Object.isString(value)){if(value.length>maxLength){return value.substring(0,maxLength)}}return value})};BaseColumn.prototype.toValues=function(){var self=this;var enumerator=self.getEnumerator();validateEnumerator(enumerator);var values=[];while(enumerator.moveNext()){values.push(enumerator.getCurrent())}return values};module.exports=BaseColumn},{"./column":51,"./enumerators/array":53,"./lazycolumn":56,"./lazydataframe":57,"./lazyindex":58,chai:8,"easy-table":44,linq:45,moment:46}],49:[function(require,module,exports){"use strict";var LazyColumn=require("./lazycolumn");var LazyIndex=require("./lazyindex");var ArrayEnumerator=require("./enumerators/array");var assert=require("chai").assert;var E=require("linq");var validateEnumerator=function(enumerator){assert.isObject(enumerator,"Expected an 'enumerator' object.");assert.isFunction(enumerator.moveNext,"Expected enumerator to have function 'moveNext'.");assert.isFunction(enumerator.getCurrent,"Expected enumerator to have function 'getCurrent'.")};var BaseDataFrame=function(){};var mapRowByColumns=function(self,row){return E.from(self.getColumnNames()).zip(row,function(columnName,columnValue){return[columnName,columnValue]}).toObject(function(column){return column[0]},function(column){return column[1]})};BaseDataFrame.prototype.getColumnIndex=function(columnName){assert.isString(columnName,"Expected 'columnName' parameter to getColumnIndex to be a non-empty string.");var self=this;var columnNames=self.getColumnNames();for(var i=0;i<columnNames.length;++i){if(columnName==columnNames[i]){return i}}return-1};BaseDataFrame.prototype.skip=function(numRows){assert.isNumber(numRows,"Expected 'numRows' parameter to 'skip' function to be a number.");var LazyDataFrame=require("./lazydataframe");var self=this;return new LazyDataFrame(function(){return self.getColumnNames()},function(){var enumerator=self.getEnumerator();return{moveNext:function(){while(--numRows>=0&&enumerator.moveNext()){}return enumerator.moveNext()},getCurrent:function(){return enumerator.getCurrent()}}},function(){return self.getIndex().skip(numRows)})};BaseDataFrame.prototype.take=function(numRows){assert.isNumber(numRows,"Expected 'numRows' parameter to 'take' function to be a number.");var LazyDataFrame=require("./lazydataframe");var self=this;return new LazyDataFrame(function(){return self.getColumnNames()},function(){var enumerator=self.getEnumerator();return{moveNext:function(){if(--numRows>=0){return enumerator.moveNext()}return false},getCurrent:function(){return enumerator.getCurrent()}}},function(){return self.getIndex().take(numRows)})};BaseDataFrame.prototype.where=function(filterSelectorPredicate){assert.isFunction(filterSelectorPredicate,"Expected 'filterSelectorPredicate' parameter to 'where' function to be a function.");var self=this;var cachedFilteredIndexAndValues=null;var executeLazyWhere=function(){if(cachedFilteredIndexAndValues){return cachedFilteredIndexAndValues}cachedFilteredIndexAndValues=E.from(self.getIndex().toValues()).zip(self.toValues(),function(index,values){return[index,values]}).where(function(data){var row=data[1];return filterSelectorPredicate(mapRowByColumns(self,row))}).toArray();return cachedFilteredIndexAndValues};var LazyDataFrame=require("./lazydataframe");return new LazyDataFrame(function(){return self.getColumnNames()},function(){return new ArrayEnumerator(E.from(executeLazyWhere()).select(function(data){return data[1]}).toArray())},function(){return new LazyIndex(self.getIndex().getName(),function(){return new ArrayEnumerator(E.from(executeLazyWhere()).select(function(data){return data[0]}).toArray())})})};BaseDataFrame.prototype.select=function(selector){assert.isFunction(selector,"Expected 'selector' parameter to 'select' function to be a function.");var self=this;var newValues=null;var newColumnNames=null;var lazyEvaluate=function(){if(newValues){return}newValues=E.from(self.toValues()).select(function(row){return selector(mapRowByColumns(self,row))}).toArray();newColumnNames=E.from(newValues).selectMany(function(value){return Object.keys(value)}).distinct().toArray()};var LazyDataFrame=require("./lazydataframe");return new LazyDataFrame(function(){lazyEvaluate();return newColumnNames},function(){lazyEvaluate();return new ArrayEnumerator(E.from(newValues).select(function(value){return E.from(newColumnNames).select(function(columnName){return value[columnName]}).toArray()}).toArray())},function(){return self.getIndex()})};BaseDataFrame.prototype.selectMany=function(selector){assert.isFunction(selector,"Expected 'selector' parameter to 'selectMany' function to be a function.");var self=this;var newColumnNames=null;var newValues=null;var newRows=null;var lazyEvaluate=function(){if(newValues){return}newValues=E.from(self.getIndex().toValues()).zip(self.toValues(),function(index,row){return[index,selector(mapRowByColumns(self,row))]}).toArray();newColumnNames=E.from(newValues).selectMany(function(data){var values=data[1];return E.from(values).selectMany(function(value){return Object.keys(value)}).toArray()}).distinct().toArray();newRows=E.from(newValues).selectMany(function(data){var values=data[1];return E.from(values).select(function(value){return E.from(newColumnNames).select(function(columnName){return value[columnName]}).toArray()}).toArray()}).toArray()};var LazyDataFrame=require("./lazydataframe");return new LazyDataFrame(function(){lazyEvaluate();return newColumnNames},function(){lazyEvaluate();return new ArrayEnumerator(newRows)},function(){return new LazyIndex(self.getIndex().getName(),function(){lazyEvaluate();var indexValues=E.from(newValues).selectMany(function(data){var index=data[0];var values=data[1];return E.range(0,values.length).select(function(_){return index}).toArray()}).toArray();return new ArrayEnumerator(indexValues)})})};BaseDataFrame.prototype.getColumn=function(columnNameOrIndex){var self=this;var columnIndex;if(Object.isString(columnNameOrIndex)){columnIndex=self.getColumnIndex(columnNameOrIndex);if(columnIndex<0){throw new Error("In call to 'getColumn' failed to find column '"+columnNameOrIndex+"'.")}}else{assert.isNumber(columnNameOrIndex,"Expected 'columnNameOrIndex' parameter to 'getColumn' to be either a string or index that specifies the column to retreive.");columnIndex=columnNameOrIndex}return new LazyColumn(self.getColumnNames()[columnIndex],function(){return new ArrayEnumerator(E.from(self.toValues()).select(function(entry){return entry[columnIndex]}).toArray())},function(){return self.getIndex()})};BaseDataFrame.prototype.getColumns=function(){var self=this;return E.from(self.getColumnNames()).select(function(columnName){return self.getColumn(columnName)}).toArray()};BaseDataFrame.prototype.getColumnsSubset=function(columnNames){var LazyDataFrame=require("./lazydataframe");var self=this;assert.isArray(columnNames,"Expected 'columnName' parameter to 'getColumnsSubset' to be an array.");return new LazyDataFrame(function(){return columnNames},function(){var columnIndices=E.from(columnNames).select(function(columnName){return self.getColumnIndex(columnName)}).toArray();return new ArrayEnumerator(E.from(self.toValues()).select(function(entry){return E.from(columnIndices).select(function(columnIndex){return entry[columnIndex]}).toArray()}).toArray())},function(){return self.getIndex()})};var validateSortMethod=function(sortMethod){assert.isString(sortMethod);assert(sortMethod==="orderBy"||sortMethod==="orderByDescending"||sortMethod==="thenBy"||sortMethod==="thenByDescending","Expected 'sortMethod' to be one of 'orderBy', 'orderByDescending', 'thenBy' or 'thenByDescending', instead it is '"+sortMethod+"'.")};var executeOrderBy=function(self,batch){assert.isObject(self);assert.isArray(batch);assert(batch.length>0);var cachedSorted=null;var executeLazySort=function(){if(cachedSorted){return cachedSorted}batch.forEach(function(orderCmd){assert.isObject(orderCmd);assert.isFunction(orderCmd.sortSelector);validateSortMethod(orderCmd.sortMethod)});var valuesWithIndex=E.from(self.getIndex().toValues()).zip(self.toValues(),function(index,values){return[index].concat(values)}).toArray();cachedSorted=E.from(batch).aggregate(E.from(valuesWithIndex),function(unsorted,orderCmd){return unsorted[orderCmd.sortMethod](function(row){var columnMappedRow=mapRowByColumns(self,E.from(row).skip(1).toArray());return orderCmd.sortSelector(columnMappedRow)})}).toArray();return cachedSorted};var LazyDataFrame=require("./lazydataframe");return new LazyDataFrame(function(){return self.getColumnNames()},function(){return new ArrayEnumerator(E.from(executeLazySort()).select(function(row){return E.from(row).skip(1).toArray()}).toArray())},function(){var LazyIndex=require("./lazyindex");return new LazyIndex(self.getIndex().getName(),function(){return new ArrayEnumerator(E.from(executeLazySort()).select(function(row){return row[0]}).toArray())})})};var orderBy=function(self,sortMethod,sortSelector){assert.isObject(self);validateSortMethod(sortMethod);assert.isFunction(sortSelector);var batchOrder=[{sortSelector:sortSelector,sortMethod:sortMethod}];var sortedDataFrame=executeOrderBy(self,batchOrder);sortedDataFrame.thenBy=orderThenBy(self,batchOrder,"thenBy");sortedDataFrame.thenByDescending=orderThenBy(self,batchOrder,"thenByDescending");return sortedDataFrame};var processColumnSelector=function(self,columnNameOrIndexOrSelector,fnName){assert.isObject(self);assert.isString(fnName);if(!Object.isFunction(columnNameOrIndexOrSelector)){var columnName;if(Object.isNumber(columnNameOrIndexOrSelector)){var columnNames=self.getColumnNames();assert(columnNameOrIndexOrSelector>=0&&columnNameOrIndexOrSelector<columnNames.length,"Bad column index specified for 'columnNameOrIndexOrSelector' parameter to 'orderBy', expected a column index >= 0 and < "+columnNames.length);columnName=columnNames[columnNameOrIndexOrSelector]}else{assert.isString(columnNameOrIndexOrSelector,"Expected 'columnNameOrIndexOrSelector' parameter to '"+fnName+"' to be a column name, a column index or a selector function.");columnName=columnNameOrIndexOrSelector}columnNameOrIndexOrSelector=function(row){return row[columnName]}}return columnNameOrIndexOrSelector};var orderThenBy=function(self,batch,nextSortMethod){assert.isObject(self);assert.isArray(batch);assert(batch.length>0);validateSortMethod(nextSortMethod);return function(columnNameOrIndexOrSelector){var extendedBatch=batch.concat([{sortSelector:processColumnSelector(self,columnNameOrIndexOrSelector,"thenBy"),sortMethod:nextSortMethod}]);var sortedDataFrame=executeOrderBy(self,extendedBatch);sortedDataFrame.thenBy=orderThenBy(self,extendedBatch,"thenBy");sortedDataFrame.thenByDescending=orderThenBy(self,extendedBatch,"thenByDescending");return sortedDataFrame}};BaseDataFrame.prototype.orderBy=function(columnNameOrIndexOrSelector){var self=this;return orderBy(self,"orderBy",processColumnSelector(self,columnNameOrIndexOrSelector,"orderBy"))};BaseDataFrame.prototype.orderByDescending=function(columnNameOrIndexOrSelector){var self=this;return orderBy(self,"orderByDescending",processColumnSelector(self,columnNameOrIndexOrSelector,"orderByDescending"))};BaseDataFrame.prototype.dropColumn=function(columnOrColumns){if(!Object.isArray(columnOrColumns)){assert.isString(columnOrColumns,"'dropColumn' expected either a string or an array or strings.");columnOrColumns=[columnOrColumns]}var self=this;var cachedColumnIndices=null;var lazyGenerateColumnIndices=function(){if(cachedColumnIndices){return cachedColumnIndices}cachedColumnIndices=E.from(columnOrColumns).select(function(columnName){assert.isString(columnName);var columnIndex=self.getColumnIndex(columnName);if(columnIndex<0){throw new Error("In call to 'dropColumn' failed to find column '"+columnName+"'.")}return columnIndex}).toArray();return cachedColumnIndices};var LazyDataFrame=require("./lazydataframe");return new LazyDataFrame(function(){var columnIndices=lazyGenerateColumnIndices();return E.from(self.getColumnNames()).where(function(columnName,columnIndex){return columnIndices.indexOf(columnIndex)<0}).toArray()},function(){var columnIndices=lazyGenerateColumnIndices();return new ArrayEnumerator(E.from(self.toValues()).select(function(row){return E.from(row).where(function(column,columnIndex){return columnIndices.indexOf(columnIndex)<0}).toArray()}).toArray())},function(){return self.getIndex()})};BaseDataFrame.prototype.setColumn=function(columnName,data){assert.isString(columnName,"Expected 'columnName' parameter to 'setColumn' to be a string.");var self=this;if(!Object.isArray(data)){assert.isObject(data,"Expected 'data' parameter to 'setColumn' to be either an array or a column object.");assert.isFunction(data.reindex,"Expected 'data' parameter to 'setColumn' to have a 'reindex' function that allows the column to be reindexed.");data=data.reindex(self.getIndex()).toValues()}var LazyDataFrame=require("./lazydataframe");var columnIndex=self.getColumnIndex(columnName);if(columnIndex<0){return new LazyDataFrame(function(){return self.getColumnNames().concat([columnName])},function(){return new ArrayEnumerator(E.from(self.toValues()).select(function(row,rowIndex){return row.concat([data[rowIndex]])}).toArray())},function(){return self.getIndex()})}else{return new LazyDataFrame(function(){return E.from(self.getColumnNames()).select(function(thisColumnName,thisColumnIndex){if(thisColumnIndex===columnIndex){return columnName}else{return thisColumnName}}).toArray()},function(){return new ArrayEnumerator(E.from(self.toValues()).select(function(row,rowIndex){return E.from(row).select(function(column,thisColumnIndex){if(thisColumnIndex===columnIndex){return data[rowIndex]}else{return column}}).toArray()}).toArray())},function(){return self.getIndex()})}};BaseDataFrame.prototype.getRowsSubset=function(index,count){assert.isNumber(index,"Expected 'index' parameter to getRowsSubset to be an integer.");assert.isNumber(index,"Expected 'count' parameter to getRowsSubset to be an integer.");var self=this;var LazyDataFrame=require("./lazydataframe");return new LazyDataFrame(function(){return self.columnNames()},function(){return new ArrayEnumerator(E.from(self.toValues()).skip(index).take(count).toArray())},function(){return self.getIndex().getRowsSubset(index,count)})};BaseDataFrame.prototype.setIndex=function(columnNameOrIndex){var self=this;var LazyDataFrame=require("./lazydataframe");return new LazyDataFrame(function(){return self.getColumnNames()},function(){return new ArrayEnumerator(self.toValues())},function(){return new LazyIndex(self.getColumn(columnNameOrIndex).getName(),function(){return new ArrayEnumerator(self.getColumn(columnNameOrIndex).toValues())})})};BaseDataFrame.prototype.resetIndex=function(){var self=this;var LazyDataFrame=require("./lazydataframe");return new LazyDataFrame(function(){return self.getColumnNames()},function(){return self.getEnumerator()},function(){return new LazyIndex("__index___",function(){return new ArrayEnumerator(E.range(0,self.toValues().length).toArray())})})};BaseDataFrame.prototype.toString=function(){var self=this;var Table=require("easy-table");var index=self.getIndex().toValues();var header=[self.getIndex().getName()].concat(self.getColumnNames());var rows=E.from(self.toValues()).select(function(row,rowIndex){return[index[rowIndex]].concat(row)}).toArray();var t=new Table;rows.forEach(function(row,rowIndex){row.forEach(function(cell,cellIndex){t.cell(header[cellIndex],cell)});t.newRow()});return t.toString()};BaseDataFrame.prototype.parseInts=function(columnNameOrIndex){var self=this;return self.setColumn(columnNameOrIndex,self.getColumn(columnNameOrIndex).parseInts())};BaseDataFrame.prototype.parseFloats=function(columnNameOrIndex){var self=this;return self.setColumn(columnNameOrIndex,self.getColumn(columnNameOrIndex).parseFloats())};BaseDataFrame.prototype.parseDates=function(columnNameOrIndex){var self=this;return self.setColumn(columnNameOrIndex,self.getColumn(columnNameOrIndex).parseDates());
};BaseDataFrame.prototype.toStrings=function(columnNameOrIndex){var self=this;return self.setColumn(columnNameOrIndex,self.getColumn(columnNameOrIndex).toString())};BaseDataFrame.prototype.detectTypes=function(){var self=this;var DataFrame=require("./dataframe");var dataFrames=E.from(self.getColumns()).select(function(column){var numValues=column.toValues().length;var Column=require("./column");var columnNameColumn=new Column("column",E.range(0,numValues).select(function(){return column.getName()}).toArray());return column.detectTypes().setColumn("column",columnNameColumn)}).toArray();var dataForge=require("../index");return dataForge.concat(dataFrames)};BaseDataFrame.prototype.truncateStrings=function(maxLength){assert.isNumber(maxLength,"Expected 'maxLength' parameter to 'truncateStrings' to be an integer.");var self=this;var truncatedValues=E.from(self.toValues()).select(function(row){return E.from(row).select(function(value){if(Object.isString(value)){if(value.length>maxLength){return value.substring(0,maxLength)}}return value}).toArray()}).toArray();var DataFrame=require("./dataframe");return new DataFrame({columnNames:self.getColumnNames(),rows:truncatedValues,index:self.getIndex()})};BaseDataFrame.prototype.remapColumns=function(columnNames){assert.isArray(columnNames,"Expected parameter 'columnNames' to remapColumns to be an array with column names.");columnNames.forEach(function(columnName){assert.isString(columnName,"Expected parameter 'columnNames' to remapColumns to be an array with column names.")});var self=this;var LazyDataFrame=require("./lazydataframe");return new LazyDataFrame(function(){return columnNames},function(){return new ArrayEnumerator(E.from(self.toValues()).select(function(row){return E.from(columnNames).select(function(columnName){var columnIndex=self.getColumnIndex(columnName);if(columnIndex>=0){return row[columnIndex]}else{return undefined}}).toArray()}).toArray())},function(){return self.getIndex()})};BaseDataFrame.prototype.renameColumns=function(newColumnNames){var self=this;var numExistingColumns=self.getColumnNames().length;assert.isArray(newColumnNames,"Expected parameter 'newColumnNames' to renameColumns to be an array with column names.");assert(newColumnNames.length===numExistingColumns,"Expected 'newColumnNames' array to have an element for each existing column. There are "+numExistingColumns+"existing columns.");newColumnNames.forEach(function(newColumnName){assert.isString(newColumnName,"Expected new column name to be a string, intead got "+typeof newColumnName)});var LazyDataFrame=require("./lazydataframe");return new LazyDataFrame(function(){return newColumnNames},function(){return self.getEnumerator()},function(){return self.getIndex()})};BaseDataFrame.prototype.toValues=function(){var self=this;var enumerator=self.getEnumerator();validateEnumerator(enumerator);var values=[];while(enumerator.moveNext()){values.push(enumerator.getCurrent())}return values};BaseDataFrame.prototype.toObjects=function(){var self=this;var columnNames=self.getColumnNames();return E.from(self.toValues()).select(function(row){return E.from(columnNames).zip(row,function(columnName,columnValue){return[columnName,columnValue]}).toObject(function(column){return column[0]},function(column){return column[1]})}).toArray()};BaseDataFrame.prototype.toJSON=function(){var self=this;return JSON.stringify(self.toObjects(),null,4)};BaseDataFrame.prototype.toCSV=function(){var self=this;var header=self.getColumnNames().join(",");var rows=E.from(self.toValues()).select(function(row){return row.join(",")}).select(function(col){if(Object.isString(col)){return col.replace(/\r\n/g," ").replace(/\n/g," ")}else{return col}}).toArray();return[header].concat(rows).join("\r\n")};module.exports=BaseDataFrame},{"../index":7,"./column":51,"./dataframe":52,"./enumerators/array":53,"./lazycolumn":56,"./lazydataframe":57,"./lazyindex":58,chai:8,"easy-table":44,linq:45}],50:[function(require,module,exports){"use strict";var ArrayEnumerator=require("./enumerators/array");var assert=require("chai").assert;var E=require("linq");var validateEnumerator=function(enumerator){assert.isObject(enumerator,"Expected an 'enumerator' object.");assert.isFunction(enumerator.moveNext,"Expected enumerator to have function 'moveNext'.");assert.isFunction(enumerator.getCurrent,"Expected enumerator to have function 'getCurrent'.")};var BaseIndex=function(){};BaseIndex.prototype.skip=function(numRows){assert.isNumber(numRows,"Expected 'numRows' parameter to 'skip' function to be a number.");var LazyIndex=require("./lazyindex");var self=this;return new LazyIndex(self.getName(),function(){return new ArrayEnumerator(E.from(self.toValues()).skip(numRows).toArray())})};BaseIndex.prototype.take=function(numRows){assert.isNumber(numRows,"Expected 'numRows' parameter to 'take' function to be a number.");var LazyIndex=require("./lazyindex");var self=this;return new LazyIndex(self.getName(),function(){return new ArrayEnumerator(E.from(self.toValues()).take(numRows).toArray())})};BaseIndex.prototype.getRowsSubset=function(index,count){assert.isNumber(index,"Expected 'index' parameter to getRowsSubset to be an integer.");assert.isNumber(index,"Expected 'count' parameter to getRowsSubset to be an integer.");var self=this;var LazyIndex=require("./lazyindex");return new LazyIndex(self.getName(),function(){return new ArrayEnumerator(E.from(self.toValues()).skip(index).take(count).toArray())})};BaseIndex.prototype.toValues=function(){var self=this;var enumerator=self.getEnumerator();validateEnumerator(enumerator);var values=[];while(enumerator.moveNext()){values.push(enumerator.getCurrent())}return values};module.exports=BaseIndex},{"./enumerators/array":53,"./lazyindex":58,chai:8,linq:45}],51:[function(require,module,exports){"use strict";var BaseColumn=require("./basecolumn");var LazyIndex=require("./lazyindex");var ArrayEnumerator=require("./enumerators/array");var assert=require("chai").assert;var E=require("linq");var inherit=require("./inherit");var Column=function(name,values,index){assert.isString(name,"Expected 'name' parameter to Column constructor be a string.");assert.isArray(values,"Expected 'values' parameter to Column constructor be an array.");if(index){assert.isObject(index,"Expected 'index' parameter to Column constructor to be an object.")}var self=this;self._name=name;self._values=values;self._index=index||new LazyIndex("__index___",function(){return new ArrayEnumerator(E.range(0,values.length).toArray())})};var parent=inherit(Column,BaseColumn);Column.prototype.getName=function(){var self=this;return self._name};Column.prototype.getEnumerator=function(){var self=this;return new ArrayEnumerator(self._values)};Column.prototype.getIndex=function(){var self=this;return self._index};module.exports=Column},{"./basecolumn":48,"./enumerators/array":53,"./inherit":55,"./lazyindex":58,chai:8,linq:45}],52:[function(require,module,exports){"use strict";var BaseDataFrame=require("./basedataframe");var LazyIndex=require("./lazyindex");var ArrayEnumerator=require("./enumerators/array");var assert=require("chai").assert;var E=require("linq");var fs=require("fs");var inherit=require("./inherit");var DataFrame=function(config){var columnNames;var rows;if(config){assert.isObject(config,"Expected 'config' parameter to DataFrame constructor to be an object with options for initialisation.");if(config.index){assert.isObject(config.index,"Expected 'index' member of 'config' parameter to DataFrame constructor to be an object.")}if(config.columnNames){assert.isArray(config.columnNames,"Expected 'columnNames' member of 'config' parameter to DataFrame constructor to be an array of strings.");assert.isArray(config.rows,"Expected 'rows' member of 'config' parameter to DataFrame constructor to be an array of rows.");config.columnNames.forEach(function(columnName){assert.isString(columnName,"Expected 'columnNames' member of 'config' parameter to DataFrame constructor to be an array of strings.")});config.rows.forEach(function(row){assert.isArray(row,"Expect 'rows' member of 'config' parameter to DataFrame constructor to be an array of arrays or an array of objects.")});columnNames=config.columnNames;rows=config.rows}else if(config.rows){assert.isArray(config.rows,"Expected 'rows' member of 'config' parameter to DataFrame constructor to be an array of rows.");if(config.rows.length>0){if(Object.isObject(config.rows[0])){config.rows.forEach(function(row){assert.isObject(row,"Expect 'rows' member of 'config' parameter to DataFrame constructor to be array of objects or arrays, do not mix and match arrays and objects in 'rows'.")});columnNames=E.from(config.rows).selectMany(function(row){return Object.keys(row)}).distinct().toArray();rows=E.from(config.rows).select(function(row){return E.from(columnNames).select(function(columnName){return row[columnName]}).toArray()}).toArray()}else{config.rows.forEach(function(row){assert.isArray(row,"Expect 'rows' member of 'config' parameter to DataFrame constructor to be array of objects or arrays, do not mix and match arrays and objects in 'rows'.")});columnNames=E.range(0,config.rows[0].length).select(function(columnIndex){return columnIndex.toString()}).toArray();rows=config.rows}}}}var self=this;self._columnNames=columnNames||[];self._values=rows||[];self._index=config&&config.index||new LazyIndex("__index___",function(){return new ArrayEnumerator(E.range(0,self._values.length).toArray())})};var parent=inherit(DataFrame,BaseDataFrame);DataFrame.prototype.getIndex=function(){var self=this;return self._index};DataFrame.prototype.getColumnNames=function(){var self=this;return self._columnNames};DataFrame.prototype.getEnumerator=function(){var self=this;return new ArrayEnumerator(self._values)};module.exports=DataFrame},{"./basedataframe":49,"./enumerators/array":53,"./inherit":55,"./lazyindex":58,chai:8,fs:1,linq:45}],53:[function(require,module,exports){"use strict";var assert=require("chai").assert;var ArrayEnumerator=function(arr){assert.isArray(arr);var self=this;var rowIndex=-1;self.moveNext=function(){return++rowIndex<arr.length};self.getCurrent=function(){return arr[rowIndex]}};module.exports=ArrayEnumerator},{chai:8}],54:[function(require,module,exports){"use strict";var BaseIndex=require("./baseindex");var ArrayEnumerator=require("./enumerators/array");var assert=require("chai").assert;var E=require("linq");var inherit=require("./inherit");var Index=function(name,values){assert.isString(name,"Expected 'name' parameter to Index constructor to be a string.");assert.isArray(values,"Expected 'values' parameter to Index constructor to be an array.");var self=this;self._name=name;self._values=values};var parent=inherit(Index,BaseIndex);Index.prototype.getName=function(){var self=this;return self._name};Index.prototype.getEnumerator=function(){var self=this;return new ArrayEnumerator(self._values)};module.exports=Index},{"./baseindex":50,"./enumerators/array":53,"./inherit":55,chai:8,linq:45}],55:[function(require,module,exports){"use strict";function inherit(destination,source){destination.prototype=Object.create(source.prototype);destination.prototype.constructor=destination;return source.prototype}module.exports=inherit},{}],56:[function(require,module,exports){"use strict";var BaseColumn=require("./basecolumn");var LazyIndex=require("./lazyindex");var ArrayEnumerator=require("./enumerators/array");var assert=require("chai").assert;var E=require("linq");var inherit=require("./inherit");var LazyColumn=function(name,enumeratorFn,indexFn){assert.isString(name,"Expected 'name' parameter to Column constructor be a string.");assert.isFunction(enumeratorFn,"Expected 'enumeratorFn' parameter to LazyColumn constructor be a function.");if(indexFn){assert.isFunction(indexFn,"Expected 'indexFn' parameter to LazyColumn constructor to be a function.")}var self=this;self._name=name;self._enumeratorFn=enumeratorFn;self._indexFn=indexFn||function(){return new LazyIndex("__index__",function(){return new ArrayEnumerator(E.range(0,self.toValues().length).toArray())})}};var parent=inherit(LazyColumn,BaseColumn);LazyColumn.prototype.getName=function(){var self=this;return self._name};LazyColumn.prototype.getEnumerator=function(){var self=this;return self._enumeratorFn()};LazyColumn.prototype.getIndex=function(){var self=this;return self._indexFn()};module.exports=LazyColumn},{"./basecolumn":48,"./enumerators/array":53,"./inherit":55,"./lazyindex":58,chai:8,linq:45}],57:[function(require,module,exports){"use strict";var LazyColumn=require("./lazycolumn");var BaseDataFrame=require("./basedataframe");var LazyIndex=require("./lazyindex");var ArrayEnumerator=require("./enumerators/array");var assert=require("chai").assert;var E=require("linq");var inherit=require("./inherit");var LazyDataFrame=function(columnNamesFn,enumeratorFn,indexFn){assert.isFunction(columnNamesFn,"Expected 'columnNamesFn' parameter to LazyDataFrame constructor to be a function.");assert.isFunction(enumeratorFn,"Expected 'enumeratorFn' parameter to LazyDataFrame constructor to be a function.");if(indexFn){assert.isFunction(indexFn,"Expected 'indexFn' parameter to LazyDataFrame constructor to be a function.")}var self=this;self._columnNamesFn=columnNamesFn;self._enumeratorFn=enumeratorFn;self._indexFn=indexFn||function(){return new LazyIndex("__index__",function(){return new ArrayEnumerator(E.range(0,self.toValues().length).toArray())})}};var parent=inherit(LazyDataFrame,BaseDataFrame);LazyDataFrame.prototype.getIndex=function(){var self=this;return self._indexFn()};LazyDataFrame.prototype.getColumnNames=function(){var self=this;return self._columnNamesFn()};LazyDataFrame.prototype.getEnumerator=function(){var self=this;return self._enumeratorFn()};module.exports=LazyDataFrame},{"./basedataframe":49,"./enumerators/array":53,"./inherit":55,"./lazycolumn":56,"./lazyindex":58,chai:8,linq:45}],58:[function(require,module,exports){"use strict";var BaseIndex=require("./baseindex");var ArrayEnumerator=require("./enumerators/array");var assert=require("chai").assert;var E=require("linq");var inherit=require("./inherit");var LazyIndex=function(name,enumeratorFn){assert.isString(name,"Expected 'name' parameter to LazyIndex constructor to be a string.");assert.isFunction(enumeratorFn,"Expected 'enumeratorFn' parameter to LazyIndex constructor to be a function.");var self=this;self._name=name;self._enumeratorFn=enumeratorFn};var parent=inherit(LazyIndex,BaseIndex);LazyIndex.prototype.getName=function(){var self=this;return self._name};LazyIndex.prototype.getEnumerator=function(){var self=this;return self._enumeratorFn()};module.exports=LazyIndex},{"./baseindex":50,"./enumerators/array":53,"./inherit":55,chai:8,linq:45}],59:[function(require,module,exports){"use strict";var E=require("linq");module.exports={dropElement:function(arr,index){return E.from(arr).take(index).concat(E.from(arr).skip(index+1)).toArray()}}},{linq:45}]},{},[6]);
